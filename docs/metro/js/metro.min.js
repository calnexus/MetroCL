/*!
 * Metro 4 Components Library v4.0.0 (https://metroui.org.ua)
 * Copyright 2017 Sergey Pimenov
 * Licensed under MIT
 */

!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(e){return s(n(i(e)))}function n(e){return r(l(a(e),8*e.length))}function s(e){for(var t,n=I?"0123456789ABCDEF":"0123456789abcdef",s="",i=0;i<e.length;i++)t=e.charCodeAt(i),s+=n.charAt(t>>>4&15)+n.charAt(15&t);return s}function i(e){for(var t,n,s="",i=-1;++i<e.length;)t=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),i++),t<=127?s+=String.fromCharCode(t):t<=2047?s+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?s+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(s+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return s}function a(e){var t,n=new Array(e.length>>2);for(t=0;t<n.length;t++)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function r(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function l(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,s=-271733879,i=-1732584194,a=271733878,o=0;o<e.length;o+=16){var r=n,l=s,c=i,m=a;s=p(s=p(s=p(s=p(s=u(s=u(s=u(s=u(s=h(s=h(s=h(s=h(s=d(s=d(s=d(s=d(s,i=d(i,a=d(a,n=d(n,s,i,a,e[o],7,-680876936),s,i,e[o+1],12,-389564586),n,s,e[o+2],17,606105819),a,n,e[o+3],22,-1044525330),i=d(i,a=d(a,n=d(n,s,i,a,e[o+4],7,-176418897),s,i,e[o+5],12,1200080426),n,s,e[o+6],17,-1473231341),a,n,e[o+7],22,-45705983),i=d(i,a=d(a,n=d(n,s,i,a,e[o+8],7,1770035416),s,i,e[o+9],12,-1958414417),n,s,e[o+10],17,-42063),a,n,e[o+11],22,-1990404162),i=d(i,a=d(a,n=d(n,s,i,a,e[o+12],7,1804603682),s,i,e[o+13],12,-40341101),n,s,e[o+14],17,-1502002290),a,n,e[o+15],22,1236535329),i=h(i,a=h(a,n=h(n,s,i,a,e[o+1],5,-165796510),s,i,e[o+6],9,-1069501632),n,s,e[o+11],14,643717713),a,n,e[o],20,-373897302),i=h(i,a=h(a,n=h(n,s,i,a,e[o+5],5,-701558691),s,i,e[o+10],9,38016083),n,s,e[o+15],14,-660478335),a,n,e[o+4],20,-405537848),i=h(i,a=h(a,n=h(n,s,i,a,e[o+9],5,568446438),s,i,e[o+14],9,-1019803690),n,s,e[o+3],14,-187363961),a,n,e[o+8],20,1163531501),i=h(i,a=h(a,n=h(n,s,i,a,e[o+13],5,-1444681467),s,i,e[o+2],9,-51403784),n,s,e[o+7],14,1735328473),a,n,e[o+12],20,-1926607734),i=u(i,a=u(a,n=u(n,s,i,a,e[o+5],4,-378558),s,i,e[o+8],11,-2022574463),n,s,e[o+11],16,1839030562),a,n,e[o+14],23,-35309556),i=u(i,a=u(a,n=u(n,s,i,a,e[o+1],4,-1530992060),s,i,e[o+4],11,1272893353),n,s,e[o+7],16,-155497632),a,n,e[o+10],23,-1094730640),i=u(i,a=u(a,n=u(n,s,i,a,e[o+13],4,681279174),s,i,e[o],11,-358537222),n,s,e[o+3],16,-722521979),a,n,e[o+6],23,76029189),i=u(i,a=u(a,n=u(n,s,i,a,e[o+9],4,-640364487),s,i,e[o+12],11,-421815835),n,s,e[o+15],16,530742520),a,n,e[o+2],23,-995338651),i=p(i,a=p(a,n=p(n,s,i,a,e[o],6,-198630844),s,i,e[o+7],10,1126891415),n,s,e[o+14],15,-1416354905),a,n,e[o+5],21,-57434055),i=p(i,a=p(a,n=p(n,s,i,a,e[o+12],6,1700485571),s,i,e[o+3],10,-1894986606),n,s,e[o+10],15,-1051523),a,n,e[o+1],21,-2054922799),i=p(i,a=p(a,n=p(n,s,i,a,e[o+8],6,1873313359),s,i,e[o+15],10,-30611744),n,s,e[o+6],15,-1560198380),a,n,e[o+13],21,1309151649),i=p(i,a=p(a,n=p(n,s,i,a,e[o+4],6,-145523070),s,i,e[o+11],10,-1120210379),n,s,e[o+2],15,718787259),a,n,e[o+9],21,-343485551),n=f(n,r),s=f(s,l),i=f(i,c),a=f(a,m)}return[n,s,i,a]}function c(e,t,n,s,i,a){return f(m(f(f(t,e),f(s,a)),i),n)}function d(e,t,n,s,i,a,o){return c(t&n|~t&s,e,t,i,a,o)}function h(e,t,n,s,i,a,o){return c(t&s|n&~s,e,t,i,a,o)}function u(e,t,n,s,i,a,o){return c(t^n^s,e,t,i,a,o)}function p(e,t,n,s,i,a,o){return c(n^(t|~s),e,t,i,a,o)}function f(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function m(e,t){return e<<t|e>>>32-t}function v(e){var t=e||window.event,n=E.call(arguments,1),s=0,i=0,a=0,o=0,r=0,l=0;if(e=b.event.fix(t),e.type="mousewheel","detail"in t&&(a=-1*t.detail),"wheelDelta"in t&&(a=t.wheelDelta),"wheelDeltaY"in t&&(a=t.wheelDeltaY),"wheelDeltaX"in t&&(i=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=-1*a,a=0),s=0===a?i:a,"deltaY"in t&&(s=a=-1*t.deltaY),"deltaX"in t&&(i=t.deltaX,0===a&&(s=-1*i)),0!==a||0!==i){if(1===t.deltaMode){var c=b.data(this,"mousewheel-line-height");s*=c,a*=c,i*=c}else if(2===t.deltaMode){var d=b.data(this,"mousewheel-page-height");s*=d,a*=d,i*=d}if(o=Math.max(Math.abs(a),Math.abs(i)),(!M||o<M)&&(M=o,C(t,o)&&(M/=40)),C(t,o)&&(s/=40,i/=40,a/=40),s=Math[s>=1?"floor":"ceil"](s/M),i=Math[i>=1?"floor":"ceil"](i/M),a=Math[a>=1?"floor":"ceil"](a/M),b.event.special.mousewheel.settings.normalizeOffset&&this.getBoundingClientRect){var h=this.getBoundingClientRect();r=e.clientX-h.left,l=e.clientY-h.top}return e.deltaX=i,e.deltaY=a,e.deltaFactor=M,e.offsetX=r,e.offsetY=l,e.deltaMode=0,n.unshift(e,s,i,a),O&&clearTimeout(O),O=setTimeout(g,200),(b.event.dispatch||b.event.handle).apply(this,n)}}function g(){M=null}function C(e,t){return b.event.special.mousewheel.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var b=e;if(void 0===e)throw new Error("Metro's JavaScript requires jQuery");if(window.canObserveMutation="MutationObserver"in window,!1===window.canObserveMutation)throw new Error("Metro 4 requires MutationObserver. Your browser is not support MutationObserver. Please use polyfill, example: //cdn.jsdelivr.net/g/mutationobserver/ or other.");window.METRO_META_INIT=b("meta[name='metro4:init']").attr("content"),window.METRO_META_LOCALE=b("meta[name='metro4:locale']").attr("content"),window.METRO_META_WEEK_START=b("meta[name='metro4:week_start']").attr("content"),window.METRO_META_ANIMATION_DURATION=b("meta[name='metro4:animation_duration']").attr("content"),window.METRO_META_CALLBACK_TIMEOUT=b("meta[name='metro4:callback_timeout']").attr("content"),window.METRO_META_TIMEOUT=b("meta[name='metro4:timeout']").attr("content"),void 0===window.METRO_INIT&&(window.METRO_INIT=void 0===METRO_META_INIT||b.parseJSON(METRO_META_INIT)),void 0===window.METRO_DEBUG&&(window.METRO_DEBUG=!0),void 0===window.METRO_CALENDAR_WEEK_START&&(window.METRO_CALENDAR_WEEK_START=void 0!==METRO_META_WEEK_START?parseInt(METRO_META_WEEK_START):1),void 0===window.METRO_LOCALE&&(window.METRO_LOCALE=void 0!==METRO_META_LOCALE?METRO_META_LOCALE:"en-US"),void 0===window.METRO_ANIMATION_DURATION&&(window.METRO_ANIMATION_DURATION=void 0!==METRO_META_ANIMATION_DURATION?parseInt(METRO_META_ANIMATION_DURATION):300),void 0===window.METRO_CALLBACK_TIMEOUT&&(window.METRO_CALLBACK_TIMEOUT=void 0!==METRO_META_CALLBACK_TIMEOUT?parseInt(METRO_META_CALLBACK_TIMEOUT):500),void 0===window.METRO_TIMEOUT&&(window.METRO_TIMEOUT=void 0!==METRO_META_TIMEOUT?parseInt(METRO_META_TIMEOUT):2e3),void 0===window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE&&(window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE=!0),void 0===window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS&&(window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS=!0),void 0===window.METRO_HOTKEYS_FILTER_TEXT_INPUTS&&(window.METRO_HOTKEYS_FILTER_TEXT_INPUTS=!0),void 0===window.METRO_HOTKEYS_BUBBLE_UP&&(window.METRO_HOTKEYS_BUBBLE_UP=!1),void 0===window.METRO_THROWS&&(window.METRO_THROWS=!0),"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),window.METRO_POSITION={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",TOP_RIGHT:"top-right",TOP_LEFT:"top-left",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",LEFT_BOTTOM:"left-bottom",LEFT_TOP:"left-top",RIGHT_TOP:"right-top",RIGHT_BOTTOM:"right-bottom"},window.METRO_FULLSCREEN_MODE={WINDOW:"window",DESKTOP:"desktop"},window.METRO_CONTROLS_POSITION={INSIDE:"inside",OUTSIDE:"outside"},window.METRO_ASPECT_RATIO={HD:"hd",SD:"sd",CINEMA:"cinema"},window.METRO_GROUP_MODE={ONE:"one",MULTI:"multi"},window.METRO_POPOVER_MODE={CLICK:"click",HOVER:"hover",FOCUS:"focus"},window.METRO_LISTVIEW_MODE={LIST:"list",CONTENT:"content",ICONS:"icons",ICONS_MEDIUM:"icons-medium",ICONS_LARGE:"icons-large",TILES:"tiles",TABLE:"table"},window.METRO_STEPPER_VIEW={SQUARE:"square",CYCLE:"cycle",DIAMOND:"diamond"};var T="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,y={version:"4.0.0-alpha",isTouchable:T,isFullscreenEnabled:document.fullscreenEnabled,eventClick:T?"touchstart.metro":"click.metro",eventStart:T?"touchstart.metro":"mousedown.metro",eventStop:T?"touchend.metro":"mouseup.metro",eventMove:T?"touchmove.metro":"mousemove.metro",eventEnter:T?"touchstart.metro":"mouseenter.metro",eventLeave:T?"touchend.metro":"mouseleave.metro",eventFocus:"focus.metro",eventBlur:"blur.metro",hotkeys:[],about:function(){console.log("Metro 4 Components Library - v"+this.version)},init:function(){var e=b("[data-role]"),t=b("[data-hotkey]"),n=b("html");!0===T?n.addClass("metro-touch-device"):n.addClass("metro-no-touch-device");var s,i={childList:!0,attributes:!0,subtree:!0};return s=function(e){e.map(function(e){if("attributes"===e.type){var t=b(e.target);void 0!==t.data("metroComponent")&&t.data(t.data("metroComponent")).changeAttribute(e.attributeName)}else if("childList"===e.type&&e.addedNodes.length>0){var n,s,i={},a={},o=e.addedNodes;for(n=0;n<o.length;n++){var r=e.addedNodes[n];if("SCRIPT"===r.tagName||"STYLE"===r.tagName)return;a=(s=b(e.addedNodes[n])).find("[data-role]"),(i=void 0!==s.data("role")?b.merge(a,s):a).length&&y.initWidgets(i)}}})},new MutationObserver(s).observe(n[0],i),setTimeout(function(){y.initHotkeys(t),y.initWidgets(e)},0),this},initHotkeys:function(e){b.each(e,function(){var e=b(this),t=!!e.data("hotkey")&&e.data("hotkey").toLowerCase();!1!==t&&!0!==e.data("hotKeyBonded")&&(b.Metro.hotkeys.push(t),b(document).on("keyup",null,t,function(t){if(void 0!==e)return"A"===e[0].tagName&&void 0!==e.attr("href")&&""!==e.attr("href").trim()&&"#"!==e.attr("href").trim()?document.location.href=e.attr("href"):e.click(),METRO_HOTKEYS_BUBBLE_UP}),e.data("hotKeyBonded",!0))})},initWidgets:function(e){b.each(e,function(){var e=b(this);e.data("role").split(/\s*,\s*/).map(function(t){try{void 0!==b.fn[t]&&!0!==e.data(t+"-initiated")&&(b.fn[t].call(e),e.data(t+"-initiated",!0),e.data("metroComponent",t))}catch(e){console.log(e.message,e.stack)}})})},plugin:function(e,t){b.fn[e]=function(n){return this.each(function(){b.data(this,e,Object.create(t).init(n,this))})}},noop:function(){},noop_true:function(){return!0},noop_false:function(){return!1},requestFullScreen:function(e){e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():e.requestFullscreen()},exitFullScreen:function(){document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen()},inFullScreen:function(){return void 0!==(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)},about:function(){console.log(this.version),console.log("Metro 4 Components library, Copyright 2012-2018 by Sergey Pimenov")}};b.Metro=window.Metro=y;var w={duration:METRO_ANIMATION_DURATION,func:"swing",switch:function(e,t){e.hide(),t.css({top:0,left:0}).show()},slideUp:function(e,t,n,s){var i=e.parent().outerHeight(!0);void 0===n&&(n=this.duration),void 0===s&&(s=this.func),e.css("z-index",1).animate({top:-i},n,s),t.css({top:i,left:0,zIndex:2}).animate({top:0},n,s)},slideDown:function(e,t,n,s){var i=e.parent().outerHeight(!0);void 0===n&&(n=this.duration),void 0===s&&(s=this.func),e.css("z-index",1).animate({top:i},n,s),t.css({left:0,top:-i,zIndex:2}).animate({top:0},n,s)},slideLeft:function(e,t,n,s){var i=e.parent().outerWidth(!0);void 0===n&&(n=this.duration),void 0===s&&(s=this.func),e.css("z-index",1).animate({left:-i},n,s),t.css({left:i,zIndex:2}).animate({left:0},n,s)},slideRight:function(e,t,n,s){var i=e.parent().outerWidth(!0);void 0===n&&(n=this.duration),void 0===s&&(s=this.func),e.css("z-index",1).animate({left:i},n,s),t.css({left:-i,zIndex:2}).animate({left:0},n,s)},fade:function(e,t,n){void 0===n&&(n=this.duration),e.animate({opacity:0},n),t.css({top:0,left:0}).animate({opacity:1},n)}};y.animation=w,b.easing.jswing=b.easing.swing,b.extend(b.easing,{def:"easeOutQuad",swing:function(e,t,n,s,i){return b.easing[b.easing.def](e,t,n,s,i)},easeInQuad:function(e,t,n,s,i){return s*(t/=i)*t+n},easeOutQuad:function(e,t,n,s,i){return-s*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,s,i){return(t/=i/2)<1?s/2*t*t+n:-s/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,s,i){return s*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,s,i){return s*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,s,i){return(t/=i/2)<1?s/2*t*t*t+n:s/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,s,i){return s*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,s,i){return-s*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,s,i){return(t/=i/2)<1?s/2*t*t*t*t+n:-s/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,s,i){return s*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,s,i){return s*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,s,i){return(t/=i/2)<1?s/2*t*t*t*t*t+n:s/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,s,i){return-s*Math.cos(t/i*(Math.PI/2))+s+n},easeOutSine:function(e,t,n,s,i){return s*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,s,i){return-s/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,s,i){return 0==t?n:s*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,s,i){return t==i?n+s:s*(1-Math.pow(2,-10*t/i))+n},easeInOutExpo:function(e,t,n,s,i){return 0==t?n:t==i?n+s:(t/=i/2)<1?s/2*Math.pow(2,10*(t-1))+n:s/2*(2-Math.pow(2,-10*--t))+n},easeInCirc:function(e,t,n,s,i){return-s*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,s,i){return s*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,s,i){return(t/=i/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+n:s/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,s,i){var a=1.70158,o=0,r=s;return 0==t?n:1==(t/=i)?n+s:(o||(o=.3*i),r<Math.abs(s)?(r=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)+n)},easeOutElastic:function(e,t,n,s,i){var a=1.70158,o=0,r=s;return 0==t?n:1==(t/=i)?n+s:(o||(o=.3*i),r<Math.abs(s)?(r=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/r),r*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/o)+s+n)},easeInOutElastic:function(e,t,n,s,i){var a=1.70158,o=0,r=s;return 0==t?n:2==(t/=i/2)?n+s:(o||(o=i*(.3*1.5)),r<Math.abs(s)?(r=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)*-.5+n:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/o)*.5+s+n)},easeInBack:function(e,t,n,s,i,a){return void 0==a&&(a=1.70158),s*(t/=i)*t*((a+1)*t-a)+n},easeOutBack:function(e,t,n,s,i,a){return void 0==a&&(a=1.70158),s*((t=t/i-1)*t*((a+1)*t+a)+1)+n},easeInOutBack:function(e,t,n,s,i,a){return void 0==a&&(a=1.70158),(t/=i/2)<1?s/2*(t*t*((1+(a*=1.525))*t-a))+n:s/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+n},easeInBounce:function(e,t,n,s,i){return s-b.easing.easeOutBounce(e,i-t,0,s,i)+n},easeOutBounce:function(e,t,n,s,i){return(t/=i)<1/2.75?s*(7.5625*t*t)+n:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+n:s*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(e,t,n,s,i){return t<i/2?.5*b.easing.easeInBounce(e,2*t,0,s,i)+n:.5*b.easing.easeOutBounce(e,2*t-i,0,s,i)+.5*s+n}}),b.fn.extend({toggleAttr:function(e,t){return this.each(function(){var n=b(this);void 0!==t?n.attr(e,t):void 0!==n.attr(e)?n.removeAttr(e):n.attr(e,!0)})},clearClasses:function(){return this.each(function(){this.className=""})}}),Array.prototype.shuffle=function(){for(var e,t,n=this.length;0!==n;)t=Math.floor(Math.random()*n),e=this[n-=1],this[n]=this[t],this[t]=e;return this},Array.prototype.clone=function(){return this.slice(0)},Array.prototype.unique=function(){for(var e=this.concat(),t=0;t<e.length;++t)for(var n=t+1;n<e.length;++n)e[t]===e[n]&&e.splice(n--,1);return e},Number.prototype.format=function(e,t,n,s){var i="\\d(?=(\\d{"+(t||3)+"})+"+(e>0?"\\D":"$")+")",a=this.toFixed(Math.max(0,~~e));return(s?a.replace(".",s):a).replace(new RegExp(i,"g"),"$&"+(n||","))},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},Date.prototype.format=function(e,t){void 0===t&&(t="en-US");var n=(void 0!==y.locales[t]?y.locales[t]:y.locales["en-US"]).calendar,s=this,i=s.getDay(),a=s.getDate(),o=s.getMonth(),r=s.getFullYear(),l=s.getHours(),c=n.days,d=n.months,h=[0,31,59,90,120,151,181,212,243,273,304,334],u=function(){return r%4==0&&r%100!=0||r%400==0},p=function(){var e=new Date(s);return e.setDate(a-(i+6)%7+3),e},f=function(e,t){return(""+(Math.pow(10,t)+e)).slice(1)};return e.replace(/%[a-z]/gi,function(e){return{"%a":c[i].slice(0,3),"%A":c[i],"%b":d[o].slice(0,3),"%B":d[o],"%c":s.toUTCString(),"%C":Math.floor(r/100),"%d":f(a,2),"%e":a,"%F":s.toISOString().slice(0,10),"%G":p().getFullYear(),"%g":(""+p().getFullYear()).slice(2),"%H":f(l,2),"%I":f((l+11)%12+1,2),"%j":f(h[o]+a+(o>1&&u()?1:0),3),"%k":""+l,"%l":(l+11)%12+1,"%m":f(o+1,2),"%M":f(s.getMinutes(),2),"%p":l<12?"AM":"PM","%P":l<12?"am":"pm","%s":Math.round(s.getTime()/1e3),"%S":f(s.getSeconds(),2),"%u":i||7,"%V":function(){var e=p(),t=e.valueOf();e.setMonth(0,1);var n=e.getDay();return 4!==n&&e.setMonth(0,1+(4-n+7)%7),f(1+Math.ceil((t-e)/6048e5),2)}(),"%w":""+i,"%x":s.toLocaleDateString(),"%X":s.toLocaleTimeString(),"%y":(""+r).slice(2),"%Y":r,"%z":s.toTimeString().replace(/.+GMT([+-]\d+).+/,"$1"),"%Z":s.toTimeString().replace(/.+\((.+?)\)$/,"$1")}[e]||e})};var _={specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS,filterTextInputs:METRO_HOTKEYS_FILTER_TEXT_INPUTS,filterContentEditable:METRO_HOTKEYS_FILTER_CONTENT_EDITABLE},keyHandler:function(e){if("string"==typeof e.data&&(e.data={keys:e.data}),e.data&&e.data.keys&&"string"==typeof e.data.keys){var t=e.handler,n=e.data.keys.toLowerCase().split(" ");e.handler=function(e){if(this===e.target||!(_.options.filterInputAcceptingElements&&_.textInputTypes.test(e.target.nodeName)||_.options.filterContentEditable&&b(e.target).attr("contenteditable")||_.options.filterTextInputs&&b.inArray(e.target.type,_.textAcceptingInputTypes)>-1)){var s="keypress"!==e.type&&_.specialKeys[e.which],i=String.fromCharCode(e.which).toLowerCase(),a="",o={};b.each(["alt","ctrl","shift"],function(t,n){e[n+"Key"]&&s!==n&&(a+=n+"+")}),e.metaKey&&!e.ctrlKey&&"meta"!==s&&(a+="meta+"),e.metaKey&&"meta"!==s&&a.indexOf("alt+ctrl+shift+")>-1&&(a=a.replace("alt+ctrl+shift+","hyper+")),s?o[a+s]=!0:(o[a+i]=!0,o[a+_.shiftNums[i]]=!0,"shift+"===a&&(o[_.shiftNums[i]]=!0));for(var r=0,l=n.length;r<l;r++)if(o[n[r]])return t.apply(this,arguments)}}}}};b.each(["keydown","keyup","keypress"],function(){b.event.special[this]={add:_.keyHandler}});var x={"en-US":{calendar:{months:["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Su","Mo","Tu","We","Th","Fr","Sa","Sun","Mon","Tus","Wen","Thu","Fri","Sat"],time:{days:"DAYS",hours:"HOURS",minutes:"MINS",seconds:"SECS"}},buttons:{ok:"OK",cancel:"Cancel",done:"Done",today:"Today",now:"Now",clear:"Clear",help:"Help",yes:"Yes",no:"No",random:"Random"}},"de-DE":{calendar:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember","Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sn","Mn","Di","Mi","Do","Fr","Sa","Son","Mon","Die","Mit","Don","Fre","Sam"],time:{days:"TAGE",hours:"UHR",minutes:"MIN",seconds:"SEK"}},buttons:{ok:"OK",cancel:"Abbrechen",done:"Fertig",today:"Heute",now:"Jetzt",clear:"Reinigen",help:"Hilfe",yes:"Ja",no:"Nein",random:"Zufällig"}},"ru-RU":{calendar:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь","Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Вс","Пн","Вт","Ср","Чт","Пт","Сб","Вос","Пон","Вто","Сре","Чет","Пят","Суб"],time:{days:"ДНИ",hours:"ЧАСЫ",minutes:"МИН",seconds:"СЕК"}},buttons:{ok:"ОК",cancel:"Отмена",done:"Готово",today:"Сегодня",now:"Сейчас",clear:"Очистить",help:"Помощь",yes:"Да",no:"Нет",random:"Случайно"}},"uk-UA":{calendar:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень","Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],days:["Неділя","Понеділок","Вівторок","Середа","Четвер","П’ятниця","Субота","Нд","Пн","Вт","Ср","Чт","Пт","Сб","Нед","Пон","Вiв","Сер","Чет","Пят","Суб"],time:{days:"ДНІ",hours:"ГОД",minutes:"ХВИЛ",seconds:"СЕК"}},buttons:{ok:"ОК",cancel:"Відміна",done:"Готово",today:"Сьогодні",now:"Зараз",clear:"Очистити",help:"Допомога",yes:"Так",no:"Ні",random:"Випадково"}}};y.locales=x;var O,M,I=0,k=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],S="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],E=Array.prototype.slice;if(b.event.fixHooks)for(var D=k.length;D;)b.event.fixHooks[k[--D]]=b.event.mouseHooks;b.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=S.length;e;)this.addEventListener(S[--e],v,!1);else this.onmousewheel=v;b.data(this,"mousewheel-line-height",b.event.special.mousewheel.getLineHeight(this)),b.data(this,"mousewheel-page-height",b.event.special.mousewheel.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=S.length;e;)this.removeEventListener(S[--e],v,!1);else this.onmousewheel=null;b.removeData(this,"mousewheel-line-height"),b.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=b(e),n=t["offsetParent"in b.fn?"offsetParent":"parent"]();return n.length||(n=b("body")),parseInt(n.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return b(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}},b.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}});var A=e.event.special,N="D"+ +new Date,R="D"+(+new Date+1);A.scrollstart={setup:function(){var t,n=function(n){var s=this;t?clearTimeout(t):(n.type="scrollstart",e.event.dispatch.apply(s,arguments)),t=setTimeout(function(){t=null},A.scrollstop.latency)};e(this).bind("scroll",n).data(N,n)},teardown:function(){e(this).unbind("scroll",e(this).data(N))}},A.scrollstop={latency:300,setup:function(){var t,n=function(n){var s=this;t&&clearTimeout(t),t=setTimeout(function(){t=null,n.type="scrollstop",e.event.dispatch.apply(s,arguments)},A.scrollstop.latency)};e(this).bind("scroll",n).data(R,n)},teardown:function(){e(this).unbind("scroll",e(this).data(R))}};var F={key:"METRO:APP",init:function(e,t){return this.options=b.extend({},this.options,e),this},nvl:function(e,t){return void 0===e||null===e?t:e},setKey:function(e){this.key=e},getKey:function(){return this.key},setItem:function(e,t){window.localStorage.setItem(this.key+":"+e,JSON.stringify(t))},getItem:function(e,t,n){var s,i;i=this.nvl(window.localStorage.getItem(this.key+":"+e),t);try{s=JSON.parse(i,n)}catch(e){s=null}return s},getItemPart:function(e,t,n,s){var i,a=this.getItem(e,n,s);for(t=t.split("->"),i=0;i<t.length;i++)a=a[t[i]];return a},delItem:function(e){window.localStorage.removeItem(this.key+":"+e)},size:function(e){var t;switch(e){case"m":case"M":t=1048576;break;case"k":case"K":t=1024;break;default:t=1}return JSON.stringify(window.localStorage).length/t}};b.Metro.storage=F.init();b.Metro.template=y.template=function(e,t){for(var n,s,i=/<%(.+?)%>/g,a=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,o="with(obj) { var r=[];\n",r=0,l=function(e,t){return o+=t?e.match(a)?e+"\n":"r.push("+e+");\n":""!==e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",l};s=i.exec(e);)l(e.slice(r,s.index))(s[1],!0),r=s.index+s[0].length;l(e.substr(r,e.length-r)),o=(o+'return r.join(""); }').replace(/[\r\t\n]/g," ");try{n=new Function("obj",o).apply(t,[t])}catch(e){console.error("'"+e.message+"'"," in \n\nCode:\n",o,"\n")}return n};var P={isUrl:function(e){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@\-\/]))?/.test(e)},isTag:function(e){return/<\/?[\w\s="/.':;#-\/\?]+>/gi.test(e)},isColor:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},isEmbedObject:function(e){var t=["iframe","object","embed","video"],n=!1;return b.each(t,function(){-1!==e.indexOf(this)&&(n=!0)}),n},isVideoUrl:function(e){return/youtu\.be|youtube|vimeo/gi.test(e)},isDate:function(e){return"Invalid Date"!==String(new Date(e))},isInt:function(e){return Number(e)===e&&e%1==0},isFloat:function(e){return Number(e)===e&&e%1!=0},isTouchDevice:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},isFunc:function(e){return this.isType(e,"function")},isObject:function(e){return this.isType(e,"object")},isType:function(e,t){if(void 0===e||null===e)return!1;if(this.isTag(e)||this.isUrl(e))return!1;if(typeof e===t)return e;if(typeof window[e]===t)return window[e];if("string"==typeof e&&-1===e.indexOf("."))return!1;if("string"==typeof e&&-1!==e.indexOf(" "))return!1;if("string"==typeof e&&-1!==e.indexOf("("))return!1;if("string"==typeof e&&-1!==e.indexOf("["))return!1;var n,s=e.split("."),i=window;for(n=0;n<s.length;n++)i=i[s[n]];return typeof i===t&&i},isMetroObject:function(e,t){var n=b(e),s=n.data(t);return 0===n.length?(console.log(t+" "+e+" not found!"),!1):void 0!==s||(console.log("Element not contain role "+t+'! Please add attribute data-role="'+t+'" to element '+e),!1)},isJQueryObject:function(t){return"function"==typeof e&&t instanceof e},embedObject:function(e){return"<div class='embed-container'>"+e+"</div>"},embedUrl:function(e){return-1!==e.indexOf("youtu.be")&&(e="https://www.youtube.com/embed/"+e.split("/").pop()),"<div class='embed-container'><iframe src='"+e+"'></iframe></div>"},secondsToTime:function(e){var t=e%3600,n=t%60;return{h:Math.floor(e/3600),m:Math.floor(t/60),s:Math.ceil(n)}},hex2rgba:function(e,t){var n;if(t=isNaN(t)?1:t,/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return 3===(n=e.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),n="0x"+n.join(""),"rgba("+[n>>16&255,n>>8&255,255&n].join(",")+","+t+")";throw new Error("Hex2rgba error. Bad Hex value")},random:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},uniqueId:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},secondsToFormattedString:function(e){var t=parseInt(e,10),n=Math.floor(t/3600),s=Math.floor((t-3600*n)/60),i=t-3600*n-60*s;return n<10&&(n="0"+n),s<10&&(s="0"+s),i<10&&(i="0"+i),n+":"+s+":"+i},callback:function(e,t,n){return this.exec(e,t,n)},exec:function(e,t,n){var s;if(void 0===e||null===e)return!1;var i=this.isFunc(e);!1===i&&(i=new Function("a",e));try{s=i.apply(n,t)}catch(e){if(s=null,!0===METRO_THROWS)throw e}return s},isOutsider:function(e){var t,n=(e=this.isJQueryObject(e)?e:b(e)).clone();return n.removeAttr("data-role").css({visibility:"hidden",position:"absolute",display:"block"}),e.parent().append(n),t=n[0].getBoundingClientRect(),n.remove(),t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},inViewport:function(t){"function"==typeof e&&t instanceof e&&(t=t[0]);var n=t.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)},objectLength:function(e){return Object.keys(e).length},percent:function(e,t,n){if(0===e)return 0;var s=100*t/e;return n?Math.round(s):Math.round(100*s)/100},camelCase:function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},objectShift:function(e){var t=0;return b.each(e,function(e){0===t?t=e:t>e&&(t=e)}),delete e[t],e},objectDelete:function(e,t){return void 0!==e[t]?e:delete e[t]},arrayDelete:function(e,t){return e.indexOf(t)>-1?e.splice(e.indexOf(t),1):e},nvl:function(e,t){return void 0===e||null===e?t:e},github:function(e,t){var n=this;b.ajax({url:"https://api.github.com/repos/"+e,dataType:"jsonp"}).done(function(e){n.callback(t,[e.data])})},detectIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var s=e.indexOf("Edge/");return s>0&&parseInt(e.substring(s+5,e.indexOf(".",s)),10)},detectChrome:function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},md5:function(e){return t(e)},encodeURI:function(e){return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")},pageHeight:function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},cleanPreCode:function(e){Array.prototype.slice.call(document.querySelectorAll(e),0).forEach(function(e){var t=e.textContent.replace(/^[\r\n]+/,"").replace(/\s+$/g,"");if(/^\S/gm.test(t))e.textContent=t;else{for(var n,s,i,a=/^[\t ]+/gm,o=1e3;n=a.exec(t);)(i=n[0].length)<o&&(o=i,s=n[0]);1e3!==o&&(e.textContent=t.replace(new RegExp("^"+s,"gm"),""))}})},coords:function(e){this.isJQueryObject(e)&&(e=e[0]);var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},positionXY:function(e,t){switch(t){case"client":return this.clientXY(e);case"screen":return this.screenXY(e);case"page":return this.pageXY(e);default:return{left:o,top:0}}},clientXY:function(e){return{x:this.isTouchDevice()?e.changedTouches[0].clientX:e.clientX,y:this.isTouchDevice()?e.changedTouches[0].clientY:e.clientY}},screenXY:function(e){return{x:this.isTouchDevice()?e.changedTouches[0].screenX:e.screenX,y:this.isTouchDevice()?e.changedTouches[0].screenY:e.screenY}},pageXY:function(e){return{x:this.isTouchDevice()?e.changedTouches[0].pageX:e.pageX,y:this.isTouchDevice()?e.changedTouches[0].pageY:e.pageY}},isRightMouse:function(e){return"which"in e?3===e.which:"button"in e?2===e.button:void 0},hiddenElementSize:function(e,t){var n=b(e).clone();n.removeAttr("data-role").css({visibility:"hidden",position:"absolute",display:"block"}),b("body").append(n),void 0===t&&(t=!1);var s=n.outerWidth(t),i=n.outerHeight(t);return n.remove(),{width:s,height:i}},getStyle:function(e,t){return!0===P.isJQueryObject(e)&&(e=e[0]),window.getComputedStyle(e,t)},getStyleOne:function(e,t){return this.getStyle(e).getPropertyValue(t)},computedRgbToHex:function(e){var t=e.replace(/[^\d,]/g,"").split(","),n="#";return b.each(t,function(){var e=parseInt(this).toString(16);n+=1===e.length?"0"+e:e}),n},computedRgbToRgba:function(e,t){var n=e.replace(/[^\d,]/g,"").split(",");return void 0===t&&(t=1),n.push(t),"rgba("+n.join(",")+")"},computedRgbToArray:function(e){return e.replace(/[^\d,]/g,"").split(",")},isDarkColor:function(e){var t;return!1===this.isColor(e)?t=this.hexColorToArray(e):this.computedRgbToArray(e),2*t[0]+5*t[1]+t[2]<=1024},hexColorToArray:function(e){var t;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3===(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),[t>>16&255,t>>8&255,255&t]):[0,0,0]},hexColorToRgbA:function(e,t){var n;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3===(n=e.substring(1).split("")).length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),n="0x"+n.join(""),"rgba("+[n>>16&255,n>>8&255,255&n,t||1].join(",")+")"):"rgba(0,0,0,1)"},getInlineStyles:function(e){var t={};this.isJQueryObject(e)&&(e=e[0]);for(var n=0,s=e.style.length;n<s;n++){var i=e.style[n];t[i]=e.style[i]}return t},updateURIParameter:function(e,t,n){var s=new RegExp("([?&])"+t+"=.*?(&|$)","i"),i=-1!==e.indexOf("?")?"&":"?";return e.match(s)?e.replace(s,"$1"+t+"="+n+"$2"):e+i+t+"="+n},getURIParameter:function(e,t){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},dateToString:function(e){var t=e.getFullYear(),n=e.getMonth()+1,s=e.getDate();return(n<10?"0"+n:n)+"/"+(s<10?"0"+s:s)+"/"+t},getLocales:function(){return Object.keys(y.locales)},addLocale:function(e){y.locales=b.extend({},y.locales,e)},strToArray:function(e,t){return e.split(t).map(function(e){return e.trim()})},aspectRatio:function(e,t){return"16/9"===t?9*e/16:"21/9"===t?9*e/21:"4/3"===t?3*e/4:void 0}};b.Metro.utils=y.utils=P;var B={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onAccordionCreate,[this.element]),this},options:{duration:METRO_ANIMATION_DURATION,oneFrame:!0,showActive:!0,activeFrameClass:"",activeHeadingClass:"",activeContentClass:"",onFrameOpen:y.noop,onFrameBeforeOpen:y.noop_true,onFrameClose:y.noop,onFrameBeforeClose:y.noop_true,onAccordionCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t=this.element,n=this.options,s=t.children(".frame"),i=t.children(".frame.active");t.addClass("accordion"),e=0===i.length?s[0]:i[0],this._hideAll(),!0!==n.showActive&&!0!==n.oneFrame||this._openFrame(e),this._createEvents()},_createEvents:function(){var e=this,t=this.element,n=this.options,s=t.children(".frame.active");t.on("click",".heading",function(){var i=b(this),a=i.parent();if(i.closest(".accordion")[0]!==t[0])return!1;a.hasClass("active")?1===s.length&&n.oneFrame||e._closeFrame(a):e._openFrame(a),t.trigger("open",{frame:a})})},_openFrame:function(e){var t=this.element,n=this.options,s=(t.children(".frame"),b(e));if(!1===P.exec(n.onFrameBeforeOpen,s[0]))return!1;!0===n.oneFrame&&this._closeAll(),s.addClass("active "+n.activeFrameClass),s.children(".heading").addClass(n.activeHeadingClass),s.children(".content").addClass(n.activeContentClass).slideDown(n.duration),P.callback(n.onFrameOpen,s[0])},_closeFrame:function(e){this.element;var t=this.options,n=b(e);!1!==P.exec(t.onFrameBeforeOpen,n[0])&&(n.removeClass("active "+t.activeFrameClass),n.children(".heading").removeClass(t.activeHeadingClass),n.children(".content").removeClass(t.activeContentClass).slideUp(t.duration),P.callback(t.onFrameClose,n[0]))},_closeAll:function(){var e=this,t=this.element,n=(this.options,t.children(".frame"));b.each(n,function(){e._closeFrame(this)})},_hideAll:function(){var e=this.element,t=(this.options,e.children(".frame"));b.each(t,function(){b(this).children(".content").hide(0)})},_openAll:function(){var e=this,t=this.element,n=(this.options,t.children(".frame"));b.each(n,function(){e._openFrame(this)})},changeAttribute:function(e){}};y.plugin("accordion",B);var z={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onActivityCreate,[this.element]),this},options:{type:"ring",style:"light",size:64,radius:20,onActivityCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t,n=this.element,s=this.options;switch(n.html("").addClass(s.style+"-style").addClass("activity-"+s.type),s.type){case"metro":!function(){for(e=0;e<5;e++)b("<div/>").addClass("circle").appendTo(n)}();break;case"square":!function(){for(e=0;e<4;e++)b("<div/>").addClass("square").appendTo(n)}();break;case"cycle":b("<div/>").addClass("cycle").appendTo(n);break;case"simple":b('<svg class="circular"><circle class="path" cx="'+s.size/2+'" cy="'+s.size/2+'" r="'+s.radius+'" fill="none" stroke-width="2" stroke-miterlimit="10"/></svg>').appendTo(n);break;default:!function(){for(e=0;e<5;e++)t=b("<div/>").addClass("wrap").appendTo(n),b("<div/>").addClass("circle").appendTo(t)}()}},changeAttribute:function(e){}};y.plugin("activity",z);var H={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.preloader=null,this.player=null,this.audio=t,this.stream=null,this.volume=null,this.volumeBackup=0,this.muted=!1,this._setOptionsFromDOM(),this._create(),this},options:{playlist:null,src:null,volume:.5,loop:!1,autoplay:!1,showLoop:!0,showPlay:!0,showStop:!0,showMute:!0,showFull:!0,showStream:!0,showVolume:!0,showInfo:!0,showPlaylist:!0,showNext:!0,showPrev:!0,showFirst:!0,showLast:!0,showForward:!0,showBackward:!0,showShuffle:!0,showRandom:!0,loopIcon:"<span class='default-icon-loop'></span>",stopIcon:"<span class='default-icon-stop'></span>",playIcon:"<span class='default-icon-play'></span>",pauseIcon:"<span class='default-icon-pause'></span>",muteIcon:"<span class='default-icon-mute'></span>",volumeLowIcon:"<span class='default-icon-low-volume'></span>",volumeMediumIcon:"<span class='default-icon-medium-volume'></span>",volumeHighIcon:"<span class='default-icon-high-volume'></span>",playlistIcon:"<span class='default-icon-playlist'></span>",nextIcon:"<span class='default-icon-next'></span>",prevIcon:"<span class='default-icon-prev'></span>",firstIcon:"<span class='default-icon-first'></span>",lastIcon:"<span class='default-icon-last'></span>",forwardIcon:"<span class='default-icon-forward'></span>",backwardIcon:"<span class='default-icon-backward'></span>",shuffleIcon:"<span class='default-icon-shuffle'></span>",randomIcon:"<span class='default-icon-random'></span>",onPlay:y.noop,onPause:y.noop,onStop:y.noop,onEnd:y.noop,onMetadata:y.noop,onTime:y.noop,onAudioCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;this.audio;!1===y.isFullscreenEnabled&&(t.fullScreenMode=METRO_FULLSCREEN_MODE.WINDOW),this._createPlayer(),this._createControls(),this._createEvents(),!0===t.autoplay&&this.play(),P.exec(t.onAudioCreate,[e,this.player])},_createPlayer:function(){var e=this.element,t=this.options,n=this.audio,s=e.prev(),i=e.parent(),a=b("<div>").addClass("media-player audio-player "+e[0].className);0===s.length?i.prepend(a):a.insertAfter(s),e.appendTo(a),b.each(["muted","autoplay","controls","height","width","loop","poster","preload"],function(){e.removeAttr(this)}),e.attr("preload","auto"),n.volume=t.volume,null!==t.src&&this._setSource(t.src),e[0].className="",this.player=a},_setSource:function(e){var t=this.element;t.find("source").remove(),t.removeAttr("src"),Array.isArray(e)?b.each(e,function(){var e=this;void 0!==e.src&&b("<source>").attr("src",e.src).attr("type",void 0!==e.type?e.type:"").appendTo(t)}):t.attr("src",e)},_createControls:function(){var e=this,t=this.element,n=this.options,s=this.elem,i=(this.player,b("<div>").addClass("controls").addClass(n.clsControls).insertAfter(t)),a=b("<div>").addClass("stream").appendTo(i),o=b("<input>").addClass("stream-slider ultra-thin cycle-marker").appendTo(a),r=b("<div>").addClass("load-audio").appendTo(a),l=b("<div>").addClass("volume").appendTo(i),c=b("<input>").addClass("volume-slider ultra-thin cycle-marker").appendTo(l),d=b("<div>").addClass("info-box").appendTo(i);!0!==n.showInfo&&d.hide(),r.activity({type:"metro",style:"color"}),r.hide(0),this.preloader=r,o.slider({clsMarker:"bg-red",clsHint:"bg-cyan fg-white",clsComplete:"bg-cyan",hint:!0,onStart:function(){s.paused||s.pause()},onStop:function(t){s.seekable.length>0&&(s.currentTime=(e.duration*t/100).toFixed(0)),s.paused&&s.currentTime>0&&s.play()}}),this.stream=o,!0!==n.showStream&&a.hide(),c.slider({clsMarker:"bg-red",clsHint:"bg-cyan fg-white",hint:!0,value:100*n.volume,onChangeValue:function(e){s.volume=e/100}}),this.volume=c,!0!==n.showVolume&&l.hide();var h;!0===n.showLoop&&(h=b("<button>").attr("type","button").addClass("button square loop").html(n.loopIcon).appendTo(i)),!0===n.showPlay&&b("<button>").attr("type","button").addClass("button square play").html(n.playIcon).appendTo(i),!0===n.showStop&&b("<button>").attr("type","button").addClass("button square stop").html(n.stopIcon).appendTo(i),!0===n.showMute&&b("<button>").attr("type","button").addClass("button square mute").html(n.muteIcon).appendTo(i),!0===n.loop&&(h.addClass("active"),t.attr("loop","loop")),this._setVolume(),n.muted&&(e.volumeBackup=s.volume,e.volume.data("slider").val(0),s.volume=0),d.html("00:00 / 00:00")},_createEvents:function(){var e=this,t=this.element,n=this.options,s=this.elem,i=this.player;t.on("loadstart",function(){e.preloader.fadeIn()}),t.on("loadedmetadata",function(){e.duration=s.duration.toFixed(0),e._setInfo(0,e.duration),P.exec(n.onMetadata,[s,i])}),t.on("canplay",function(){e._setBuffer(),e.preloader.fadeOut()}),t.on("progress",function(){e._setBuffer()}),t.on("timeupdate",function(){var t=Math.round(100*s.currentTime/e.duration);e._setInfo(s.currentTime,e.duration),e.stream.data("slider").val(t),P.exec(n.onTime,[s.currentTime,e.duration,s,i])}),t.on("waiting",function(){e.preloader.fadeIn()}),t.on("loadeddata",function(){}),t.on("play",function(){i.find(".play").html(n.pauseIcon),P.exec(n.onPlay,[s,i])}),t.on("pause",function(){i.find(".play").html(n.playIcon),P.exec(n.onPause,[s,i])}),t.on("stop",function(){e.stream.data("slider").val(0),P.exec(n.onStop,[s,i])}),t.on("ended",function(){e.stream.data("slider").val(0),P.exec(n.onEnd,[s,i])}),t.on("volumechange",function(){e._setVolume()}),i.on("click",".play",function(t){s.paused?e.play():e.pause()}),i.on("click",".stop",function(t){e.stop()}),i.on("click",".mute",function(t){e._toggleMute()}),i.on("click",".loop",function(){e._toggleLoop()})},_toggleLoop:function(){var e=this.player.find(".loop");0!==e.length&&(e.toggleClass("active"),e.hasClass("active")?this.element.attr("loop","loop"):this.element.removeAttr("loop"))},_toggleMute:function(){this.muted=!this.muted,!1===this.muted?(this.audio.volume=this.volumeBackup,this.volume.data("slider").val(100*this.volumeBackup)):(this.volumeBackup=this.audio.volume,this.volume.data("slider").val(0),this.audio.volume=0)},_setInfo:function(e,t){this.player.find(".info-box").html(P.secondsToFormattedString(Math.round(e))+" / "+P.secondsToFormattedString(Math.round(t)))},_setBuffer:function(){var e=this.audio.buffered.length?Math.round(Math.floor(this.audio.buffered.end(0))/Math.floor(this.audio.duration)*100):0;this.stream.data("slider").buff(e)},_setVolume:function(){var e=this.audio,t=this.player,n=this.options,s=t.find(".mute"),i=100*e.volume;i>1&&i<30?s.html(n.volumeLowIcon):i>=30&&i<60?s.html(n.volumeMediumIcon):i>=60&&i<=100?s.html(n.volumeHighIcon):s.html(n.muteIcon)},play:function(e){void 0!==e&&this._setSource(e),void 0===this.element.attr("src")&&0===this.element.find("source").length||this.audio.play()},pause:function(){this.audio.pause()},resume:function(){this.audio.paused&&this.play()},stop:function(){this.audio.pause(),this.audio.currentTime=0,this.stream.data("slider").val(0)},volume:function(e){if(void 0===e)return this.audio.volume;e>1&&(e/=100),this.audio.volume=e,this.volume.data("slider").val(100*e)},loop:function(){this._toggleLoop()},mute:function(){this._toggleMute()},changeSource:function(){var e=JSON.parse(this.element.attr("data-src"));this.play(e)},changeVolume:function(){var e=this.element.attr("data-volume");this.volume(e)},changeAttribute:function(e){switch(e){case"data-src":this.changeSource();break;case"data-volume":this.changeVolume()}}};y.plugin("audio",H);var L={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.active=null,this._setOptionsFromDOM(),this._create(),this},options:{targets:"button",clsActive:"bg-gray",mode:METRO_GROUP_MODE.ONE,onButtonClick:y.noop,onButtonsGroupCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;this._createGroup(),this._createEvents(),P.exec(t.onButtonsGroupCreate,[e])},_createGroup:function(){var e=this.element,t=this.options;t.mode===METRO_GROUP_MODE.ONE&&0===e.find(t.clsActive).length&&b(e.find(t.targets)[0]).addClass(t.clsActive)},_createEvents:function(){var e=this.element,t=this.options;e.on("click",t.targets,function(){var n=b(this);P.exec(t.onButtonClick,[n]),t.mode===METRO_GROUP_MODE.ONE&&n.hasClass(t.clsActive)||(t.mode===METRO_GROUP_MODE.ONE?(e.find(t.targets).removeClass(t.clsActive),n.addClass(t.clsActive)):n.toggleClass(t.clsActive))})},changeAttribute:function(e){}};y.plugin("buttonsGroup",L);var U={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.today=new Date,this.today.setHours(0,0,0,0),this.show=new Date,this.show.setHours(0,0,0,0),this.current={year:this.show.getFullYear(),month:this.show.getMonth(),day:this.show.getDate()},this.preset=[],this.selected=[],this.exclude=[],this.min=null,this.max=null,this.locale=null,this.minYear=this.current.year-this.options.yearsBefore,this.maxYear=this.current.year+this.options.yearsAfter,this._setOptionsFromDOM(),this._create(),this},options:{pickerMode:!1,show:null,locale:METRO_LOCALE,weekStart:0,outside:!0,buttons:"cancel, today, clear, done",yearsBefore:100,yearsAfter:100,clsCalendar:"",clsCalendarHeader:"",clsCalendarContent:"",clsCalendarFooter:"",clsCalendarMonths:"",clsCalendarYears:"",clsToday:"",clsSelected:"",clsExcluded:"",clsCancelButton:"",clsTodayButton:"",clsClearButton:"",clsDoneButton:"",isDialog:!1,ripple:!1,rippleColor:"#cccccc",exclude:null,preset:null,minDate:null,maxDate:null,weekDayClick:!1,multiSelect:!1,onCancel:y.noop,onToday:y.noop,onClear:y.noop,onDone:y.noop,onDayClick:y.noop,onWeekDayClick:y.noop,onMonthChange:y.noop,onYearChange:y.noop,onCalendarCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this,t=this.element,n=this.options;t.html("").addClass("calendar").addClass(n.clsCalendar),null!==n.preset&&(!1===Array.isArray(n.preset)&&(n.preset=n.preset.split(",").map(function(e){return e.trim()})),b.each(n.preset,function(){!1!==P.isDate(this)&&e.selected.push(new Date(this).getTime())})),null!==n.exclude&&(!1===Array.isArray(n.exclude)&&(n.exclude=n.exclude.split(",").map(function(e){return e.trim()})),b.each(n.exclude,function(){!1!==P.isDate(this)&&e.exclude.push(new Date(this).getTime())})),!1!==n.buttons&&!1===Array.isArray(n.buttons)&&(n.buttons=n.buttons.split(",").map(function(e){return e.trim()})),null!==n.minDate&&P.isDate(n.minDate)&&(this.min=new Date(n.minDate),this.min.setHours(0,0,0,0)),null!==n.maxDate&&P.isDate(n.maxDate)&&(this.max=new Date(n.maxDate),this.max.setHours(0,0,0,0)),null!==n.show&&P.isDate(n.show)&&(this.show=new Date(n.show),this.show.setHours(0,0,0,0),this.current={year:this.show.getFullYear(),month:this.show.getMonth(),day:this.show.getDate()}),this.locale=void 0!==y.locales[n.locale]?y.locales[n.locale]:y.locales["en-US"],this._build()},_build:function(){this._drawCalendar(),this._bindEvents(),!0===this.options.ripple&&element.ripple({rippleTarget:".button, .prev-month, .next-month, .prev-year, .next-year, .day",rippleColor:this.options.rippleColor}),P.exec(this.options.onCalendarCreate,[this.element])},_bindEvents:function(){var e=this,t=this.element,n=this.options;t.on("click",".prev-month, .next-month, .prev-year, .next-year",function(s){var i,a=b(this);a.hasClass("prev-month")&&(i=new Date(e.current.year,e.current.month-1,1)).getFullYear()<e.minYear||a.hasClass("next-month")&&(i=new Date(e.current.year,e.current.month+1,1)).getFullYear()>e.maxYear||a.hasClass("prev-year")&&(i=new Date(e.current.year-1,e.current.month,1)).getFullYear()<e.minYear||a.hasClass("next-year")&&(i=new Date(e.current.year+1,e.current.month,1)).getFullYear()>e.maxYear||(e.current={year:i.getFullYear(),month:i.getMonth(),day:i.getDate()},setTimeout(function(){e._drawContent(),(a.hasClass("prev-month")||a.hasClass("next-month"))&&P.exec(n.onMonthChange,[e.current,t]),(a.hasClass("prev-year")||a.hasClass("next-year"))&&P.exec(n.onYearChange,[e.current,t])},n.ripple?300:0),s.preventDefault(),s.stopPropagation())}),t.on("click",".button.today",function(s){e.today=new Date,e.current={year:e.today.getFullYear(),month:e.today.getMonth(),day:e.today.getDate()},e._drawHeader(),e._drawContent(),P.exec(n.onToday,[e.today,t]),s.preventDefault(),s.stopPropagation()}),t.on("click",".button.clear",function(s){e.selected=[],e._drawContent(),P.exec(n.onClear,[t]),s.preventDefault(),s.stopPropagation()}),t.on("click",".button.cancel",function(s){e._drawContent(),P.exec(n.onCancel,[t]),s.preventDefault(),s.stopPropagation()}),t.on("click",".button.done",function(s){e._drawContent(),P.exec(n.onDone,[e.selected,t]),s.preventDefault(),s.stopPropagation()}),t.on("click",".week-days .day",function(s){if(!1!==n.weekDayClick&&!1!==n.multiSelect){var i=b(this),a=i.index(),o=!0===n.outside?t.find(".days-row .day:nth-child("+(a+1)+")"):t.find(".days-row .day:not(.outside):nth-child("+(a+1)+")");b.each(o,function(){var t=b(this),s=t.data("day");P.arrayDelete(e.selected,s),e.selected.push(s),t.addClass("selected").addClass(n.clsSelected)}),P.exec(n.onWeekDayClick,[e.selected,i,t]),s.preventDefault(),s.stopPropagation()}}),t.on("click",".days-row .day",function(s){var i,a,o=b(this);if(a=o.data("day"),i=e.selected.indexOf(a),o.hasClass("outside"))return a=new Date(a),e.current={year:a.getFullYear(),month:a.getMonth(),day:a.getDate()},void e._drawContent();!0===n.pickerMode?(e.selected=[a],e.today=new Date(a),e.current.year=e.today.getFullYear(),e.current.month=e.today.getMonth(),e.current.day=e.today.getDate(),e._drawHeader(),e._drawContent()):-1===i?(!1===n.multiSelect&&(t.find(".days-row .day").removeClass("selected").removeClass(n.clsSelected),e.selected=[]),e.selected.push(a),o.addClass("selected").addClass(n.clsSelected)):(o.removeClass("selected").removeClass(n.clsSelected),P.arrayDelete(e.selected,a)),P.exec(n.onDayClick,[e.selected,o,t]),s.preventDefault(),s.stopPropagation()}),t.on("click",".curr-month",function(e){t.find(".calendar-months").addClass("open"),e.preventDefault(),e.stopPropagation()}),t.on("click",".calendar-months li",function(s){e.current.month=b(this).index(),e._drawContent(),P.exec(n.onMonthChange,[e.current,t]),t.find(".calendar-months").removeClass("open"),s.preventDefault(),s.stopPropagation()}),t.on("click",".curr-year",function(e){t.find(".calendar-years").addClass("open"),e.preventDefault(),e.stopPropagation()}),t.on("click",".calendar-years li",function(s){e.current.year=b(this).text(),e._drawContent(),P.exec(n.onYearChange,[e.current,t]),t.find(".calendar-years").removeClass("open"),s.preventDefault(),s.stopPropagation()}),t.on("click",function(e){var n=t.find(".calendar-months"),s=t.find(".calendar-years");n.hasClass("open")&&n.removeClass("open"),s.hasClass("open")&&s.removeClass("open"),e.preventDefault(),e.stopPropagation()})},_drawHeader:function(){var e=this.element,t=this.options,n=this.locale.calendar,s=e.find(".calendar-header");0===s.length&&(s=b("<div>").addClass("calendar-header").addClass(t.clsCalendarHeader).appendTo(e)),s.html(""),b("<div>").addClass("header-year").html(this.today.getFullYear()).appendTo(s),b("<div>").addClass("header-day").html(n.days[this.today.getDay()]+", "+n.months[this.today.getMonth()+12]+" "+this.today.getDate()).appendTo(s)},_drawFooter:function(){var e=this.element,t=this.options,n=this.locale.buttons,s=e.find(".calendar-footer");!1!==t.buttons&&(0===s.length&&(s=b("<div>").addClass("calendar-footer").addClass(t.clsCalendarFooter).appendTo(e)),s.html(""),b.each(t.buttons,function(){var e=b("<button>").addClass("button "+this+" "+t["cls"+this.capitalize()+"Button"]).html(n[this]).appendTo(s);"cancel"!==this&&"done"!==this||e.addClass("js-dialog-close")}))},_drawMonths:function(){var e,t=this.element,n=this.options,s=b("<div>").addClass("calendar-months").addClass(n.clsCalendarMonths).appendTo(t),i=b("<ul>").addClass("months-list").appendTo(s),a=this.locale.calendar;for(e=0;e<12;e++)b("<li>").html(a.months[e]).appendTo(i)},_drawYears:function(){var e,t=this.element,n=this.options,s=b("<div>").addClass("calendar-years").addClass(n.clsCalendarYears).appendTo(t),i=b("<ul>").addClass("years-list").appendTo(s);for(e=this.minYear;e<=this.maxYear;e++)b("<li>").html(e).appendTo(i)},_drawContent:function(){var e,t,n,s,i,a,o,r,l=this.element,c=this.options,d=l.find(".calendar-content"),h=this.locale.calendar,u=0,p=new Date(this.current.year,this.current.month,1),f=new Date(this.current.year,this.current.month,0).getDate();0===d.length&&(d=b("<div>").addClass("calendar-content").addClass(c.clsCalendarContent).appendTo(l)),d.html(""),e=b("<div>").addClass("calendar-toolbar").appendTo(d),b("<span>").addClass("prev-month").appendTo(e),b("<span>").addClass("curr-month").html(h.months[this.current.month]).appendTo(e),b("<span>").addClass("next-month").appendTo(e),b("<span>").addClass("prev-year").appendTo(e),b("<span>").addClass("curr-year").html(this.current.year).appendTo(e),b("<span>").addClass("next-year").appendTo(e);var m=b("<div>").addClass("week-days").appendTo(d);for(t=0;t<7;t++)0===c.weekStart?n=t:7===(n=t+1)&&(n=0),b("<span>").addClass("day").html(h.days[n+7]).appendTo(m);var v=b("<div>").addClass("days").appendTo(d),g=b("<div>").addClass("days-row").appendTo(v);for(a=0===c.weekStart?p.getDay():0===p.getDay()?6:p.getDay()-1,this.current.month-1<0?(r=11,o=this.current.year-1):(r=this.current.month-1,o=this.current.year),t=0;t<a;t++){var C=f-a+t+1;s=b("<div>").addClass("day outside").appendTo(g),(i=new Date(o,r,C)).setHours(0,0,0,0),s.data("day",i.getTime()),!0===c.outside&&(s.html(C),-1!==this.selected.indexOf(i.getTime())&&s.addClass("selected").addClass(c.clsSelected),-1!==this.exclude.indexOf(i.getTime())&&s.addClass("disabled excluded").addClass(c.clsExcluded),null!==this.min&&i.getTime()<this.min.getTime()&&s.addClass("disabled excluded").addClass(c.clsExcluded),null!==this.max&&i.getTime()>this.max.getTime()&&s.addClass("disabled excluded").addClass(c.clsExcluded)),u++}for(p.setHours(0,0,0,0);p.getMonth()===this.current.month;)(s=b("<div>").addClass("day").html(p.getDate()).appendTo(g)).data("day",p.getTime()),this.today.getFullYear()===p.getFullYear()&&this.today.getMonth()===p.getMonth()&&this.today.getDate()===p.getDate()&&s.addClass("today").addClass(c.clsToday),-1!==this.selected.indexOf(p.getTime())&&s.addClass("selected").addClass(c.clsSelected),-1!==this.exclude.indexOf(p.getTime())&&s.addClass("disabled excluded").addClass(c.clsExcluded),null!==this.min&&p.getTime()<this.min.getTime()&&s.addClass("disabled excluded").addClass(c.clsExcluded),null!==this.max&&p.getTime()>this.max.getTime()&&s.addClass("disabled excluded").addClass(c.clsExcluded),++u%7==0&&(g=b("<div>").addClass("days-row").appendTo(v)),p.setDate(p.getDate()+1),p.setHours(0,0,0,0);if(a=0===c.weekStart?p.getDay():0===p.getDay()?6:p.getDay()-1,this.current.month+1>11?(r=0,o=this.current.year+1):(r=this.current.month+1,o=this.current.year),a>0)for(t=0;t<7-a;t++)s=b("<div>").addClass("day outside").appendTo(g),(i=new Date(o,r,t+1)).setHours(0,0,0,0),s.data("day",i.getTime()),!0===c.outside&&(s.html(t+1),-1!==this.selected.indexOf(i.getTime())&&s.addClass("selected").addClass(c.clsSelected),-1!==this.exclude.indexOf(i.getTime())&&s.addClass("disabled excluded").addClass(c.clsExcluded),null!==this.min&&i.getTime()<this.min.getTime()&&s.addClass("disabled excluded").addClass(c.clsExcluded),null!==this.max&&i.getTime()>this.max.getTime()&&s.addClass("disabled excluded").addClass(c.clsExcluded));var T=l.find(".day:nth-child(1)").css("width");l.find(".days-row .day").css({height:T,lineHeight:T})},_drawCalendar:function(){this.element.html(""),this._drawHeader(),this._drawContent(),this._drawFooter(),this._drawMonths(),this._drawYears()},getPreset:function(){return this.preset},getSelected:function(){return this.selected},getExcluded:function(){return this.exclude},getToday:function(){return this.today},getCurrent:function(){return this.current},setExclude:function(e){var t=this,n=this.element,s=this.options;s.exclude=void 0!==e?e:n.attr("data-exclude"),null!==s.exclude&&(!1===Array.isArray(s.exclude)&&(s.exclude=s.exclude.split(",").map(function(e){return e.trim()})),b.each(s.exclude,function(){!1!==P.isDate(this)&&t.exclude.push(new Date(this).getTime())})),this._drawContent()},setPreset:function(e){var t=this,n=this.element,s=this.options;s.preset=void 0!==e?e:n.attr("data-preset"),null!==s.preset&&(t.selected=[],!1===Array.isArray(s.preset)&&(s.preset=s.preset.split(",").map(function(e){return e.trim()})),b.each(s.preset,function(){!1!==P.isDate(this)&&t.selected.push(new Date(this).getTime())})),this._drawContent()},setShow:function(e){var t=this.element,n=this.options;n.show=null!==e?e:t.attr("data-show"),null!==n.show&&P.isDate(n.show)&&(this.show=new Date(n.show),this.show.setHours(0,0,0,0),this.current={year:this.show.getFullYear(),month:this.show.getMonth(),day:this.show.getDate()}),this._drawContent()},setMinDate:function(e){var t=this.element;this.options.minDate=null!==e?e:t.attr("data-min-date"),this._drawContent()},setMaxDate:function(e){var t=this.element;this.options.maxDate=null!==e?e:t.attr("data-max-date"),this._drawContent()},setToday:function(e){!1!==P.isDate(e)&&(this.today=new Date(e),this.today.setHours(0,0,0,0),this._drawHeader(),this._drawContent())},changeAttribute:function(e){switch(e){case"data-exclude":this.setExclude();break;case"data-preset":this.setPreset();break;case"data-show":this.setShow();break;case"data-min-date":this.setMinDate();break;case"data-max-date":this.setMaxDate()}}};b(document).on("click",function(e){b(".calendar .calendar-years").each(function(){b(this).removeClass("open")}),b(".calendar .calendar-months").each(function(){b(this).removeClass("open")})}),y.plugin("calendar",U);var Y={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.height=0,this.width=0,this.slides=[],this.current=null,this.currentIndex=null,this.dir=this.options.direction,this.interval=null,this.isAnimate=!1,this._setOptionsFromDOM(),this._create(),this},options:{autoStart:!1,width:"100%",height:"16/9",effect:"slide",effectFunc:"linear",direction:"left",duration:METRO_ANIMATION_DURATION,period:5e3,stopOnMouse:!0,controls:!0,bullets:!0,bulletStyle:"square",controlsOnMouse:!1,controlsOutside:!1,bulletsPosition:"default",controlPrev:"&#x23F4",controlNext:"&#x23F5",clsCarousel:"",clsSlides:"",clsSlide:"",clsControls:"",clsControlNext:"",clsControlPrev:"",clsBullets:"",clsBullet:"",clsBulletOn:"",clsThumbOn:"",onStop:y.noop,onStart:y.noop,onPlay:y.noop,onSlideClick:y.noop,onBulletClick:y.noop,onThumbClick:y.noop,onMouseEnter:y.noop,onMouseLeave:y.noop,onNextClick:y.noop,onPrevClick:y.noop,onCarouselCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options,n=e.find(".slide"),s=e.find(".slides");e.addClass("carousel").addClass(t.clsCarousel),!0===t.controlsOutside&&e.addClass("controls-outside"),0===s.length&&(s=b("<div>").addClass("slides").appendTo(e),n.appendTo(s)),n.addClass(t.clsSlides),0!==n.length?(this._createSlides(),this._createControls(),this._createBullets(),this._createEvents(),this._resize(),!0===t.controlsOnMouse&&(e.find("[class*=carousel-switch]").hide(),e.find(".carousel-bullets").hide()),!0===t.autoStart&&this._start(),P.exec(this.options.onCarouselCreate,[this.element])):P.exec(this.options.onCarouselCreate,[this.element])},_start:function(){var e=this,t=this.element,n=this.options,s=n.period,i=this.slides[this.currentIndex];void 0!==i.data("period")&&(s=i.data("period")),this.slides.length<=1||(this.interval=setTimeout(function(){var t="left"===n.direction?"next":"prior";e._slideTo(t,!0)},s),P.exec(n.onStart,[t]))},_stop:function(){clearInterval(this.interval),this.interval=!1},_resize:function(){var e,t=this.element,n=this.options,s=t.outerWidth(),i=[];["16/9","21/9","4/3"].indexOf(n.height)>-1?e=P.aspectRatio(s,n.height):String(n.height).indexOf("@")>-1?(i=P.strToArray(n.height.substr(1),"|"),b.each(i,function(){var t=P.strToArray(this,",");window.matchMedia(t[0]).matches&&(e=["16/9","21/9","4/3"].indexOf(t[1])>-1?P.aspectRatio(s,t[1]):parseInt(t[1]))})):e=parseInt(n.height),t.css({height:e})},_createSlides:function(){var e=this,t=this.element,n=this.options,s=t.find(".slide");b.each(s,function(t){var s=b(this);if(void 0!==s.data("cover")&&s.css({backgroundImage:"url("+s.data("cover")+")",backgroundSize:"cover",backgroundRepeat:"no-repeat"}),0!==t)switch(n.effect){case"switch":case"slide":s.css("left","100%");break;case"slide-v":s.css("top","100%");break;case"fade":s.css("opacity","0")}s.addClass(n.clsSlide),e.slides.push(s)}),this.currentIndex=0,this.current=this.slides[this.currentIndex]},_createControls:function(){var e,t,n=this.element,s=this.options;!1!==s.controls&&(e=b("<span/>").addClass("carousel-switch-next").addClass(s.clsControls).addClass(s.clsControlNext).html(">"),t=b("<span/>").addClass("carousel-switch-prev").addClass(s.clsControls).addClass(s.clsControlPrev).html("<"),s.controlNext&&e.html(s.controlNext),s.controlPrev&&t.html(s.controlPrev),e.appendTo(n),t.appendTo(n))},_createBullets:function(){var e,t,n=this.element,s=this.options;if(!1!==s.bullets){for(e=b("<div>").addClass("carousel-bullets").addClass("bullet-style-"+s.bulletStyle).addClass(s.clsBullets),"default"===s.bulletsPosition||"center"===s.bulletsPosition?e.addClass("flex-justify-center"):"left"===s.bulletsPosition?e.addClass("flex-justify-start"):e.addClass("flex-justify-end"),t=0;t<this.slides.length;t++){var i=b("<span>").addClass("carousel-bullet").addClass(s.clsBullet).data("slide",t);0===t&&i.addClass("bullet-on").addClass(s.clsBulletOn),i.appendTo(e)}e.appendTo(n)}},_createEvents:function(){var e=this,t=this.element,n=this.options;t.on("click",".carousel-bullet",function(s){var i=b(this);!1===e.isAnimate&&(e._slideToSlide(i.data("slide")),P.exec(n.onBulletClick,[i,t,s]))}),t.on("click",".carousel-switch-next",function(s){!1===e.isAnimate&&(e._slideTo("next",!1),P.exec(n.onNextClick,[t,s]))}),t.on("click",".carousel-switch-prev",function(s){!1===e.isAnimate&&(e._slideTo("prev",!1),P.exec(n.onPrevClick,[t,s]))}),!0===n.stopOnMouse&&!0===n.autoStart&&(t.on(y.eventEnter,function(s){!0===n.controlsOnMouse&&(t.find("[class*=carousel-switch]").fadeIn(),t.find(".carousel-bullets").fadeIn()),e._stop(),P.exec(n.onMouseEnter,[t,s])}),t.on(y.eventLeave,function(s){!0===n.controlsOnMouse&&(t.find("[class*=carousel-switch]").fadeOut(),t.find(".carousel-bullets").fadeOut()),e._start(),P.exec(n.onMouseLeave,[t,s])})),!0===n.controlsOnMouse&&(t.on(y.eventEnter,function(){t.find("[class*=carousel-switch]").fadeIn(),t.find(".carousel-bullets").fadeIn()}),t.on(y.eventLeave,function(){t.find("[class*=carousel-switch]").fadeOut(),t.find(".carousel-bullets").fadeOut()})),t.on("click",".slide",function(e){var s=b(this);P.exec(n.onSlideClick,[s,t,e])}),b(window).on("resize",function(){e._resize()})},_slideToSlide:function(e){var t,n,s,i=this.element,a=this.options;void 0!==this.slides[e]&&this.currentIndex!==e&&(s=e>this.currentIndex?"next":"prev",t=this.slides[this.currentIndex],n=this.slides[e],this.currentIndex=e,this._effect(t,n,a.effect,s),i.find(".carousel-bullet").removeClass("bullet-on").removeClass(a.clsBulletOn),i.find(".carousel-bullet:nth-child("+(this.currentIndex+1)+")").addClass("bullet-on").addClass(a.clsBulletOn))},_slideTo:function(e,t){var n,s,i=this.element,a=this.options;void 0===e&&(e="next"),n=this.slides[this.currentIndex],"next"===e?++this.currentIndex>=this.slides.length&&(this.currentIndex=0):--this.currentIndex<0&&(this.currentIndex=this.slides.length-1),s=this.slides[this.currentIndex],this._effect(n,s,a.effect,e,t),i.find(".carousel-bullet").removeClass("bullet-on").removeClass(a.clsBulletOn),i.find(".carousel-bullet:nth-child("+(this.currentIndex+1)+")").addClass("bullet-on").addClass(a.clsBulletOn)},_effect:function(e,t,n,s,i){var a,o=this,r=(this.element,this.options),l=r.duration,c=r.effectFunc,d=r.period;switch(void 0!==t.data("duration")&&(l=t.data("duration")),void 0!==t.data("effectFunc")&&(c=t.data("effectFunc")),"switch"===n&&(l=0),e.stop(!0,!0),t.stop(!0,!0),this.isAnimate=!0,setTimeout(function(){o.isAnimate=!1},l),"slide"===n&&(a="next"===s?"slideLeft":"slideRight"),"slide-v"===n&&(a="next"===s?"slideUp":"slideDown"),n){case"slide":case"slide-v":w[a](e,t,l,c);break;case"fade":w.fade(e,t,l,c);break;default:w.switch(e,t)}!0===i&&(void 0!==t.data("period")&&(d=t.data("period")),this.interval=setTimeout(function(){var e="left"===r.direction?"next":"prior";o._slideTo(e,!0)},d))},toSlide:function(e){this._slideToSlide(e)},next:function(){this._slideTo("next")},prev:function(){this._slideTo("prev")},stop:function(){clearInterval(this.interval),P.exec(this.options.onStop,[this.element])},play:function(){this._start(),P.exec(this.options.onPlay,[this.element])},changeAttribute:function(e){}};y.plugin("carousel",Y);var J={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),this},options:{position:"right",opacity:1,clsCharms:"",onCharmCreate:y.noop,onOpen:y.noop,onClose:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;e.addClass("charms").addClass(t.position+"-side").addClass(t.clsCharms),e.css({backgroundColor:P.computedRgbToRgba(P.getStyleOne(e,"background-color"),t.opacity)}),P.exec(t.onCharmCreate,[e])},open:function(){var e=this.element,t=this.options;e.addClass("open"),P.exec(t.onOpen,[e])},close:function(){var e=this.element,t=this.options;e.removeClass("open"),P.exec(t.onClose,[e])},toggle:function(){var e=this.element,t=this.options;e.toggleClass("open"),!0===e.hasClass("open")?P.exec(t.onOpen,[e]):P.exec(t.onClose,[e])},opacity:function(e){var t=this.element,n=this.options;if(void 0===e)return n.opacity;var s=Math.abs(parseFloat(e));s<0||s>1||(n.opacity=s,t.css({backgroundColor:P.computedRgbToRgba(P.getStyleOne(t,"background-color"),s)}))},changeOpacity:function(){var e=this.element;this.opacity(e.attr("data-opacity"))},changeAttribute:function(e){switch(e){case"data-opacity":this.changeOpacity()}}};y.plugin("charms",J),y.charms={check:function(e){return!1!==P.isMetroObject(e,"charms")||(console.log("Element is not a charms component"),!1)},isOpen:function(e){if(!1!==this.check(e))return b(e).data("charms").hasClass("open")},open:function(e){!1!==this.check(e)&&b(e).data("charms").open()},close:function(e){!1!==this.check(e)&&b(e).data("charms").close()},toggle:function(e){!1!==this.check(e)&&b(e).data("charms").toggle()},closeAll:function(){b("[data-role*=charms]").each(function(){b(this).data("charms").close()})},opacity:function(e,t){!1!==this.check(e)&&b(e).data("charms").opacity(t)}};var W={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onCheckboxCreate,[this.element]),this},options:{caption:"",captionPosition:"right",disabled:!1,clsElement:"",clsCheck:"",clsCaption:"",onCheckboxCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options,n=e.prev(),s=e.parent(),i=b("<label>").addClass("checkbox "+e[0].className),a=b("<span>").addClass("check"),o=b("<span>").addClass("caption").html(t.caption);void 0===e.attr("id")&&e.attr("id",P.uniqueId()),i.attr("for",e.attr("id")),e.attr("type","checkbox"),e.appendTo(i),0===n.length?s.prepend(i):i.insertAfter(n),a.appendTo(i),"left"===t.captionPosition?o.insertBefore(a):o.insertAfter(a),e[0].className="",i.addClass(t.clsElement),o.addClass(t.clsCaption),a.addClass(t.clsCheck),void 0!==e.attr("indeterminate")&&(e[0].indeterminate=!0),!0===t.disabled&&e.is(":disabled")?this.disable():this.enable()},indeterminate:function(){this.element[0].indeterminate=!0},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},toggleIndeterminate:function(){this.element[0].indeterminate=void 0!==this.element.attr("indeterminate")},changeAttribute:function(e){switch(e){case"disabled":this.toggleState();break;case"indeterminate":this.toggleIndeterminate()}}};y.plugin("checkbox",W);var j={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._clockInterval=null,this._setOptionsFromDOM(),this._create(),P.exec(this.options.onClockCreate,[this.element]),this},options:{showTime:!0,showDate:!0,timeFormat:"24",dateFormat:"american",divider:"&nbsp;&nbsp;",onClockCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this;this._tick(),this._clockInterval=setInterval(function(){e._tick()},500)},_addLeadingZero:function(e){return e<10&&(e="0"+e),e},_tick:function(){var e=this.element,t=this.options,n=new Date,s=(n.getTime(),""),i=n.getHours(),a=n.getMinutes(),o=n.getSeconds(),r=n.getDate(),l=n.getMonth()+1,c=n.getFullYear();"12"===t.timeFormat&&(" AM",i>11&&" PM",i>12&&(i-=12),0===i&&(i=12)),i=this._addLeadingZero(i),a=this._addLeadingZero(a),o=this._addLeadingZero(o),l=this._addLeadingZero(l),r=this._addLeadingZero(r),t.showDate&&("american"===t.dateFormat?(s+="<span class='date-month'>"+l+"</span>",s+="<span class='date-divider'>-</span>",s+="<span class='date-day'>"+r+"</span>",s+="<span class='date-divider'>-</span>",s+="<span class='date-year'>"+c+"</span>"):(s+="<span class='date-day'>"+r+"</span>",s+="<span class='date-divider'>-</span>",s+="<span class='date-month'>"+l+"</span>",s+="<span class='date-divider'>-</span>",s+="<span class='date-year'>"+c+"</span>"),s+=t.divider),t.showTime&&(s+="<span class='clock-hour'>"+i+"</span>",s+="<span class='clock-divider'>:</span>",s+="<span class='clock-minute'>"+a+"</span>",s+="<span class='clock-divider'>:</span>",s+="<span class='clock-second'>"+o+"</span>"),e.html(s)},changeAttribute:function(e){}};y.plugin("clock",j);var K={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.toggle=null,this._setOptionsFromDOM(),this._create(),P.exec(this.options.onCollapseCreate,[this.element]),this},options:{collapsed:!1,toggleElement:!1,duration:METRO_ANIMATION_DURATION,onExpand:y.noop,onCollapse:y.noop,onCollapseCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t=this,n=this.element,s=this.options;e=!1!==s.toggleElement?b(s.toggleElement):n.siblings(".collapse-toggle").length>0?n.siblings(".collapse-toggle"):n.siblings("a:nth-child(1)"),!0!==s.collapsed&&!0!==n.attr("collapsed")||n.hide(0),e.on("click",function(e){"block"!==n.css("display")||n.hasClass("keep-open")?t._open(n):t._close(n),e.preventDefault(),e.stopPropagation()}),this.toggle=e},_close:function(e){!1===P.isJQueryObject(e)&&(e=b(e));var t=e.data("collapse").options;this.toggle.removeClass("active-toggle"),e.slideUp(t.duration,function(){e.trigger("onCollapse",null,e),e.data("collapsed",!0),e.addClass("collapsed"),P.exec(t.onCollapse,[e])})},_open:function(e){!1===P.isJQueryObject(e)&&(e=b(e));var t=e.data("collapse").options;this.toggle.addClass("active-toggle"),e.slideDown(t.duration,function(){e.trigger("onExpand",null,e),e.data("collapsed",!1),e.removeClass("collapsed"),P.exec(t.onExpand,[e])})},collapse:function(){this._close(this.element)},expand:function(){this._open(this.element)},isCollapsed:function(){return this.element.data("collapsed")},toggleState:function(){var e=this.element;!0===e.attr("collapsed")||!0===e.data("collapsed")?this.collapse():this.expand()},changeAttribute:function(e){switch(e){case"collapsed":case"data-collapsed":this.toggleState()}}};y.plugin("collapse",K);var V={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.timepoint=(new Date).getTime(),this.breakpoint=null,this.blinkInterval=null,this.tickInterval=null,this.zeroDaysFired=!1,this.zeroHoursFired=!1,this.zeroMinutesFired=!1,this.zeroSecondsFired=!1,this.locale=null,this._setOptionsFromDOM(),this._create(),this},options:{locale:METRO_LOCALE,days:0,hours:0,minutes:0,seconds:0,date:null,start:!0,clsCountdown:"",clsZero:"",clsAlarm:"",clsDays:"",clsHours:"",clsMinutes:"",clsSeconds:"",onCountdownCreate:y.noop,onAlarm:y.noop,onTick:y.noop,onZero:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.options;this.locale=void 0!==y.locales[e.locale]?y.locales[e.locale]:y.locales["en-US"],this._build()},_build:function(){var e,t,n,s=this,i=this.element,a=this.options,o=["days","hours","minutes","seconds"];i.addClass("countdown").addClass(a.clsCountdown),null!==a.date&&!1!==P.isDate(a.date)&&(this.timepoint=new Date(a.date).getTime()),this.breakpoint=this.timepoint,parseInt(a.days)>0&&(this.breakpoint+=864e5*parseInt(a.days)),parseInt(a.hours)>0&&(this.breakpoint+=36e5*parseInt(a.hours)),parseInt(a.minutes)>0&&(this.breakpoint+=6e4*parseInt(a.minutes)),parseInt(a.seconds)>0&&(this.breakpoint+=1e3*parseInt(a.seconds)),e=Math.round((s.breakpoint-s.timepoint)/864e5),t=Math.round((s.breakpoint-s.timepoint)/36e5),n=Math.round((s.breakpoint-s.timepoint)/6e4),b.each(o,function(){if(("days"!==this||0!==e)&&!("hours"===this&&0===e&&0===t||"minutes"===this&&0===e&&0===t&&0===n)){var o=b("<div>").addClass("part "+this).attr("data-label",s.locale.calendar.time[this]).appendTo(i);if("days"===this&&o.addClass(a.clsDays),"hours"===this&&o.addClass(a.clsHours),"minutes"===this&&o.addClass(a.clsMinutes),"seconds"===this&&o.addClass(a.clsSeconds),b("<div>").addClass("digit").appendTo(o),b("<div>").addClass("digit").appendTo(o),"days"===this&&e>=100)for(var r=0;r<String(e/100).length;r++)b("<div>").addClass("digit").appendTo(o)}}),i.find(".digit").html("0"),P.exec(this.options.onCountdownCreate,[this.element]),!0===this.options.start&&this.start()},blink:function(){this.element.toggleClass("blink")},tick:function(){var e,t,n,s,i,a=this.element,o=this.options,r=(new Date).getTime();if((e=Math.floor((this.breakpoint-r)/1e3))<=0)return this.stop(),""!==o.clsZero&&a.find(".part").removeClass(o.clsZero),a.addClass(o.clsAlarm),void P.exec(o.onAlarm,[r,a]);e-=86400*(t=Math.floor(e/86400)),this.draw("days",t),0===t&&(""!==o.clsDays&&a.find(".days").removeClass(o.clsDays),!1===this.zeroDaysFired&&(this.zeroDaysFired=!0,a.find(".days").addClass(o.clsZero),P.exec(o.onZero,["days",a]))),e-=3600*(n=Math.floor(e/3600)),this.draw("hours",n),0===t&&0===n&&(""!==o.clsHours&&a.find(".hours").removeClass(o.clsHours),!1===this.zeroHoursFired&&(this.zeroHoursFired=!0,a.find(".hours").addClass(o.clsZero),P.exec(o.onZero,["hours",a]))),e-=60*(s=Math.floor(e/60)),this.draw("minutes",s),0===t&&0===n&&0===s&&(""!==o.clsMinutes&&a.find(".minutes").removeClass(o.clsMinutes),!1===this.zeroMinutesFired&&(this.zeroMinutesFired=!0,a.find(".minutes").addClass(o.clsZero),P.exec(o.onZero,["minutes",a]))),i=Math.floor(e/1),this.draw("seconds",i),0===t&&0===n&&0===s&&0===i&&(""!==o.clsSeconds&&a.find(".seconds").removeClass(o.clsSeconds),!1===this.zeroSecondsFired&&(this.zeroSecondsFired=!0,a.find(".seconds").addClass(o.clsZero),P.exec(o.onZero,["seconds",a]))),P.exec(o.onTick,[{days:t,hours:n,minutes:s,seconds:i},a])},draw:function(e,t){for(var n,s=this.element,i=(this.options,String(t).length),a=s.find("."+e+" .digit").html("0").length,o=0;o<i;o++)n=Math.floor(t/Math.pow(10,o))%10,s.find("."+e+" .digit:eq("+(a-1)+")").html(n),a--},start:function(){var e=this;this.element.data("paused",!1),this.tick(),this.blinkInterval=setInterval(function(){e.blink()},500),this.tickInterval=setInterval(function(){e.tick()},1e3)},stop:function(){var e=this.element;this.options;e.find(".digit").html("0"),clearInterval(this.blinkInterval),clearInterval(this.tickInterval)},pause:function(){this.element.data("paused",!0),clearInterval(this.blinkInterval),clearInterval(this.tickInterval)},togglePlay:function(){!0===this.element.attr("data-pause")?this.pause():this.start()},isPaused:function(){return this.element.data("paused")},getTimepoint:function(e){return!0===e?new Date(this.timepoint):this.timepoint},getBreakpoint:function(e){return!0===e?new Date(this.breakpoint):this.breakpoint},getLeft:function(){var e=(new Date).getTime(),t=Math.floor(this.breakpoint-e);return{days:Math.round(t/864e5),hours:Math.round(t/36e5),minutes:Math.round(t/6e4),seconds:Math.round(t/1e3)}},changeAttribute:function(e){switch(e){case"data-pause":this.togglePlay()}}};y.plugin("countdown",V);var q={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.value=null,this.value_date=null,this.calendar=null,this._setOptionsFromDOM(),this._create(),P.exec(this.options.onDatepickerCreate,[this.element]),this},options:{locale:METRO_LOCALE,size:"100%",format:"%Y/%m/%d",clearButton:!1,calendarButtonIcon:"<sapn class='mif-calendar'></sapn>",clearButtonIcon:"<span class='mif-cross'></span>",copyInlineStyles:!1,clsPicker:"",clsInput:"",onDatepickerCreate:y.noop,onCalendarShow:y.noop,onCalendarHide:y.noop,onChange:y.noop,yearsBefore:100,yearsAfter:100,weekStart:0,outside:!0,clsCalendar:"",clsCalendarHeader:"",clsCalendarContent:"",clsCalendarFooter:"",clsCalendarMonths:"",clsCalendarYears:"",clsToday:"",clsSelected:"",clsExcluded:"",ripple:!1,rippleColor:"#cccccc",exclude:null,preset:null,minDate:null,maxDate:null,onDayClick:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t=this,n=this.element,s=this.options,i=n.prev(),a=n.parent(),o=b("<div>").addClass("input "+n[0].className+" datepicker"),r=b("<div>").addClass("button-group"),l=b("<div>").addClass("drop-shadow");this.value=n.val(),P.isDate(this.value)&&(this.value_date=new Date(this.value),this.value_date.setHours(0,0,0,0),n.val(this.value_date.format(s.format))),0===i.length?a.prepend(o):o.insertAfter(i),n.appendTo(o),r.appendTo(o),l.appendTo(o),l.calendar({pickerMode:!0,show:s.value,locale:s.locale,weekStart:s.weekStart,outside:s.outside,buttons:!1,clsCalendar:s.clsCalendar,clsCalendarHeader:s.clsCalendarHeader,clsCalendarContent:s.clsCalendarContent,clsCalendarFooter:s.clsCalendarFooter,clsCalendarMonths:s.clsCalendarMonths,clsCalendarYears:s.clsCalendarYears,clsToday:s.clsToday,clsSelected:s.clsSelected,clsExcluded:s.clsExcluded,ripple:s.ripple,rippleColor:s.rippleColor,exclude:s.exclude,minDate:s.minDate,maxDate:s.maxDate,onDayClick:function(e,i,a){var o=new Date(e[0]);t.value=o.format("%Y/%m/%d"),t.value_date=o,n.val(o.format(s.format,s.locale)),n.trigger("change"),l.removeClass("open open-up"),l.hide(),P.exec(s.onChange,[t.value,t.value_date,n]),P.exec(s.onDayClick,[e,i,a])}}),l.hide(),this.calendar=l,b("<button>").addClass("button").attr("tabindex",-1).attr("type","button").html(s.calendarButtonIcon).appendTo(r),o.on("click","button, input",function(e){P.isDate(t.value)&&!1===l.hasClass("open")&&!1===l.hasClass("open-up")&&(l.css({visibility:"hidden",display:"block"}),l.data("calendar").setPreset(t.value),l.data("calendar").setShow(t.value),l.data("calendar").setToday(t.value),l.css({visibility:"visible",display:"none"})),!1===l.hasClass("open")&&!1===l.hasClass("open-up")?(b(".datepicker .calendar").removeClass("open open-up").hide(),l.addClass("open"),!1===P.isOutsider(l)&&l.addClass("open-up"),l.show(),P.exec(s.onCalendarShow,[n,l])):(l.removeClass("open open-up"),l.hide(),P.exec(s.onCalendarHide,[n,l])),e.preventDefault(),e.stopPropagation()}),!0===s.clearButton&&((e=b("<button>").addClass("button").attr("tabindex",-1).attr("type","button").html(s.clearButtonIcon)).on("click",function(){n.val("").trigger("change")}),e.appendTo(r)),"rtl"===n.attr("dir")&&o.addClass("rtl"),String(s.size).indexOf("%")>-1?o.css({width:s.size}):o.css({width:parseInt(s.size)+"px"}),n[0].className="",n.attr("readonly",!0),!0===s.copyInlineStyles&&b.each(P.getInlineStyles(n),function(e,t){o.css(e,t)}),o.addClass(s.clsPicker),n.addClass(s.clsInput),n.on("blur",function(){o.removeClass("focused")}),n.on("focus",function(){o.addClass("focused")}),n.on("change",function(){P.exec(s.onChange,[t.value_date,t.value,n])})},val:function(e){var t=this.element,n=this.options;if(void 0===e)return this.value_date;!0===P.isDate(e)&&(this.value_date=new Date(e),this.value=this.value_date.format(n.format),t.val(this.value_date.format(n.format)),t.trigger("change"))},changeValue:function(){var e=this.element;this.options;this.val(e.attr("value"))},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(e){switch(e){case"value":this.changeValue();break;case"disabled":this.toggleState()}}};y.plugin("datepicker",q),b(document).on("click",function(e){b(".datepicker .calendar").removeClass("open open-up").hide()});var X={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.interval=null,this.overlay=null,this._setOptionsFromDOM(),this._create(),this},options:{locale:METRO_LOCALE,title:"",content:"",actions:{},actionsAlign:"right",defaultAction:!0,overlay:!0,overlayColor:"#000000",overlayAlpha:.5,overlayClickClose:!1,width:"480",height:"auto",closeAction:!0,clsDialog:"",clsTitle:"",clsContent:"",clsAction:"",clsDefaultAction:"",autoHide:0,removeOnClose:!1,show:!1,onShow:y.noop,onHide:y.noop,onOpen:y.noop,onClose:y.noop,onDialogCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.options;this.locale=void 0!==y.locales[e.locale]?y.locales[e.locale]:y.locales["en-US"],this._build()},_build:function(){var e,t=this,n=this.element,s=this.options,i=b("body");if(n.addClass("dialog"),void 0===n.attr("id")&&n.attr("id",P.uniqueId()),""!==s.title&&this.setTitle(s.title),""!==s.content&&this.setContent(s.content),!0===s.defaultAction||!1!==s.actions&&"object"==typeof s.actions&&P.objectLength(s.actions)>0){var a,o=n.find(".dialog-actions");0===o.length&&(o=b("<div>").addClass("dialog-actions").addClass("text-"+s.actionsAlign).appendTo(n)),!0===s.defaultAction&&0===P.objectLength(s.actions)&&0===n.find(".dialog-actions > *").length&&(a=b("<button>").addClass("button js-dialog-close").addClass(s.clsDefaultAction).html(this.locale.buttons.ok)).appendTo(o),b.each(s.actions,function(){var e=this;a=b("<button>").addClass("button").addClass(e.cls).html(e.caption),void 0!==e.onclick&&a.on("click",function(){P.exec(e.onclick,[n])}),a.appendTo(o)})}!0===s.overlay&&(e=this._overlay(),this.overlay=e),!0===s.closeAction&&n.on("click",".js-dialog-close",function(){t.close()}),n.css({width:s.width,height:s.height,visibility:"hidden",top:"100%",left:(b(window).width()-n.outerWidth())/2}),n.addClass(s.clsDialog),n.find(".dialog-title").addClass(s.clsTitle),n.find(".dialog-content").addClass(s.clsContent),n.find(".dialog-actions").addClass(s.clsAction),n.appendTo(i),s.show&&this.open(),P.exec(this.options.onDialogCreate,[this.element])},_overlay:function(){this.element;var e=this.options,t=b("<div>");return t.addClass("overlay"),"transparent"===e.overlayColor?t.addClass("transparent"):t.css({background:P.hex2rgba(e.overlayColor,e.overlayAlpha)}),t},hide:function(e){var t=this.element,n=this.options,s=0;n.onHide!==y.noop&&(s=300,P.exec(n.onHide,[t])),setTimeout(function(){t.css({visibility:"hidden"}),P.callback(e)},s)},show:function(e){var t=this.element,n=this.options;this.setPosition(),t.css({visibility:"visible"}),P.callback(e),P.exec(n.onShow,[t])},setPosition:function(){var e=this.element;e.css({top:(b(window).height()-e.outerHeight())/2,left:(b(window).width()-e.outerWidth())/2})},setContent:function(e){var t=this.element,n=(this.options,t.find(".dialog-content"));0===n.length&&(n=b("<div>").addClass("dialog-content")).appendTo(t),!P.isJQueryObject(e)&&P.isFunc(e)&&(e=P.exec(e)),P.isJQueryObject(e)?e.appendTo(n):n.html(e)},setTitle:function(e){var t=this.element,n=(this.options,t.find(".dialog-title"));0===n.length&&(n=b("<div>").addClass("dialog-title")).appendTo(t),n.html(e)},close:function(){var e=this.element,t=this.options;b("body").find(".overlay").remove(),this.hide(function(){e.data("open",!1),P.exec(t.onClose,[e]),!0===t.removeOnClose&&e.remove()})},open:function(){var e=this,t=this.element,n=this.options;!0===n.overlay&&(this.overlay.appendTo(b("body")),!0===n.overlayClickClose&&this.overlay.on("click",function(){e.close()})),this.show(function(){P.exec(n.onOpen,[t]),t.data("open",!0),parseInt(n.autoHide)>0&&setTimeout(function(){e.close()},parseInt(n.autoHide))})},toggle:function(){this.element.data("open")?this.close():this.open()},isOpen:function(){return!0===this.element.data("open")},changeAttribute:function(e){}};y.plugin("dialog",X),y.dialog={isDialog:function(e){return P.isMetroObject(e,"dialog")},open:function(e,t,n){if(!this.isDialog(e))return!1;var s=b(e).data("dialog");void 0!==n&&s.setTitle(n),void 0!==t&&s.setContent(t),s.open()},close:function(e){if(!this.isDialog(e))return!1;b(e).data("dialog").close()},toggle:function(e){if(!this.isDialog(e))return!1;b(e).data("dialog").toggle()},isOpen:function(){return!!this.isDialog(el)&&b(el).data("dialog").isOpen()},remove:function(e){if(!this.isDialog(e))return!1;var t=b(e).data("dialog");t.options.removeOnClose=!0,t.close()},create:function(e){var t;t=b("<div>").appendTo(b("body"));var n=b.extend({},{show:!0,closeAction:!0,removeOnClose:!0},void 0!==e?e:{});return t.dialog(n)}};var G={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.value=0,this.animation_change_interval=null,this._setOptionsFromDOM(),this._create(),P.exec(this.options.onDonutCreate,[this.element]),this},options:{size:100,radius:50,hole:.8,value:0,background:"#ffffff",color:"",stroke:"#d1d8e7",fill:"#49649f",fontSize:24,total:100,cap:"%",animate:0,onChange:y.noop,onDonutCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options,n="",s=t.radius*(1-(1-t.hole)/2),i=t.radius*(1-t.hole),a=2*Math.PI*s,o=(t.value,t.total,"rotate(-90 "+t.radius+","+t.radius+")"),r=s*t.hole*.6;e.addClass("donut"),e.css({width:t.size,height:t.size,background:t.background}),n+="<svg>",n+="   <circle class='donut-back' r='"+s+"px' cx='"+t.radius+"px' cy='"+t.radius+"px' transform='"+o+"' fill='none' stroke='"+t.stroke+"' stroke-width='"+i+"'/>",n+="   <circle class='donut-fill' r='"+s+"px' cx='"+t.radius+"px' cy='"+t.radius+"px' transform='"+o+"' fill='none' stroke='"+t.fill+"' stroke-width='"+i+"'/>",n+="   <text   class='donut-title' x='"+t.radius+"px' y='"+t.radius+"px' dy='"+r/3+"px' text-anchor='middle' fill='"+(""!==t.color?t.color:t.fill)+"' font-size='"+r+"px'>0"+t.cap+"</text>",n+="</svg>",e.html(n),this.val(t.value)},_setValue:function(e){var t=this.element,n=this.options,s=t.find(".donut-fill"),i=t.find(".donut-title"),a=n.radius*(1-(1-n.hole)/2),o=2*Math.PI*a,r=1e3*e/n.total/10+n.cap,l=e*o/n.total+" "+o;s.attr("stroke-dasharray",l),i.html(r)},val:function(e){var t=this,n=this.element,s=this.options;if(void 0===e)return this.value;if(parseInt(e)<0||parseInt(e)>s.total)return!1;if(s.animate>0&&!document.hidden){var i=e>t.value,a=t.value+(i?-1:1);clearInterval(t.animation_change_interval),this.animation_change_interval=setInterval(function(){i?(t._setValue(++a),a>=e&&clearInterval(t.animation_change_interval)):(t._setValue(--a),a<=e&&clearInterval(t.animation_change_interval))},s.animate)}else clearInterval(t.animation_change_interval),this._setValue(e);this.value=e,P.exec(s.onChange,[this.value,n])},changeValue:function(){this.val(this.element.attr("data-value"))},changeAttribute:function(e){switch(e){case"data-value":this.changeValue()}}};y.plugin("donut",G);var $={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.drag=!1,this.move=!1,this.backup={cursor:"default",zIndex:"0"},this._setOptionsFromDOM(),this._create(),P.exec(this.options.onDraggableCreate,[this.element]),this},options:{dragElement:"self",dragArea:"parent",onCanDrag:y.noop_true,onDragStart:y.noop,onDragStop:y.noop,onDragMove:y.noop,onDraggableCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t,n,s=this,i=this.element,a=this.options,o="self"!==a.dragElement?i.find(a.dragElement):i;o[0].ondragstart=function(){return!1},o.on(y.eventStart,function(o){if(!1!==i.data("canDrag")&&!0===P.exec(a.onCanDrag,[i])&&(!1!==T||1===o.which)){s.drag=!0,s.backup.cursor=i.css("cursor"),s.backup.zIndex=i.css("z-index"),i.addClass("draggable"),"document"!==a.dragArea&&"window"!==a.dragArea||(a.dragArea="body"),e="parent"===a.dragArea?i.parent():b(a.dragArea),t={left:e.offset().left,top:e.offset().top},n=P.pageXY(o);var r=i.outerHeight(),l=i.outerWidth(),c=i.offset().top+r-P.pageXY(o).y,d=i.offset().left+l-P.pageXY(o).x;P.exec(a.onDragStart,[n,i]),b(document).on(y.eventMove,function(o){var h,u;if(!1!==s.drag){s.move=!0,h=P.pageXY(o).x-t.left;var p=(u=P.pageXY(o).y-t.top)>0?u+c-r:0,f=h>0?h+d-l:0,m=e.innerHeight()+e.scrollTop()-i.outerHeight(),v=e.innerWidth()+e.scrollLeft()-i.outerWidth();return p>=0&&p<=m&&(n.y=p,i.offset({top:p+t.top})),f>=0&&f<=v&&(n.x=f,i.offset({left:f+t.left})),P.exec(a.onDragMove,[n,i]),!1}})}}),o.on(y.eventStop,function(e){i.css({cursor:s.backup.cursor,zIndex:s.backup.zIndex}).removeClass("draggable"),s.drag=!1,s.move=!1,n=P.pageXY(e),b(document).off(y.eventMove),P.exec(a.onDragStop,[n,i])})},off:function(){this.element.data("canDrag",!1)},on:function(){this.element.data("canDrag",!0)},changeAttribute:function(e){}};y.plugin("draggable",$);var Q={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._toggle=null,this.displayOrigin=null,this._setOptionsFromDOM(),this._create(),P.exec(this.options.onDropdownCreate,[this.element]),this},options:{effect:"slide",toggleElement:null,noClose:!1,duration:METRO_ANIMATION_DURATION,onDrop:y.noop,onUp:y.noop,onDropdownCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t=this,n=this.element,s=this.options,i=n.parent();e=!1!==s.toggleElement?b(s.toggleElement):n.siblings(".dropdown-toggle").length>0?n.siblings(".dropdown-toggle"):n.siblings("a:nth-child(1)"),this.displayOrigin=n.css("display"),this.element.css("display","none"),e.on("click",function(e){if(i.siblings(i[0].tagName).removeClass("active-container"),b(".active-container").removeClass("active-container"),"none"===n.css("display")||n.hasClass("keep-open")){if(b("[data-role=dropdown]").each(function(e,s){n.parents("[data-role=dropdown]").is(s)||b(s).hasClass("keep-open")||"none"===b(s).css("display")||t._close(s)}),n.hasClass("horizontal")){n.css({visibility:"hidden",display:"block"});var s=b(n.children("li")[0]).outerWidth();n.css({visibility:"visible",display:"none"});var a=n.children("li").length*s+(n.children("li").length-1);n.css("width",a)}t._open(n),i.addClass("active-container")}else t._close(n);e.preventDefault(),e.stopPropagation()}),this._toggle=e,!0===s.noClose&&n.addClass("keep-open").on("click",function(e){e.stopPropagation()}),b(n).find("li.disabled a").on("click",function(e){e.preventDefault()})},_close:function(e){!1===P.isJQueryObject(e)&&(e=b(e));var t=e.data("dropdown"),n=t._toggle,s=t.options,i="slide"===s.effect?"slideUp":"fadeOut";n.removeClass("active-toggle").removeClass("active-control"),e[i](s.duration,function(){e.trigger("onClose",null,e)}),P.exec(s.onUp,[e])},_open:function(e){!1===P.isJQueryObject(e)&&(e=b(e));var t=e.data("dropdown"),n=t._toggle,s=t.options,i="slide"===s.effect?"slideDown":"fadeIn";n.addClass("active-toggle").addClass("active-control"),e[i](s.duration,function(){e.trigger("onOpen",null,e)}),P.exec(s.onDrop,[e])},close:function(){this._close(this.element)},open:function(){this._open(this.element)},changeAttribute:function(e){}};b(document).on("click",function(e){b("[data-role*=dropdown]").each(function(){var e=b(this);"block"===e.css("display")&&!1===e.hasClass("keep-open")&&e.data("dropdown").close()})}),y.plugin("dropdown",Q);var Z={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onFileCreate,[this.element]),this},options:{copyInlineStyles:!0,prepend:"",caption:"Choose file",disabled:!1,onSelect:y.noop,onFileCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t=this.element,n=this.options,s=t.prev(),i=t.parent(),a=b("<div>").addClass("file "+t[0].className),o=b("<span>").addClass("caption");if(0===s.length?i.prepend(a):a.insertAfter(s),t.appendTo(a),o.insertBefore(t),t.on("change",function(){var e=b(this).val();""!==e&&(e=e.replace(/.+[\\\/]/,""),o.html(e),o.attr("title",e),P.exec(n.onSelect,[e,t]))}),(e=b("<button>").addClass("button").attr("tabindex",-1).attr("type","button").html(n.caption)).appendTo(a),e.on("click",function(){t.trigger("click")}),"rtl"===t.attr("dir")&&a.addClass("rtl"),t[0].className="",""!==n.prepend&&b(P.isTag(n.prepend)?n.prepend:"<span>"+n.prepend+"</span>").addClass("prepend").addClass(n.clsPrepend).appendTo(a),!0===n.copyInlineStyles)for(var r=0,l=t[0].style.length;r<l;r++)a.css(t[0].style[r],t.css(t[0].style[r]));!0===n.disabled||t.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},toggleDir:function(){"rtl"===this.element.attr("dir")?this.element.parent().addClass("rtl"):this.element.parent().removeClass("rtl")},changeAttribute:function(e){switch(e){case"disabled":this.toggleState();break;case"dir":this.toggleDir()}}};y.plugin("file",Z);var ee={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onGravatarCreate,[this.element]),this},options:{email:"",size:80,default:"404",onGravatarCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element;this.options,"IMG"===e[0].tagName||b("<img>").appendTo(e);this.get()},getImage:function(e,t,n,s){var i=b("<img>");return i.attr("src",this.getImageSrc(e,t)),!0===s?i:i[0]},getImageSrc:function(e,t,n){return void 0===e||""===e.trim()?"":(t=t||80,n=P.encodeURI(n)||"404","//www.gravatar.com/avatar/"+P.md5(e.toLowerCase().trim())+"?size="+t+"&d="+n)},get:function(){var e=this.element,t=this.options,n="IMG"===e[0].tagName?e:e.find("img");if(0!==n.length)return n.attr("src",this.getImageSrc(t.email,t.size,t.default)),this},resize:function(e){this.options.size=void 0!==e?e:this.element.attr("data-size"),console.log(this.options.size),this.get()},email:function(e){this.options.email=void 0!==e?e:this.element.attr("data-email"),this.get()},changeAttribute:function(e){switch(console.log(e),e){case"data-size":this.resize();break;case"data-email":this.email()}}};y.plugin("gravatar",ee);var te={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.hint=null,this.hint_size={width:0,height:0},this._setOptionsFromDOM(),this._create(),P.exec(this.options.onHintCreate,[this.element]),this},options:{hintHide:5e3,clsHint:"",hintText:"",hintPosition:METRO_POSITION.TOP,hintOffset:4,onHintCreate:y.noop,onHintShow:y.noop,onHintHide:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this,t=this.element,n=this.options;t.on(y.eventEnter,function(){e.createHint(),n.hintHide>0&&setTimeout(function(){e.removeHint()},n.hintHide)}),t.on(y.eventLeave,function(){e.removeHint()}),b(window).on("scroll",function(){null!==e.hint&&e.setPosition()})},createHint:function(){var e=this.elem,t=this.element,n=this.options,s=b("<div>").addClass("hint").addClass(n.clsHint).html(n.hintText);if(this.hint=s,this.hint_size=P.hiddenElementSize(s),b(".hint").remove(),"TD"===e.tagName||"TH"===e.tagName){var i=b("<div/>").css("display","inline-block").html(t.html());t.html(i),t=i}this.setPosition(),s.appendTo(b("body")),P.exec(n.onHintShow,[s,t])},setPosition:function(){var e=this.hint,t=this.hint_size,n=this.options,s=this.element;n.hintPosition===METRO_POSITION.BOTTOM?(e.addClass("bottom"),e.css({top:s.offset().top-b(window).scrollTop()+s.outerHeight()+n.hintOffset,left:s.offset().left+s.outerWidth()/2-t.width/2-b(window).scrollLeft()})):n.hintPosition===METRO_POSITION.RIGHT?(e.addClass("right"),e.css({top:s.offset().top+s.outerHeight()/2-t.height/2-b(window).scrollTop(),left:s.offset().left+s.outerWidth()-b(window).scrollLeft()+n.hintOffset})):n.hintPosition===METRO_POSITION.LEFT?(e.addClass("left"),e.css({top:s.offset().top+s.outerHeight()/2-t.height/2-b(window).scrollTop(),left:s.offset().left-t.width-b(window).scrollLeft()-n.hintOffset})):(e.addClass("top"),e.css({top:s.offset().top-b(window).scrollTop()-t.height-n.hintOffset,left:s.offset().left+s.outerWidth()/2-t.width/2-b(window).scrollLeft()}))},removeHint:function(){var e=this.hint,t=this.element,n=this.options,s=n.onHintHide===y.noop?0:300;null!==e&&(P.exec(n.onHintHide,[e,t]),setTimeout(function(){e.hide(0,function(){e.remove()})},s))},changeText:function(){this.options.hintText=this.element.attr("data-hint-text")},changeAttribute:function(e){switch(e){case"data-hint-text":this.changeText()}}};y.plugin("hint",te);var ne={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onInputCreate,[this.element]),this},options:{clsElement:"",clsInput:"",clsPrepend:"",clsClearButton:"",clsRevealButton:"",size:"default",prepend:"",copyInlineStyles:!0,clearButton:!0,revealButton:!0,clearButtonIcon:"<span class='default-icon-cross'></span>",revealButtonIcon:"<span class='default-icon-eye'></span>",customButtons:[],disabled:!1,onInputCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t,n=this.element,s=this.options,i=n.prev(),a=n.parent(),o=b("<div>").addClass("input "+n[0].className),r=b("<div>").addClass("button-group");if(void 0===n.attr("type")&&n.attr("type","text"),0===i.length?a.prepend(o):o.insertAfter(i),n.appendTo(o),r.appendTo(o),!1!==s.clearButton&&((e=b("<button>").addClass("button").addClass(s.clsClearButton).attr("tabindex",-1).attr("type","button").html(s.clearButtonIcon)).on("click",function(){n.val("").trigger("change").trigger("keyup").focus()}),e.appendTo(r)),"password"===n.attr("type")&&!1!==s.revealButton&&((t=b("<button>").addClass("button").addClass(s.clsRevealButton).attr("tabindex",-1).attr("type","button").html(s.revealButtonIcon)).on("mousedown",function(){n.attr("type","text")}).on("mouseup",function(){n.attr("type","password").focus()}),t.appendTo(r)),""!==s.prepend&&b(P.isTag(s.prepend)?s.prepend:"<span>"+s.prepend+"</span>").addClass("prepend").addClass(s.clsPrepend).appendTo(o),"string"==typeof s.customButtons&&(s.customButtons=P.isObject(s.customButtons)),"object"==typeof s.customButtons&&P.objectLength(s.customButtons)>0&&b.each(s.customButtons,function(){var e=this,t=b("<button>").addClass("button custom-input-button").addClass(e.cls).attr("tabindex",-1).attr("type","button").html(e.html);t.on("click",function(){P.exec(e.onclick,[t,n])}),t.appendTo(r)}),"rtl"===n.attr("dir")&&o.addClass("rtl").attr("dir","rtl"),n[0].className="",!0===s.copyInlineStyles)for(var l=0,c=n[0].style.length;l<c;l++)o.css(n[0].style[l],n.css(n[0].style[l]));o.addClass(s.clsElement),n.addClass(s.clsInput),"default"!==s.size&&o.css({width:s.size}),n.on("blur",function(){o.removeClass("focused")}),n.on("focus",function(){o.addClass("focused")}),!0===s.disabled||n.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(e){switch(e){case"disabled":this.toggleState()}}};y.plugin("input",ne);var se={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.value="",this.positions=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],this._setOptionsFromDOM(),this.keys=P.strToArray(this.options.keys,","),this.keys_to_work=this.keys,this._create(),this},options:{keySize:32,keys:"1, 2, 3, 4, 5, 6, 7, 8, 9, 0",copyInlineStyles:!1,target:null,length:0,shuffle:!1,shuffleCount:3,position:METRO_POSITION.BOTTOM_LEFT,dynamicPosition:!1,serviceButtons:!0,showValue:!0,open:!1,sizeAsKeys:!1,clsKeypad:"",clsInput:"",clsKeys:"",clsKey:"",clsServiceKey:"",clsBackspace:"",clsClear:"",onChange:y.noop,onClear:y.noop,onBackspace:y.noop,onShuffle:y.noop,onKey:y.noop,onKeypadCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){this._createKeypad(),!0===this.options.shuffle&&this.shuffle(),this._createKeys(),this._createEvents(),P.exec(this.options.onKeypadCreate,[this.element])},_createKeypad:function(){var e,t,n=this.element,s=this.options,i=n.prev(),a=n.parent();if((e=a.hasClass("input")?a:b("<div>").addClass(n[0].className)).addClass("keypad"),"static"!==e.css("position")&&""!==e.css("position")||e.css({position:"relative"}),void 0===n.attr("type")&&n.attr("type","text"),0===i.length?a.prepend(e):e.insertAfter(i),n.attr("readonly",!0),n.appendTo(e),(t=b("<div>").addClass("keys").addClass(s.clsKeys)).appendTo(e),this._setKeysPosition(),!0===s.open&&t.addClass("open keep-open"),n[0].className="",!0===s.copyInlineStyles)for(var o=0,r=n[0].style.length;o<r;o++)e.css(n[0].style[o],n.css(n[0].style[o]));n.addClass(s.clsInput),e.addClass(s.clsKeypad),n.on("blur",function(){e.removeClass("focused")}),n.on("focus",function(){e.addClass("focused")}),!0===s.disabled||n.is(":disabled")?this.disable():this.enable()},_setKeysPosition:function(){var e=this.element,t=this.options;e.parent().find(".keys").removeClass(this.positions.join(" ")).addClass(t.position)},_createKeys:function(){var e,t=this.element,n=this.options,s=t.parent(),i=Math.round(Math.sqrt(this.keys.length+2)),a=i*n.keySize+4*i,o=s.find(".keys");if(o.html(""),b.each(this.keys_to_work,function(){(e=b("<span>").addClass("key").addClass(n.clsKey).html(this)).data("key",this),e.css({width:n.keySize,height:n.keySize,lineHeight:n.keySize-4+"px"}).appendTo(o)}),!0===n.serviceButtons){var r=["&larr;","&times;"];b.each(r,function(){e=b("<span>").addClass("key service-key").addClass(n.clsKey).addClass(n.clsServiceKey).html(this),"&larr;"===this&&e.addClass(n.clsBackspace),"&times;"===this&&e.addClass(n.clsClear),e.data("key",this),e.css({width:n.keySize,height:n.keySize,lineHeight:n.keySize-4+"px"}).appendTo(o)})}o.width(a),!0===n.sizeAsKeys&&-1!==["top-left","top","top-right","bottom-left","bottom","bottom-right"].indexOf(n.position)&&s.outerWidth(o.outerWidth())},_createEvents:function(){var e=this,t=this.element,n=this.options,s=t.parent(),i=s.find(".keys");s.on("click",".keys",function(e){e.preventDefault(),e.stopPropagation()}),s.on("click",function(e){!0!==n.open&&(!0===i.hasClass("open")?i.removeClass("open"):i.addClass("open"),e.preventDefault(),e.stopPropagation())}),s.on("click",".key",function(s){var i=b(this);if("&larr;"!==i.data("key")&&"&times;"!==i.data("key")){if(n.length>0&&String(e.value).length===n.length)return!1;e.value=e.value+""+i.data("key"),!0===n.shuffle&&(e.shuffle(),e._createKeys()),!0===n.dynamicPosition&&(n.position=e.positions[P.random(0,e.positions.length-1)],e._setKeysPosition()),P.exec(n.onKey,[i.data("key"),e.value,t])}else"&times;"===i.data("key")&&(e.value="",P.exec(n.onClear,[t])),"&larr;"===i.data("key")&&(e.value=e.value.substring(0,e.value.length-1),P.exec(n.onBackspace,[e.value,t]));!0===n.showValue&&("INPUT"===t[0].tagName?t.val(e.value):t.text(e.value)),t.trigger("change"),P.exec(n.onChange,[e.value,t]),s.preventDefault(),s.stopPropagation()}),null!==n.target&&t.on("change",function(){var t=b(n.target);0!==t.length&&("INPUT"===t[0].tagName?t.val(e.value):t.text(e.value))})},shuffle:function(){for(var e=0;e<this.options.shuffleCount;e++)this.keys_to_work=this.keys_to_work.shuffle();P.exec(this.options.onShuffle,[this.keys_to_work,this.keys,this.element])},shuffleKeys:function(e){void 0===e&&(e=this.options.shuffleCount);for(var t=0;t<e;t++)this.keys_to_work=this.keys_to_work.shuffle();this._createKeys()},val:function(e){if(void 0===e)return this.value;this.value=e,"INPUT"===this.element[0].tagName?this.element.val(e):this.element.text(e)},open:function(){this.element.parent().find(".keys").addClass("open")},close:function(){this.element.parent().find(".keys").removeClass("open")},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},setPosition:function(e){var t=void 0!==e?e:this.element.attr("data-position");-1!==this.positions.indexOf(t)&&(this.options.position=t,this._setKeysPosition())},changeAttribute:function(e){switch(e){case"disabled":this.toggleState();break;case"data-position":this.setPosition()}}};y.plugin("keypad",se),b(document).on("click",function(){var e=b(".keypad .keys");b.each(e,function(){b(this).hasClass("keep-open")||b(this).removeClass("open")})});var ie={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.views=["list","content","icons","icons-medium","icons-large","tiles","table"],this._setOptionsFromDOM(),this._create(),this},options:{selectable:!1,effect:"slide",duration:100,view:METRO_LISTVIEW_MODE.LIST,selectCurrent:!0,structure:{},onNodeInsert:y.noop,onNodeDelete:y.noop,onNodeClean:y.noop,onCollapseNode:y.noop,onExpandNode:y.noop,onGroupNodeClick:y.noop,onNodeClick:y.noop,onListviewCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;this._createView(),this._createEvents(),P.exec(t.onListviewCreate,[e])},_createIcon:function(e){var t,n;return n=P.isTag(e)?b(e):b("<img>").attr("src",e),(t=b("<span>").addClass("icon")).html(n),t},_createCaption:function(e){return b("<div>").addClass("caption").html(e)},_createContent:function(e){return b("<div>").addClass("content").html(e)},_createToggle:function(){return b("<span>").addClass("node-toggle")},_createNode:function(e){var t,n=this,s=(this.element,this.options);if(t=b("<li>"),void 0!==e.caption||void 0!==e.content){var i=b("<div>").addClass("data");t.prepend(i),void 0!==t.data("caption")&&e.append(n._createCaption(t.data("caption"))),void 0!==t.data("content")&&e.append(n._createContent(t.data("content")))}return void 0!==e.icon&&t.prepend(this._createIcon(e.icon)),P.objectLength(s.structure>0)&&b.each(s.structure,function(n,s){void 0!==e[n]&&b("<div>").addClass("node-data item-data-"+n).addClass(e[s]).html(e[n]).appendTo(t)}),t},_createView:function(){var e=this,t=this.element,n=this.options,s=t.find("li"),i=P.objectLength(n.structure);t.addClass("listview"),t.find("ul").addClass("listview"),b.each(s,function(){var t=b(this);if(void 0!==t.data("caption")||void 0!==t.data("content")){var s=b("<div>").addClass("data");t.prepend(s),void 0!==t.data("caption")&&s.append(e._createCaption(t.data("caption"))),void 0!==t.data("content")&&s.append(e._createContent(t.data("content")))}if(void 0!==t.data("icon")&&t.prepend(e._createIcon(t.data("icon"))),t.children("ul").length>0?(t.addClass("node-group"),t.append(e._createToggle()),!0!==t.data("collapsed")&&t.addClass("expanded")):t.addClass("node"),t.hasClass("node")){var a=b("<input data-role='checkbox'>");a.data("node",t),t.prepend(a)}i>0&&b.each(n.structure,function(e,n){void 0!==t.data(e)&&b("<div>").addClass("node-data item-data-"+e).addClass(t.data(e)).html(t.data(e)).appendTo(t)})}),this.toggleSelectable(),this.view(n.view)},_createEvents:function(){var e=this,t=this.element,n=this.options;t.on("click",".node",function(){var e=b(this);t.find(".node").removeClass("current"),e.toggleClass("current"),!0===n.selectCurrent&&(t.find(".node").removeClass("current-select"),e.toggleClass("current-select")),P.exec(n.onNodeClick,[e,t])}),t.on("click",".node-toggle",function(){var t=b(this).closest("li");e.toggleNode(t)}),t.on("click",".node-group > .data > .caption",function(){var e=b(this).closest("li");t.find(".node-group").removeClass("current-group"),e.addClass("current-group"),P.exec(n.onGroupNodeClick,[e,t])}),t.on("dblclick",".node-group > .data > .caption",function(){var t=b(this).closest("li");e.toggleNode(t)})},view:function(e){var t=this.element,n=this.options,s=this.views;if(void 0===e)return n.view;-1!==s.indexOf(e)&&(n.view=e,b.each(this.views,function(){t.removeClass("view-"+this),t.find("ul").removeClass("view-"+this)}),t.addClass("view-"+n.view),t.find("ul").addClass("view-"+n.view))},toggleNode:function(e){var t,n=this.element,s=this.options;e.hasClass("node-group")&&(e.toggleClass("expanded"),"slide"===s.effect?(t=!0!==e.hasClass("expanded")?"slideUp":"slideDown",P.exec(s.onCollapseNode,[e,n])):(t=!0!==e.hasClass("expanded")?"fadeOut":"fadeIn",P.exec(s.onExpandNode,[e,n])),e.children("ul")[t](s.duration))},toggleSelectable:function(){var e=this.element,t=!0===this.options.selectable?"addClass":"removeClass";e[t]("selectable"),e.find("ul")[t]("selectable")},add:function(e,t){var n,s,i=this.element,a=this.options;if(null===e)n=i;else{if(!e.hasClass("node-group"))return;0===(n=e.children("ul")).length&&(n=b("<ul>").addClass("listview").addClass("view-"+a.view).appendTo(e),this._createToggle().appendTo(e),e.addClass("expanded"))}(s=this._createNode(t)).addClass("node").appendTo(n);var o=b("<input>");return o.data("node",s),s.prepend(o),o.checkbox(),P.exec(a.onNodeInsert,[s,i]),s},addGroup:function(e){var t,n=this.element,s=this.options;return delete e.icon,(t=this._createNode(e)).addClass("node-group").appendTo(n),t.append(this._createToggle()),t.addClass("expanded"),t.append(b("<ul>").addClass("listview").addClass("view-"+s.view)),P.exec(s.onNodeInsert,[t,n]),t},insertBefore:function(e,t){var n=this.element,s=this.options,i=this._createNode(t);return i.insertBefore(e),P.exec(s.onNodeInsert,[i,n]),i},insertAfter:function(e,t){var n=this.element,s=this.options,i=this._createNode(t);return i.insertAfter(e),P.exec(s.onNodeInsert,[i,n]),i},del:function(e){var t=this.element,n=this.options,s=e.closest("ul"),i=s.closest("li");e.remove(),0!==s.children().length||s.is(t)||(s.remove(),i.removeClass("expanded"),i.children(".node-toggle").remove()),P.exec(n.onNodeDelete,[e,t])},clean:function(e){var t=this.element,n=this.options;e.children("ul").remove(),e.removeClass("expanded"),e.children(".node-toggle").remove(),P.exec(n.onNodeClean,[e,t])},changeView:function(){var e=this.element,t=this.options,n="view-"+e.attr("data-view");-1!==this.views.indexOf(n)&&(t.view=n,this.view())},changeSelectable:function(){var e=this.element;this.options.selectable=!0===b.parseJSON(e.attr("data-selectable")),this.toggleSelectable()},changeAttribute:function(e){switch(e){case"data-view":this.changeView();break;case"data-selectable":this.changeSelectable()}}};y.plugin("listview",ie);var ae={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.pages=[],this.currentIndex=0,this.isAnimate=!1,this._setOptionsFromDOM(),this._create(),this},options:{effect:"slide",effectFunc:"linear",duration:METRO_ANIMATION_DURATION,controlPrev:"<span class='default-icon-left-arrow'></span>",controlNext:"<span class='default-icon-right-arrow'></span>",controlTitle:"Master, page $1 of $2",backgroundImage:"",clsMaster:"",clsControls:"",clsControlPrev:"",clsControlNext:"",clsControlTitle:"",clsPages:"",clsPage:"",onBeforePage:y.noop_true,onBeforeNext:y.noop_true,onBeforePrev:y.noop_true,onMasterCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;e.addClass("master").addClass(t.clsMaster),e.css({backgroundImage:"url("+t.backgroundImage+")"}),this._createControls(),this._createPages(),this._createEvents(),P.exec(this.options.onMasterCreate,[this.element])},_createControls:function(){var e,t,n=this.element,s=this.options,i=["top","bottom"],a=n.find(".page");t=String(s.controlTitle).replace("$1","1"),t=String(t).replace("$2",a.length),b.each(i,function(){e=b("<div>").addClass("controls controls-"+this).addClass(s.clsControls).appendTo(n),b("<span>").addClass("prev").addClass(s.clsControlPrev).html(s.controlPrev).appendTo(e),b("<span>").addClass("next").addClass(s.clsControlNext).html(s.controlNext).appendTo(e),b("<span>").addClass("title").addClass(s.clsControlTitle).html(t).appendTo(e)}),this._enableControl("prev",!1)},_enableControl:function(e,t){var n=this.element.find(".controls ."+e);!0===t?n.removeClass("disabled"):n.addClass("disabled")},_setTitle:function(){var e=this.element.find(".controls .title"),t=this.options.controlTitle.replace("$1",this.currentIndex+1);t=t.replace("$2",String(this.pages.length)),e.html(t)},_createPages:function(){var e=this,t=this.element,n=this.options,s=t.find(".pages"),i=t.find(".page");0===s.length&&(s=b("<div>").addClass("pages").appendTo(t)),s.addClass(n.clsPages),b.each(i,function(){var s=b(this);void 0!==s.data("cover")?t.css({backgroundImage:"url("+s.data("cover")+")"}):t.css({backgroundImage:"url("+n.backgroundImage+")"}),s.css({left:"100%"}),s.addClass(n.clsPage).hide(0),e.pages.push(s)}),i.appendTo(s),this.currentIndex=0,void 0!==this.pages[this.currentIndex]&&(void 0!==this.pages[this.currentIndex].data("cover")&&t.css({backgroundImage:"url("+this.pages[this.currentIndex].data("cover")+")"}),this.pages[this.currentIndex].css("left","0").show(0),setTimeout(function(){s.css({height:e.pages[0].outerHeight()+2})},0))},_createEvents:function(){var e=this,t=this.element,n=this.options;t.on("click",".controls .prev",function(){!0!==e.isAnimate&&!0===P.exec(n.onBeforePrev,[e.currentIndex,e.pages[e.currentIndex],t])&&!0===P.exec(n.onBeforePage,["prev",e.currentIndex,e.pages[e.currentIndex],t])&&e.prev()}),t.on("click",".controls .next",function(){!0!==e.isAnimate&&!0===P.exec(n.onBeforeNext,[e.currentIndex,e.pages[e.currentIndex],t])&&!0===P.exec(n.onBeforePage,["next",e.currentIndex,e.pages[e.currentIndex],t])&&e.next()})},_slideToPage:function(e){var t,n,s;void 0!==this.pages[e]&&this.currentIndex!==e&&(s=e>this.currentIndex?"next":"prev",t=this.pages[this.currentIndex],n=this.pages[e],this.currentIndex=e,this._effect(t,n,s))},_slideTo:function(e){var t,n;if(void 0!==e){if(t=this.pages[this.currentIndex],"next"===e){if(this.currentIndex+1>=this.pages.length)return;this.currentIndex++}else{if(this.currentIndex-1<0)return;this.currentIndex--}n=this.pages[this.currentIndex],this._effect(t,n,e)}},_effect:function(e,t,n){function s(){void 0!==t.data("cover")?a.css({backgroundImage:"url("+t.data("cover")+")"}):a.css({backgroundImage:"url("+o.backgroundImage+")"}),l.css("overflow","initial"),i.isAnimate=!1}var i=this,a=this.element,o=this.options,r=a.width(),l=a.find(".pages");switch(this._setTitle(),this.currentIndex===this.pages.length-1?this._enableControl("next",!1):this._enableControl("next",!0),0===this.currentIndex?this._enableControl("prev",!1):this._enableControl("prev",!0),this.isAnimate=!0,setTimeout(function(){l.animate({height:t.outerHeight(!0)+2})},0),l.css("overflow","hidden"),o.effect){case"fade":e.fadeOut(o.duration),t.hide(0).css("left",0).fadeIn(o.duration,function(){s()});break;case"switch":e.hide(0),t.hide(0).css("left",0).show(0,function(){s()});break;default:e.stop(!0,!0).animate({left:"next"===n?-r:r},o.duration,o.effectFunc,function(){e.hide(0)}),t.stop(!0,!0).css({left:"next"===n?r:-r}).show(0).animate({left:0},o.duration,o.effectFunc,function(){s()})}},toPage:function(e){this._slideToPage(e)},next:function(){this._slideTo("next")},prev:function(){this._slideTo("prev")},changeEffect:function(){this.options.effect=this.element.attr("data-effect")},changeEffectFunc:function(){this.options.effectFunc=this.element.attr("data-effect-func")},changeEffectDuration:function(){this.options.duration=this.element.attr("data-duration")},changeAttribute:function(e){switch(e){case"data-effect":this.changeEffect();break;case"data-effect-func":this.changeEffectFunc();break;case"data-duration":this.changeEffectDuration()}}};y.plugin("master",ae);var oe={options:{container:null,width:220,timeout:METRO_TIMEOUT,duration:METRO_ANIMATION_DURATION,distance:"100vh",animation:"swing"},notifies:[],setup:function(e){var t,n=b("body");return this.options=b.extend({},this.options,e),null===this.options.container&&(t=b("<div>").addClass("notify-container"),n.prepend(t),this.options.container=t),this},reset:function(){var e={width:220,timeout:METRO_TIMEOUT,duration:METRO_ANIMATION_DURATION,distance:"100vh",animation:"swing"};this.options=b.extend({},this.options,e)},create:function(e,t,n){var s,i,a=this,o=this.options;if(void 0===e||""===e.trim())return!1;(s=b("<div>").addClass("notify")).css({width:o.width}),t&&(i=b("<div>").addClass("notify-title").html(t),s.prepend(i)),b("<div>").addClass("notify-message").html(e).appendTo(s),void 0!==n&&(void 0!==n.cls&&s.addClass(n.cls),void 0!==n.width&&s.css({width:n.width})),s.on("click",function(){a.kill(b(this))}),s.hide(function(){s.appendTo(o.container),s.css({marginTop:o.distance}).fadeIn(100,function(){s.animate({marginTop:".25rem"},o.duration,o.animation,function(){void 0!==n&&!0===n.keepOpen||setTimeout(function(){a.kill(s,void 0!==n&&void 0!==n.onClose?n.onClose:void 0)},o.timeout),void 0!==n&&void 0!==n.onShow&&P.callback(n.onShow)})})})},kill:function(e,t){e.fadeOut("slow",function(){e.remove(),P.callback(t)})},killAll:function(){var e=this,t=b(".notify");b.each(t,function(){e.kill(b(this))})}};b.Metro.notify=oe.setup();var re={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),this},options:{titleCaption:"",titleIcon:"",collapsible:!1,collapsed:!1,collapseDuration:METRO_ANIMATION_DURATION,width:"auto",height:"auto",draggable:!1,clsPanel:"",clsTitle:"",clsTitleCaption:"",clsTitleIcon:"",clsContent:"",clsCollapseToggle:"",onCollapse:y.noop,onExpand:y.noop,onDragStart:y.noop,onDragStop:y.noop,onDragMove:y.noop,onPanelCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options,n=e.prev(),s=e.parent(),i=b("<div>").addClass("panel").addClass(t.clsPanel),a=P.uniqueId(),o=e[0].className;if(0===n.length?s.prepend(i):i.insertAfter(n),i.attr("id",a).addClass(o),e[0].className="",e.addClass("panel-content").addClass(t.clsContent).appendTo(i),""!==t.titleCaption||""!==t.titleIcon||!0===t.collapsible){var r=b("<div>").addClass("panel-title").addClass(t.clsTitle);if(""!==t.titleCaption&&b("<span>").addClass("caption").addClass(t.clsTitleCaption).html(t.titleCaption).appendTo(r),""!==t.titleIcon&&b(t.titleIcon).addClass("icon").addClass(t.clsTitleIcon).appendTo(r),!0===t.collapsible){var l=b("<span>").addClass("dropdown-toggle marker-center active-toggle").addClass(t.clsCollapseToggle).appendTo(r);e.collapse({toggleElement:l,duration:t.collapseDuration,onCollapse:t.onCollapse,onExpand:t.onExpand}),!0===t.collapsed&&this.collapse()}r.appendTo(i)}!0===t.draggable&&i.draggable({dragElement:r||i,onDragStart:t.onDragStart,onDragStop:t.onDragStop,onDragMove:t.onDragMove}),"auto"!==t.width&&parseInt(t.width)>=0&&i.outerWidth(parseInt(t.width)),"auto"!==t.height&&parseInt(t.height)>=0&&(i.outerHeight(parseInt(t.height)),e.css({overflow:"auto"})),this.panel=i,P.exec(t.onPanelCreate,[this.element])},collapse:function(){var e=this.element;this.options;!1!==P.isMetroObject(e,"collapse")&&e.data("collapse").collapse()},expand:function(){var e=this.element;this.options;!1!==P.isMetroObject(e,"collapse")&&e.data("collapse").expand()},changeAttribute:function(e){e}};y.plugin("panel",re);var le={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.popover=null,this.size={width:0,height:0},this._setOptionsFromDOM(),this._create(),this},options:{popoverText:"",popoverHide:3e3,popoverOffset:10,popoverTrigger:METRO_POPOVER_MODE.HOVER,popoverPosition:METRO_POSITION.TOP,hideOnLeave:!1,clsPopover:"",onPopoverShow:y.noop,onPopoverHide:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){this.element,this.options;this._createEvents()},_createEvents:function(){var e,t=this,n=this.element,s=this.options;switch(s.popoverTrigger){case METRO_POPOVER_MODE.CLICK:e=y.eventClick;break;case METRO_POPOVER_MODE.FOCUS:e=y.eventFocus;break;default:e=y.eventEnter}n.on(e,function(){null===t.popover&&(t.createPopover(),s.popoverHide>0&&setTimeout(function(){t.removePopover()},s.popoverHide))}),!0!==s.hideOnLeave||P.isTouchDevice()||n.on(y.eventLeave,function(){t.removePopover()}),b(window).on("scroll",function(){null!==t.popover&&t.setPosition()})},setPosition:function(){var e=this.popover,t=this.size,n=this.options,s=this.element;n.popoverPosition===METRO_POSITION.BOTTOM?(e.addClass("bottom"),e.css({top:s.offset().top-b(window).scrollTop()+s.outerHeight()+n.popoverOffset,left:s.offset().left+s.outerWidth()/2-t.width/2-b(window).scrollLeft()})):n.popoverPosition===METRO_POSITION.RIGHT?(e.addClass("right"),e.css({top:s.offset().top+s.outerHeight()/2-t.height/2-b(window).scrollTop(),left:s.offset().left+s.outerWidth()-b(window).scrollLeft()+n.popoverOffset})):n.popoverPosition===METRO_POSITION.LEFT?(e.addClass("left"),e.css({top:s.offset().top+s.outerHeight()/2-t.height/2-b(window).scrollTop(),left:s.offset().left-t.width-b(window).scrollLeft()-n.popoverOffset})):(e.addClass("top"),e.css({top:s.offset().top-b(window).scrollTop()-t.height-n.popoverOffset,left:s.offset().left+s.outerWidth()/2-t.width/2-b(window).scrollLeft()}))},createPopover:function(){var e,t=this,n=this.elem,s=this.element,i=this.options,a=b("<div>").addClass("popover neb").addClass(i.clsPopover).html(i.popoverText),o=P.uniqueId();switch(a.attr("id",o),i.popoverPosition){case METRO_POSITION.TOP:e="neb-s";break;case METRO_POSITION.BOTTOM:e="neb-n";break;case METRO_POSITION.RIGHT:e="neb-w";break;case METRO_POSITION.LEFT:e="neb-e"}if(a.addClass(e),a.on("click",function(){t.removePopover()}),this.popover=a,this.size=P.hiddenElementSize(a),"TD"===n.tagName||"TH"===n.tagName){var r=b("<div/>").css("display","inline-block").html(s.html());s.html(r),s=r}this.setPosition(),a.appendTo(b("body")),P.exec(i.onPopoverShow,[a,s])},removePopover:function(){var e=this,t=this.options.onPopoverHide===y.noop?0:300,n=this.popover;null!==n&&(P.exec(this.options.onPopoverHide,[n,this.element]),setTimeout(function(){n.hide(0,function(){n.remove(),e.popover=null})},t))},show:function(){var e=this,t=this.options;this.createPopover(),t.popoverHide>0&&setTimeout(function(){e.removePopover()},t.popoverHide)},hide:function(){this.removePopover()},changeText:function(){this.options.popoverText=this.element.attr("data-popover-text")},changePosition:function(){this.options.popoverPosition=this.element.attr("data-popover-position")},changeAttribute:function(e){switch(e){case"data-popover-text":this.changeText()}}};y.plugin("popover",le);var ce={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.value=0,this.buffer=0,this._setOptionsFromDOM(),this._create(),P.exec(this.options.onProgressCreate,[this.element]),this},options:{value:0,buffer:0,type:"bar",small:!1,clsBack:"",clsBar:"",clsBuffer:"",onValueChange:y.noop,onBufferChange:y.noop,onComplete:y.noop,onBuffered:y.noop,onProgressCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;switch(e.html("").addClass("progress"),t.type){case"buffer":b("<div>").addClass("bar").appendTo(e),b("<div>").addClass("buffer").appendTo(e);break;case"load":e.addClass("with-load"),b("<div>").addClass("bar").appendTo(e),b("<div>").addClass("buffer").appendTo(e),b("<div>").addClass("load").appendTo(e);break;case"line":e.addClass("line");break;default:b("<div>").addClass("bar").appendTo(e)}!0===t.small&&e.addClass("small"),e.addClass(t.clsBack),e.find(".bar").addClass(t.clsBar),e.find(".buffer").addClass(t.clsBuffer),this.val(t.value),this.buff(t.buffer)},val:function(e){var t=this,n=this.element,s=this.options;if(void 0===e)return t.value;var i=n.find(".bar");if(0===i.length)return!1;this.value=parseInt(e,10),i.css("width",this.value+"%"),n.trigger("valuechange",[this.value]),P.exec(s.onValueChange,[this.value,n]),100===this.value&&P.exec(s.onComplete,[this.value,n])},buff:function(e){var t=this,n=this.element,s=this.options;if(void 0===e)return t.buffer;var i=n.find(".buffer");if(0===i.length)return!1;this.buffer=parseInt(e,10),i.css("width",this.buffer+"%"),n.trigger("bufferchange",[this.buffer]),P.exec(s.onBufferChange,[this.buffer,n]),100===this.buffer&&P.exec(s.onBuffered,[this.buffer,n])},changeValue:function(){this.val(this.element.attr("data-value"))},changeBuffer:function(){this.buff(this.element.attr("data-buffer"))},changeAttribute:function(e){switch(e){case"data-value":this.changeValue();break;case"data-buffer":this.changeBuffer()}}};y.plugin("progress",ce);var de={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onRadioCreate,[this.element]),this},options:{caption:"",captionPosition:"right",disabled:!1,clsElement:"",clsCheck:"",clsCaption:"",onRadioCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options,n=e.prev(),s=e.parent(),i=b("<label>").addClass("radio "+e[0].className),a=b("<span>").addClass("check"),o=b("<span>").addClass("caption").html(t.caption);e.attr("type","radio"),0===n.length?s.prepend(i):i.insertAfter(n),e.appendTo(i),a.appendTo(i),"left"===t.captionPosition?o.insertBefore(a):o.insertAfter(a),e[0].className="",i.addClass(t.clsElement),o.addClass(t.clsCaption),a.addClass(t.clsCheck),!0===t.disabled&&e.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(e){switch(e){case"disabled":this.toggleState()}}};y.plugin("radio",de);var he={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onResizableCreate,[this.element]),this},options:{resizeElement:".resize-element",onResizeStart:y.noop,onResizeStop:y.noop,onResize:y.noop,onResizableCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;""!==t.resizeElement&&0===b(t.resizeElement).length&&b("<span>").addClass("resize-element").appendTo(e),e.on(y.eventStart,t.resizeElement,function(n){if(!1!==e.data("canResize")){var s=P.clientXY(n),i=parseInt(e.outerWidth()),a=parseInt(e.outerHeight()),o={width:i,height:a};P.exec(t.onResizeStart,[e,o]),b(document).on(y.eventMove,function(n){var o=P.clientXY(n),r={width:i+o.x-s.x,height:a+o.y-s.y};e.css(r),P.exec(t.onResize,[e,r])})}}),e.on(y.eventStop,t.resizeElement,function(){b(document).off(y.eventMove);var n={width:parseInt(e.outerWidth()),height:parseInt(e.outerHeight())};P.exec(t.onResizeStop,[e,n])})},off:function(){this.element.data("canResize",!1)},on:function(){this.element.data("canResize",!0)},changeAttribute:function(e){}};y.plugin("resizable",he);var ue={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onRippleCreate,[this.element]),this},options:{rippleColor:"#fff",rippleAlpha:.4,rippleTarget:"default",onRippleCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options,n="default"===t.rippleTarget?null:t.rippleTarget;e.on("click",n,function(e){var n=b(this);"static"===n.css("position")&&n.css("position","relative"),n.css({overflow:"hidden"}),b(".ripple").remove();var s=Math.max(n.outerWidth(),n.outerHeight()),i=b("<span class='ripple'></span>").css({width:s,height:s});n.prepend(i);var a=e.pageX-n.offset().left-i.width()/2,o=e.pageY-n.offset().top-i.height()/2;i.css({background:P.hex2rgba(t.rippleColor,t.rippleAlpha),width:s,height:s,top:o+"px",left:a+"px"}).addClass("rippleEffect"),setTimeout(function(){b(".ripple").remove()},400)})},changeAttribute:function(e){}};y.plugin("ripple",ue);var pe={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onInputCreate,[this.element]),this},options:{clsElement:"",clsInput:"",clsPrepend:"",clsClearButton:"",clsSearchButton:"",size:"default",prepend:"",copyInlineStyles:!0,clearButton:!0,searchButton:!0,searchButtonClick:"submit",clearButtonIcon:"<span class='default-icon-cross'></span>",searchButtonIcon:"<span class='default-icon-search'></span>",customButtons:[],disabled:!1,onSearchButtonClick:y.noop,onInputCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t,n=this.element,s=this.options,i=n.prev(),a=n.parent(),o=b("<div>").addClass("input "+n[0].className),r=b("<div>").addClass("button-group");if(void 0===n.attr("type")&&n.attr("type","text"),0===i.length?a.prepend(o):o.insertAfter(i),n.appendTo(o),r.appendTo(o),!1!==s.clearButton&&((e=b("<button>").addClass("button").addClass(s.clsClearButton).attr("tabindex",-1).attr("type","button").html(s.clearButtonIcon)).on("click",function(){n.val("").trigger("change").trigger("keyup").focus()}),e.appendTo(r)),!1!==s.searchButton&&((t=b("<button>").addClass("button").addClass(s.clsSearchButton).attr("tabindex",-1).attr("type","submit"===s.searchButtonClick?"submit":"button").html(s.searchButtonIcon)).on("click",function(){"submit"===s.searchButtonClick?P.exec(s.onSearchButtonClick,[this.value,this,this.form]):this.form.submit()}),t.appendTo(r)),""!==s.prepend&&b(P.isTag(s.prepend)?s.prepend:"<span>"+s.prepend+"</span>").addClass("prepend").addClass(s.clsPrepend).appendTo(o),"string"==typeof s.customButtons&&(s.customButtons=P.isObject(s.customButtons)),"object"==typeof s.customButtons&&P.objectLength(s.customButtons)>0&&b.each(s.customButtons,function(){var e=this,t=b("<button>").addClass("button custom-input-button").addClass(e.cls).attr("tabindex",-1).attr("type","button").html(e.html);t.on("click",function(){P.exec(e.onclick,[t,n])}),t.appendTo(r)}),"rtl"===n.attr("dir")&&o.addClass("rtl").attr("dir","rtl"),n[0].className="",!0===s.copyInlineStyles)for(var l=0,c=n[0].style.length;l<c;l++)o.css(n[0].style[l],n.css(n[0].style[l]));o.addClass(s.clsElement),n.addClass(s.clsInput),"default"!==s.size&&o.css({width:s.size}),n.on("blur",function(){o.removeClass("focused")}),n.on("focus",function(){o.addClass("focused")}),!0===s.disabled||n.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(e){switch(e){case"disabled":this.toggleState()}}};y.plugin("search",pe);var fe={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onSelectCreate,[this.element]),this},options:{duration:METRO_ANIMATION_DURATION,clsElement:"",clsSelect:"",clsPrepend:"",clsOption:"",clsOptionGroup:"",prepend:"",copyInlineStyles:!0,dropHeight:200,disabled:!1,onChange:y.noop,onSelectCreate:y.noop,onUp:y.noop,onDrop:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){this._createSelect(),this._createEvents()},_createSelect:function(){var e=this.element,t=this.options,n=e.prev(),s=e.parent(),i=b("<div>").addClass("select "+e[0].className).addClass(t.clsElement),a=e.prop("multiple"),o=P.uniqueId();if(i.attr("id",o).addClass("dropdown-toggle"),0===n.length?s.prepend(i):i.insertAfter(n),e.appendTo(i),e.addClass(t.clsSelect),!1===a){var r=b("<input>").attr("type","text").attr("name","__"+e.attr("name")+"__").prop("readonly",!0),l=b("<ul>").addClass("d-menu").css({"max-height":t.dropHeight});function c(n,s){var i,a,o=b(n);i=b("<li>").addClass(t.clsOption).data("text",n.text).data("value",n.value).appendTo(l),a=b("<a>").html(n.text).appendTo(i).addClass(n.className),o.is(":selected")&&(e.val(n.value),r.val(n.text).trigger("change"),e.trigger("change")),a.appendTo(i),i.appendTo(s)}function d(e,t){var n=b(e);b("<li>").html(e.label).addClass("group-title").appendTo(t);b.each(n.children(),function(){c(this,t)})}b.each(e.children(),function(){"OPTION"===this.tagName?c(this,l):"OPTGROUP"===this.tagName&&d(this,l)}),i.append(r),i.append(l),l.dropdown({duration:t.duration,toggleElement:"#"+o,onDrop:function(){var n=b(".select ul");b.each(n,function(){var e=b(this);e.is(l)||e.data("dropdown").close()}),P.exec(t.onDrop,[l,e])},onUp:function(){P.exec(t.onUp,[l,e])}})}if(""!==t.prepend&&b(P.isTag(t.prepend)?t.prepend:"<span>"+t.prepend+"</span>").addClass("prepend").addClass(t.clsPrepend).appendTo(i),!0===t.copyInlineStyles)for(var h=0,u=e[0].style.length;h<u;h++)i.css(e[0].style[h],e.css(e[0].style[h]));"rtl"===e.attr("dir")&&i.addClass("rtl").attr("dir","rtl"),!0===t.disabled||e.is(":disabled")?this.disable():this.enable()},_createEvents:function(){var e=this.element,t=this.options,n=e.closest(".select"),s=e.siblings("input"),i=e.siblings("ul");n.on("click",function(e){e.preventDefault(),e.stopPropagation()}),s.on("blur",function(){n.removeClass("focused")}),s.on("focus",function(){n.addClass("focused")}),i.on("click","li",function(n){if(b(this).hasClass("group-title"))return n.preventDefault(),void n.stopPropagation();var a=b(this).data("value"),o=b(this).data("text"),r=i.data("dropdown");s.val(o).trigger("change"),e.val(a),e.trigger("change"),r.close(),P.exec(t.onChange,[a])})},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},changeAttribute:function(e){}};b(document).on("click",function(e){var t=b(".select ul");b.each(t,function(){b(this).data("dropdown").close()})}),y.plugin("select",fe);var me={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.slider=null,this.value=0,this.percent=0,this.pixel=0,this.buffer=0,this.keyInterval=!1,this._setOptionsFromDOM(),this._create(),this},options:{min:0,max:100,accuracy:0,showMinMax:!1,minMaxPosition:METRO_POSITION.TOP,value:0,buffer:0,hint:!1,hintAlways:!1,hintPosition:METRO_POSITION.TOP,hintMask:"$1",vertical:!1,target:null,returnType:"value",size:0,clsSlider:"",clsBackside:"",clsComplete:"",clsBuffer:"",clsMarker:"",clsHint:"",clsMinMax:"",clsMin:"",clsMax:"",onStart:y.noop,onStop:y.noop,onMove:y.noop,onClick:y.noop,onChangeValue:y.noop,onChangeBuffer:y.noop,onFocus:y.noop,onBlur:y.noop,onSliderCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;this._createSlider(),this._createEvents(),this.buff(t.buffer),this.val(t.value),P.exec(t.onSliderCreate,[e])},_createSlider:function(){var e=this.element,t=this.options,n=e.prev(),s=e.parent(),i=b("<div>").addClass("slider "+e[0].className).addClass(t.clsSlider),a=b("<div>").addClass("backside").addClass(t.clsBackside),o=b("<div>").addClass("complete").addClass(t.clsComplete),r=b("<div>").addClass("buffer").addClass(t.clsBuffer),l=b("<button>").attr("type","button").addClass("marker").addClass(t.clsMarker),c=b("<div>").addClass("hint").addClass(t.hintPosition+"-side").addClass(t.clsHint),d=P.uniqueId();if(i.attr("id",d),t.size>0&&(!0===t.vertical?i.outerHeight(t.size):i.outerWidth(t.size)),!0===t.vertical&&i.addClass("vertical-slider"),0===n.length?s.prepend(i):i.insertAfter(n),!0===t.hintAlways&&c.css({display:"block"}),e.appendTo(i),a.appendTo(i),o.appendTo(i),r.appendTo(i),l.appendTo(i),c.appendTo(l),!0===t.showMinMax){var h=b("<div>").addClass("slider-min-max clear").addClass(t.clsMinMax);b("<span>").addClass("place-left").addClass(t.clsMin).html(t.min).appendTo(h),b("<span>").addClass("place-right").addClass(t.clsMax).html(t.max).appendTo(h),t.minMaxPosition===METRO_POSITION.TOP?h.insertBefore(i):h.insertAfter(i)}this.slider=i},_createEvents:function(){var e=this,t=this.slider,n=this.options,s=t.find(".marker"),i=t.find(".hint");s.on(y.eventStart,function(){b(document).on(y.eventMove,function(s){!0===n.hint&&!0!==n.hintAlways&&i.fadeIn(),e._move(s),P.exec(n.onMove,[e.value,e.percent,t])}),b(document).on(y.eventStop,function(){b(document).off(y.eventMove),b(document).off(y.eventStop),!0!==n.hintAlways&&i.fadeOut(),P.exec(n.onStop,[e.value,e.percent,t])}),P.exec(n.onStart,[e.value,e.percent,t])}),s.on("focus",function(){P.exec(n.onFocus,[e.value,e.percent,t])}),s.on("blur",function(){P.exec(n.onBlur,[e.value,e.percent,t])}),s.on("keydown",function(t){var s=t.keyCode?t.keyCode:t.which;if(-1!==[37,38,39,40].indexOf(s)){var i=0===n.accuracy?1:n.accuracy;e.keyInterval||(e.keyInterval=setInterval(function(){var s=e.value;37!==t.keyCode&&40!==t.keyCode||(s-i<n.min?s=n.min:s-=i),38!==t.keyCode&&39!==t.keyCode||(s+i>n.max?s=n.max:s+=i),e.value=e._correct(s),e.percent=e._convert(e.value,"val2prc"),e.pixel=e._convert(e.percent,"prc2pix"),e._redraw()},100),t.preventDefault())}}),s.on("keyup",function(){clearInterval(e.keyInterval),e.keyInterval=!1}),t.on(y.eventClick,function(s){e._move(s),P.exec(n.onClick,[e.value,e.percent,t]),P.exec(n.onStop,[e.value,e.percent,t])}),b(window).resize(function(){e.val(e.value),e.buff(e.buffer)})},_convert:function(e,t){var n=this.slider,s=this.options,i=(!0===s.vertical?n.outerHeight():n.outerWidth())-n.find(".marker").outerWidth();switch(t){case"pix2prc":return Math.round(100*e/i);case"pix2val":return Math.round(this._convert(e,"pix2prc")*((s.max-s.min)/100)+s.min);case"val2prc":return Math.round((e-s.min)/((s.max-s.min)/100));case"prc2pix":return Math.round(e/(100/i));case"val2pix":return Math.round(this._convert(this._convert(e,"val2prc"),"prc2pix"))}},_correct:function(e){var t=this.options.accuracy,n=this.options.min,s=this.options.max;return 0===t||isNaN(t)?e:((e=Math.floor(e/t)*t+Math.round(e%t/t)*t)<n&&(e=n),e>s&&(e=s),e)},_move:function(e){var t,n,s=this.slider,i=this.options,a=s.offset(),o=s.find(".marker").outerWidth(),r=!0===i.vertical?s.outerHeight():s.outerWidth(),l=r-o;t=!0===i.vertical?P.pageXY(e).y-a.top:P.pageXY(e).x-a.left,(n=!0===i.vertical?r-t-o/2:t-o/2)<0||n>l||(this.value=this._correct(this._convert(n,"pix2val")),this.percent=this._convert(this.value,"val2prc"),this.pixel=this._convert(this.percent,"prc2pix"),this._redraw())},_hint:function(){var e,t=this.options,n=this.slider.find(".hint");e=t.hintMask.replace("$1",this.value).replace("$2",this.percent),n.text(e)},_value:function(){var e=this.element,t=this.options,n=this.slider,s="value"===t.returnType?this.value:this.percent;if("INPUT"===e[0].tagName&&e.val(s),e.trigger("change"),null!==t.target){var i=b(t.target);0!==i.length&&b.each(i,function(){var e=b(this);"INPUT"===this.tagName?e.val(s):e.text(s)})}P.exec(t.onChangeValue,[s,this.percent,n])},_marker:function(){var e=this.slider,t=this.options,n=e.find(".marker"),s=e.find(".complete"),i=!0===t.vertical?e.outerHeight():e.outerWidth();!0===t.vertical?(n.css("top",i-this.pixel),s.css("height",this.percent+"%")):(n.css("left",this.pixel),s.css("width",this.percent+"%"))},_redraw:function(){this._marker(),this._value(),this._hint()},_buffer:function(){var e=this.options,t=this.slider.find(".buffer");!0===e.vertical?t.css("height",this.buffer+"%"):t.css("width",this.buffer+"%"),P.exec(e.onChangeBuffer,[this.buffer,this.slider])},val:function(e){var t=this.options;if(void 0===e||isNaN(e))return this.value;e<t.min&&(e=t.min),e>t.max&&(e=t.max),this.value=this._correct(e),this.percent=this._convert(this.value,"val2prc"),this.pixel=this._convert(this.percent,"prc2pix"),this._redraw()},buff:function(e){var t=this.slider.find(".buffer");return void 0===e||isNaN(e)?this.buffer:0!==t.length&&((e=parseInt(e))>100&&(e=100),e<0&&(e=0),this.buffer=e,void this._buffer())},changeValue:function(){var e=this.element,t=this.options,n=e.attr("data-value");n<t.min&&(n=t.min),n>t.max&&(n=t.max),this.val(n)},changeBuffer:function(){var e=this.element,t=parseInt(e.attr("data-buffer"));t<0&&(t=0),t>100&&(t=100),this.buff(t)},changeAttribute:function(e){switch(e){case"data-value":this.changeValue();break;case"data-buffer":this.changeBuffer()}}};y.plugin("slider",me);var ve={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.current=0,this._setOptionsFromDOM(),this._create(),this},options:{view:METRO_STEPPER_VIEW.SQUARE,steps:3,step:1,stepClick:!1,clsStepper:"",clsStep:"",clsComplete:"",clsCurrent:"",onStep:y.noop,onStepClick:y.noop,onStepperCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;t.step<=0&&(t.step=1),this._createStepper(),this._createEvents(),P.exec(t.onStepperCreate,[e])},_createStepper:function(){var e,t=this.element,n=this.options;for(t.addClass("stepper").addClass(n.view).addClass(n.clsStepper),e=1;e<=n.steps;e++)b("<span>").addClass("step").addClass(n.clsStep).data("step",e).html("<span>"+e+"</span>").appendTo(t);this.current=1,this.toStep(n.step)},_createEvents:function(){var e=this,t=this.element,n=this.options;t.on("click",".step",function(){var s=b(this).data("step");!0===n.stepClick&&(e.toStep(s),P.exec(n.onStepClick,[s,t]))})},next:function(){var e=this.element,t=(this.options,e.find(".step"));this.current+1>t.length||(this.current++,this.toStep(this.current))},prev:function(){this.element,this.options;this.current-1!=0&&(this.current--,this.toStep(this.current))},last:function(){var e=this.element;this.options;this.toStep(e.find(".step").length)},first:function(){this.toStep(1)},toStep:function(e){var t=this.element,n=this.options,s=b(t.find(".step").get(e-1));0!==s.length&&(this.current=e,t.find(".step").removeClass("complete current").removeClass(n.clsCurrent).removeClass(n.clsComplete),s.addClass("current").addClass(n.clsCurrent),s.prevAll().addClass("complete").addClass(n.clsComplete),P.exec(n.onStep,[this.current,t]))},changeAttribute:function(e){}};y.plugin("stepper",ve);var ge={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.data=null,this._setOptionsFromDOM(),this._create(),this},options:{defaultClosedIcon:"",defaultOpenIcon:"",changeUri:!0,encodeLink:!0,closed:!1,chromeNotice:!1,startFrom:null,slideToStart:!0,startSlideSleep:1e3,source:null,data:null,eventClick:"select",streamSelect:!1,onStreamClick:y.noop,onStreamSelect:y.noop,onEventClick:y.noop,onEventSelect:y.noop,onStreamerCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this,t=this.element,n=this.options;if(t.addClass("streamer"),void 0===t.attr("id")&&t.attr("id",P.uniqueId()),null===n.source&&null===n.data)return!1;b("<div>").addClass("streams").appendTo(t),b("<div>").addClass("events-area").appendTo(t),null!==n.source?b.get(n.source,function(t){e.data=t,e.build()}):(this.data=n.data,this.build()),this._createEvents(),!0===n.chromeNotice&&!0===P.detectChrome()&&!1===P.isTouchDevice()&&b("<p>").addClass("text-small text-muted").html("*) In Chrome browser please press and hold Shift and turn the mouse wheel.").insertAfter(t)},build:function(){var e=this,t=this.element,n=this.options,s=this.data,i=t.find(".streams").html(""),a=t.find(".events-area").html(""),o=b("<ul>").addClass("streamer-timeline").html("").appendTo(a),r=b("<div>").addClass("streamer-events").appendTo(a),l=b("<div>").addClass("event-group").appendTo(r),c=P.getURIParameter(null,"StreamerIDS");null!==c&&!0===n.encodeLink&&(c=atob(c));var d=c?c.split("|")[0]:null,h=c?c.split("|")[1].split(","):[];if(void 0!==s.actions){var u=b("<div>").addClass("streamer-actions").appendTo(i);b.each(s.actions,function(){var e=this,n=b("<button>").addClass("streamer-action").addClass(e.cls).html(e.html);void 0!==e.onclick&&n.on("click",function(){P.exec(e.onclick,[t])}),n.appendTo(u)})}o.html(""),void 0===s.timeline&&(s.timeline={start:"09:00",stop:"18:00",step:20});var p=new Date,f=new Date,m=s.timeline.start?s.timeline.start.split(":"):[9,0],v=s.timeline.stop?s.timeline.stop.split(":"):[18,0],g=s.timeline.step?60*parseInt(s.timeline.step):1200;p.setHours(m[0]),p.setMinutes(m[1]),p.setSeconds(0),f.setHours(v[0]),f.setMinutes(v[1]),f.setSeconds(0);for(var C=p.getTime()/1e3;C<=f.getTime()/1e3;C+=g){var T=new Date(1e3*C),y=T.getHours(),w=T.getMinutes(),_=(y<10?"0"+y:y)+":"+(w<10?"0"+w:w);b("<li>").data("time",_).addClass("js-time-point-"+_.replace(":","-")).html("<em>"+_+"</em>").appendTo(o)}void 0!==s.streams&&b.each(s.streams,function(e){var s=this,a=b("<div>").addClass("stream").addClass(this.cls).appendTo(i);a.addClass(s.cls).data("one",!1).data("data",s.data),b("<div>").addClass("stream-title").html(s.title).appendTo(a),b("<div>").addClass("stream-secondary").html(s.secondary).appendTo(a),b(s.icon).addClass("stream-icon").appendTo(a);var r=P.computedRgbToHex(P.getStyleOne(a,"background-color")),c=P.computedRgbToHex(P.getStyleOne(a,"color")),u=b("<div>").addClass("stream-events").data("background-color",r).data("text-color",c).appendTo(l);if(void 0!==s.events){b.each(s.events,function(s){var i,l=this,p=e+":"+s,f=b("<div>").data("origin",l).data("sid",p).data("data",l.data).data("time",l.time).addClass("stream-event").addClass("size-"+l.size+"x").addClass(l.cls).appendTo(u),m=o.find(".js-time-point-"+this.time.replace(":","-"))[0].offsetLeft-a.outerWidth();f.css({position:"absolute",left:m});var v=b("<div>").addClass("stream-event-slide").appendTo(f),g=b("<div>").addClass("slide-logo").appendTo(v),C=b("<div>").addClass("slide-data").appendTo(v);b("<img>").addClass("icon").attr("src",l.icon).appendTo(g),b("<span>").addClass("time").css({backgroundColor:r,color:c}).html(l.time).appendTo(g),b("<div>").addClass("title").html(l.title).appendTo(C),b("<div>").addClass("subtitle").html(l.subtitle).appendTo(C),b("<div>").addClass("desc").html(l.desc).appendTo(C),(!1===n.closed&&t.attr("id")===d&&-1!==h.indexOf(p)||!0===l.selected||1===parseInt(l.selected))&&f.addClass("selected"),!0===n.closed||!0===l.closed||1===parseInt(l.closed)?(i=void 0!==l.closedIcon?P.isTag(l.closedIcon)?l.closedIcon:"<span>"+l.closedIcon+"</span>":P.isTag(n.defaultClosedIcon)?n.defaultClosedIcon:"<span>"+n.defaultClosedIcon+"</span>",b(i).addClass("state-icon").addClass(l.clsClosedIcon).appendTo(v),f.data("closed",!0).data("target",l.target)):(i=void 0!==l.openIcon?P.isTag(l.openIcon)?l.openIcon:"<span>"+l.openIcon+"</span>":P.isTag(n.defaultOpenIcon)?n.defaultOpenIcon:"<span>"+n.defaultOpenIcon+"</span>",b(i).addClass("state-icon").addClass(l.clsOpenIcon).appendTo(v),f.data("closed",!1))});var p=u.find(".stream-event:last-child");u.outerWidth(p[0].offsetLeft+p.outerWidth())}}),void 0!==s.global&&b.each(["before","after"],function(){var e=this;void 0!==s.global[e]&&b.each(s.global[e],function(){var e=this,t=b("<div>").addClass("event-group").addClass("size-"+e.size+"x"),n=b("<div>").addClass("stream-events global-stream").appendTo(t),s=b("<div>").addClass("stream-event").appendTo(n);s.addClass(e.cls).data("time",e.time).data("origin",e).data("data",e.data),b("<div>").addClass("event-title").html(e.title).appendTo(s),b("<div>").addClass("event-subtitle").html(e.subtitle).appendTo(s),b("<div>").addClass("event-html").html(e.html).appendTo(s);var a=o.find(".js-time-point-"+this.time.replace(":","-"))[0].offsetLeft-i.find(".stream").outerWidth();t.css({position:"absolute",left:a,height:"100%"}).appendTo(r)})}),t.data("stream",-1),null!==n.startFrom&&!0===n.slideToStart&&setTimeout(function(){e.slideTo(n.startFrom)},n.startSlideSleep),P.exec(n.onStreamerCreate,[t])},_createEvents:function(){var e=this,t=this.element,n=this.options;t.on("click",".stream-event",function(t){var s=b(this);if(!1===n.closed&&!0!==s.data("closed")&&"select"===n.eventClick)s.toggleClass("selected"),!0===n.changeUri&&e._changeURI(),P.exec(n.onEventSelect,[s,s.hasClass("selected")]);else if(P.exec(n.onEventClick,[s]),!0===n.closed||!0===s.data("closed")){var i=s.data("target");i&&(window.location.href=i)}}),t.on("click",".stream",function(s){var i=b(this),a=i.index();!1!==n.streamSelect&&(t.data("stream")===a?(t.find(".stream-event").removeClass("disabled"),t.data("stream",-1)):(t.data("stream",a),t.find(".stream-event").addClass("disabled"),e.enableStream(i),P.exec(n.onStreamSelect,[i])),P.exec(n.onStreamClick,[i]))}),!0!==P.isTouchDevice()&&t.on("mousewheel",".events-area",function(e){var t=b(this);if(void 0!==e.deltaY&&void 0!==e.deltaFactor&&e.deltaFactor>1){var n=t.scrollLeft()-30*e.deltaY;t.scrollLeft(n),e.preventDefault()}}),!0===P.isTouchDevice()&&t.on("click",".stream",function(){var e=b(this);e.toggleClass("focused"),b.each(t.find(".stream"),function(){b(this).is(e)||b(this).removeClass("focused")})})},_changeURI:function(){this.element,this.options,this.data;var e=this.getLink();history.pushState({},document.title,e)},slideTo:function(e){var t,n=this.element;this.options,this.data;t=b(void 0===e?n.find(".streamer-timeline li")[0]:n.find(".streamer-timeline .js-time-point-"+e.replace(":","-"))[0]),n.find(".events-area").animate({scrollLeft:t[0].offsetLeft-n.find(".streams .stream").outerWidth()},METRO_ANIMATION_DURATION)},enableStream:function(e){var t=this.element,n=(this.options,this.data,e.index());e.removeClass("disabled").data("streamDisabled",!1),t.find(".stream-events").eq(n).find(".stream-event").removeClass("disabled")},disableStream:function(e){var t=this.element,n=(this.options,this.data,e.index());e.addClass("disabled").data("streamDisabled",!0),t.find(".stream-events").eq(n).find(".stream-event").addClass("disabled")},toggleStream:function(e){!0===e.data("streamDisabled")?this.enableStream(e):this.disableStream(e)},getLink:function(){var e,t=this.element,n=this.options,s=(this.data,t.find(".stream-event")),i=[],a=window.location.href;return b.each(s,function(){var e=b(this);void 0!==e.data("sid")&&e.hasClass("selected")&&i.push(e.data("sid"))}),e=t.attr("id")+"|"+i.join(","),!0===n.encodeLink&&(e=btoa(e)),P.updateURIParameter(a,"StreamerIDS",e)},getTimes:function(){var e=this.element,t=(this.options,this.data,e.find(".streamer-timeline > li")),n=[];return b.each(t,function(){n.push(b(this).data("time"))}),n},getEvents:function(e,t){var n,s=this.element,i=(this.options,this.data,[]);switch(e){case"selected":n=s.find(".stream-event.selected");break;case"non-selected":n=s.find(".stream-event:not(.selected)");break;default:n=s.find(".stream-event")}return b.each(n,function(){var e,n=b(this);!0!==t&&n.parent().hasClass("global-stream")||(e=n.data("origin"),i.push(e))}),i},source:function(e){if(void 0===e)return this.options.source;this.options.source=e,this.changeSource()},data:function(e){if(void 0===e)return this.options.source;this.options.data=e,this.changeData()},getStreamerData:function(){return this.data},changeSource:function(){var e=this,t=this.element,n=this.options,s=(this.data,t.attr("data-source"));""!==String(s).trim()&&(n.source=s,b.get(n.source,function(t){e.data=t,e.build()}),t.trigger("sourcechanged"))},changeData:function(){var e=this.element,t=this.options,n=(this.data,e.attr("data-data"));""!==String(n).trim()&&(t.data=n,this.data=n,this.build(),e.trigger("datachanged"))},changeStreamSelectOption:function(){var e=this.element,t=this.options;this.data;t.streamSelect="true"===e.attr("data-stream-select").toLowerCase()},changeAttribute:function(e){switch(e){case"data-source":this.changeSource();break;case"data-data":this.changeData();break;case"data-stream-select":this.changeStreamSelectOption()}}};y.plugin("streamer",ge);var Ce={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onSwitchCreate,[this.element]),this},options:{caption:"",captionPosition:"right",disabled:!1,clsElement:"",clsCheck:"",clsCaption:"",onSwitchCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options,n=e.prev(),s=e.parent(),i=b("<label>").addClass("switch "+e[0].className),a=b("<span>").addClass("check"),o=b("<span>").addClass("caption").html(t.caption);e.attr("type","checkbox"),0===n.length?s.prepend(i):i.insertAfter(n),e.appendTo(i),a.appendTo(i),"left"===t.captionPosition?o.insertBefore(a):o.insertAfter(a),e[0].className="",i.addClass(t.clsElement),o.addClass(t.clsCaption),a.addClass(t.clsCheck),!0===t.disabled&&e.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(e){switch(e){case"disabled":this.toggleState()}}};y.plugin("switch",Ce);var be={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._targets=[],this._setOptionsFromDOM(),this._create(),P.exec(this.options.onTabsCreate,[this.element]),this},options:{onTab:y.noop,onTabsCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t,n=this,s=this.element,i=(this.options,s.prev()),a=s.parent(),o=b("<div>").addClass("tabs tabs-wrapper "+s[0].className);s[0].className="",0===i.length?a.prepend(o):o.insertAfter(i),s.appendTo(o),s.data("expanded",!1),t=b("<div>").addClass("expand-title"),o.prepend(t),e=b("<span>").addClass("expand-button").html("<span></span>"),o.append(e),o.on("click",".expand-button, .expand-title",function(){!1===s.data("expanded")?(s.addClass("expand"),s.data("expanded",!0)):(s.removeClass("expand"),s.data("expanded",!1))}),s.on("click","a",function(e){var t=b(this).parent("li");!0===s.data("expanded")&&(s.removeClass("expand"),s.data("expanded",!1)),n._open(t),e.preventDefault()}),this._open()},_collectTargets:function(){var e=this,t=this.element.find("li");b.each(t,function(){var t=b(this).find("a").attr("href");t&&"#"!==t&&e._targets.push(t)})},_open:function(e){var t=this.element,n=this.options,s=t.find("li"),i=t.siblings(".expand-title");if(0!==s.length){this._collectTargets(),void 0===e&&(e=b(s[0]));var a=e.find("a").attr("href");void 0!==a&&(s.removeClass("active"),e.parent().hasClass("d-menu")?e.parent().parent().addClass("active"):e.addClass("active"),b.each(this._targets,function(){b(this).hide()}),"#"!==a&&b(a).show(),i.html(e.find("a").html()),P.exec(n.onTab,[e]))}},changeAttribute:function(e){}};y.plugin("tabs",be);var Te={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),P.exec(this.options.onTextareaCreate,[this.element]),this},options:{prepend:"",copyInlineStyles:!0,clearButton:!0,clearButtonIcon:"<span class='default-icon-cross'></span>",autoSize:!1,disabled:!1,onTextareaCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t=this.element,n=this.options,s=t.prev(),i=t.parent(),a=b("<div>").addClass("textarea "+t[0].className);0===s.length?i.prepend(a):a.insertAfter(s),!1!==n.clearButton&&((e=b("<button>").addClass("button clear-button").attr("tabindex",-1).attr("type","button").html(n.clearButtonIcon)).on("click",function(){t.val("").trigger("change").trigger("keyup").focus()}),e.appendTo(a)),t.appendTo(a);var o=function(){setTimeout(function(){t[0].style.cssText="height:auto;",t[0].style.cssText="height:"+t[0].scrollHeight+"px"},0)};if(n.autoSize&&(a.addClass("autosize"),setTimeout(function(){o()},0),t.on("keyup",o),t.on("keydown",o),t.on("change",o),t.on("focus",o),t.on("cut",o),t.on("paste",o),t.on("drop",o)),"rtl"===t.attr("dir")&&a.addClass("rtl").attr("dir","rtl"),""!==n.prepend&&b(P.isTag(n.prepend)?n.prepend:"<span>"+n.prepend+"</span>").addClass("prepend").addClass(n.clsPrepend).appendTo(a),t[0].className="",!0===n.copyInlineStyles)for(var r=0,l=t[0].style.length;r<l;r++)a.css(t[0].style[r],t.css(t[0].style[r]));t.on("blur",function(){a.removeClass("focused")}),t.on("focus",function(){a.addClass("focused")}),!0===n.disabled||t.is(":disabled")?this.disable():this.enable()},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){!1===this.element.data("disabled")?this.disable():this.enable()},changeAttribute:function(e){switch(e){case"disabled":this.toggleState()}}};y.plugin("textarea",Te);var ye={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.effectInterval=!1,this.images=[],this.slides=[],this.currentSlide=-1,this.unload=!1,this._setOptionsFromDOM(),this._create(),this},options:{size:"medium",cover:"",effect:"",effectInterval:3e3,target:null,onClick:y.noop,onTileCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;this._createTile(),this._createEvents(),P.exec(t.onTileCreate,[e])},_createTile:function(){var e=this,t=this.element,n=this.options,s=t.find(".slide"),i=t.find(".slide-front, .slide-back");if(t.addClass("tile-"+n.size),n.effect.indexOf("hover-")>-1&&(t.addClass("effect-"+n.effect),b.each(i,function(){var t=b(this);void 0!==t.data("cover")&&e._setCover(t,t.data("cover"))})),n.effect.indexOf("animate-")>-1&&s.length>1&&(b.each(s,function(t){var s=b(this);e.slides.push(this),void 0!==s.data("cover")&&e._setCover(s,s.data("cover")),t>0&&(["animate-slide-up","animate-slide-down"].indexOf(n.effect)>-1&&s.css("top","100%"),["animate-slide-left","animate-slide-right"].indexOf(n.effect)>-1&&s.css("left","100%"),["animate-fade"].indexOf(n.effect)>-1&&s.css("opacity",0))}),this.currentSlide=0,this._runEffects()),""!==n.cover&&this._setCover(t,n.cover),"image-set"===n.effect){t.addClass("image-set"),b.each(t.children("img"),function(){var n=b(this),s=this.src,i=b("<div>").addClass("img");n.hasClass("icon")||(e.images.push(this),i.css("background-image","url("+s+")"),t.prepend(i),n.remove())});function a(e,t){setTimeout(function(){e.fadeOut(500,function(){e.css("background-image","url("+t+")"),e.fadeIn()})},P.random(0,1e3))}setInterval(function(){for(var n=e.images.slice(),s=0;s<t.find(".img").length;s++){var i=P.random(0,n.length-1);a(b(t.find(".img").get(s)),n[i].src),n.splice(i,1)}},3e3)}},_runEffects:function(){var e=this,t=this.options;!1===this.effectInterval&&(this.effectInterval=setInterval(function(){var n,s;n=b(e.slides[e.currentSlide]),e.currentSlide++,e.currentSlide===e.slides.length&&(e.currentSlide=0),s=e.slides[e.currentSlide],"animate-slide-up"===t.effect&&w.slideUp(b(n),b(s)),"animate-slide-down"===t.effect&&w.slideDown(b(n),b(s)),"animate-slide-left"===t.effect&&w.slideLeft(b(n),b(s)),"animate-slide-right"===t.effect&&w.slideRight(b(n),b(s)),"animate-fade"===t.effect&&w.fade(b(n),b(s))},t.effectInterval))},_stopEffects:function(){clearInterval(this.effectInterval),this.effectInterval=!1},_setCover:function(e,t){e.css({backgroundImage:"url("+t+")",backgroundSize:"cover",backgroundRepeat:"no-repeat"})},_createEvents:function(){var e=this,t=this.element,n=this.options;t.on(y.eventStart,function(e){var s,i=b(this),a={w:t.width(),h:t.height()},o=P.pageXY(e).x-i.offset().left,r=P.pageXY(e).y-i.offset().top;!1===P.isRightMouse(e)&&(s=o<1*a.w/3&&(r<1*a.h/2||r>1*a.h/2)?"left":o>2*a.w/3&&(r<1*a.h/2||r>1*a.h/2)?"right":o>1*a.w/3&&o<2*a.w/3&&r>a.h/2?"bottom":"top",i.addClass("transform-"+s),null!==n.target&&setTimeout(function(){document.location.href=n.target},100),P.exec(n.onClick,[i]))}),t.on([y.eventStop,y.eventLeave].join(" "),function(e){b(this).removeClass("transform-left").removeClass("transform-right").removeClass("transform-top").removeClass("transform-bottom")}),b(window).on(y.eventBlur,function(){e._stopEffects()}),b(window).on(y.eventFocus,function(){e._runEffects()})},changeAttribute:function(e){}};y.plugin("tile",ye);var we={create:function(e,t,n,s){var i=b("<div>").addClass("toast").html(e).appendTo(b("body")).hide(),a=i.outerWidth();n=n||METRO_TIMEOUT,i.css({left:"50%","margin-left":-a/2}).addClass(s).fadeIn(METRO_ANIMATION_DURATION),setTimeout(function(){i.fadeOut(METRO_ANIMATION_DURATION,function(){i.remove(),P.callback(t)})},n)}};b.Metro.toast=we;var _e={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),this},options:{effect:"slide",duration:100,onNodeClick:y.noop,onNodeDblClick:y.noop,onNodeDelete:y.noop,onNodeInsert:y.noop,onNodeClean:y.noop,onCheckClick:y.noop,onRadioClick:y.noop,onExpandNode:y.noop,onCollapseNode:y.noop,onTreeviewCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;this._createTree(),this._createEvents(),P.exec(t.onTreeviewCreate,[e])},_createIcon:function(e){var t,n;return n=P.isTag(e)?b(e):b("<img>").attr("src",e),(t=b("<span>").addClass("icon")).html(n),t},_createCaption:function(e){return b("<span>").addClass("caption").html(e)},_createToggle:function(){return b("<span>").addClass("node-toggle")},_createNode:function(e){var t;return t=b("<li>"),void 0!==e.caption&&t.prepend(this._createCaption(e.caption)),void 0!==e.icon&&t.prepend(this._createIcon(e.icon)),void 0!==e.html&&t.append(e.html),t},_createTree:function(){var e=this,t=this.element,n=(this.options,t.find("li"));t.addClass("treeview"),b.each(n,function(){var t=b(this);void 0!==t.data("caption")&&t.prepend(e._createCaption(t.data("caption"))),void 0!==t.data("icon")&&t.prepend(e._createIcon(t.data("icon"))),t.children("ul").length>0&&(t.append(e._createToggle()),!0!==t.data("collapsed")?t.addClass("expanded"):t.children("ul").hide())})},_createEvents:function(){var e=this,t=this.element,n=this.options;t.on("click",".node-toggle",function(t){var n=b(this).parent();e.toggleNode(n),t.preventDefault()}),t.on("click","li > .caption",function(e){var s=b(this).parent();t.find("li").removeClass("current"),s.addClass("current"),P.exec(n.onNodeClick,[s,t]),e.preventDefault()}),t.on("dblclick","li > .caption",function(s){var i=b(this).closest("li"),a=i.children(".node-toggle"),o=i.children("ul");(a.length>0||o.length>0)&&e.toggleNode(i),P.exec(n.onNodeDblClick,[i,t]),s.preventDefault()}),t.on("click","input[type=radio]",function(e){var s=b(this),i=s.is(":checked"),a=s.closest("li");P.exec(n.onRadioClick,[i,s,a,t])}),t.on("click","input[type=checkbox]",function(e){var s,i=b(this),a=i.is(":checked"),o=i.closest("li");(s=i.closest("li").find("ul input[type=checkbox]")).prop("indeterminate",!1),s.prop("checked",a),s=[],b.each(t.find("input[type=checkbox]"),function(){s.push(this)}),b.each(s.reverse(),function(){var e=b(this),t=e.closest("li").children("ul").find("input[type=checkbox]").length,n=e.closest("li").children("ul").find("input[type=checkbox]:checked").length;t>0&&0===n&&(e.prop("indeterminate",!1),e.prop("checked",!1)),0===n?e.prop("indeterminate",!1):n>0&&t>n?e.prop("indeterminate",!0):t===n&&(e.prop("indeterminate",!1),e.prop("checked",!0))}),P.exec(n.onCheckClick,[a,i,o,t])})},toggleNode:function(e){var t,n=this.element,s=this.options;e.toggleClass("expanded"),"slide"===s.effect?(t=!0!==e.hasClass("expanded")?"slideUp":"slideDown",P.exec(s.onCollapseNode,[e,n])):(t=!0!==e.hasClass("expanded")?"fadeOut":"fadeIn",P.exec(s.onExpandNode,[e,n])),e.children("ul")[t](s.duration)},addTo:function(e,t){var n,s,i=this.element,a=this.options;return null===e?n=i:0===(n=e.children("ul")).length&&(n=b("<ul>").appendTo(e),this._createToggle().appendTo(e),e.addClass("expanded")),(s=this._createNode(t)).appendTo(n),P.exec(a.onNodeInsert,[s,i]),s},insertBefore:function(e,t){var n=this.element,s=this.options,i=this._createNode(t);return i.insertBefore(e),P.exec(s.onNodeInsert,[i,n]),i},insertAfter:function(e,t){var n=this.element,s=this.options,i=this._createNode(t);return i.insertAfter(e),P.exec(s.onNodeInsert,[i,n]),i},del:function(e){var t=this.element,n=this.options,s=e.closest("ul"),i=s.closest("li");e.remove(),0!==s.children().length||s.is(t)||(s.remove(),i.removeClass("expanded"),i.children(".node-toggle").remove()),P.exec(n.onNodeDelete,[e,t])},clean:function(e){var t=this.element,n=this.options;e.children("ul").remove(),e.removeClass("expanded"),e.children(".node-toggle").remove(),P.exec(n.onNodeClean,[e,t])},changeAttribute:function(e){}};y.plugin("treeview",_e);var xe={required:function(e){return""!==e.trim()},length:function(e,t){return!(void 0===t||isNaN(t)||t<=0)&&e.trim().length===parseInt(t)},minlength:function(e,t){return!(void 0===t||isNaN(t)||t<=0)&&e.trim().length>=parseInt(t)},maxlength:function(e,t){return!(void 0===t||isNaN(t)||t<=0)&&e.trim().length<=parseInt(t)},min:function(e,t){return void 0!==t&&!isNaN(t)&&(!!this.number(e)&&(!isNaN(e)&&Number(e)>=Number(t)))},max:function(e,t){return void 0!==t&&!isNaN(t)&&(!!this.number(e)&&(!isNaN(e)&&Number(e)<=Number(t)))},email:function(e){return/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i.test(e)},url:function(e){return/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e){return"Invalid Date"!==new Date(e)&&!isNaN(new Date(e))},number:function(e){return!isNaN(e)},digits:function(e){return/^\d+$/.test(e)},hexcolor:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},pattern:function(e,t){return void 0!==t&&new RegExp(t).test(e)},compare:function(e,t){return e===t},is_control:function(e){return e.parent().hasClass("input")||e.parent().hasClass("select")||e.parent().hasClass("textarea")},validate:function(e,t,n,s){var i=!0,a=b(e),o=xe.is_control(a),r=void 0!==a.data("validate")?String(a.data("validate")).split(",").map(function(e){return e.trim()}):[];return 0===r.length||(o?a.parent().removeClass("invalid valid"):a.removeClass("invalid valid"),b.each(r,function(){if(!1!==i){var e,n,s=this.split("=");e=s[0],s.shift(),n=s.join("="),"compare"===e&&(n=a[0].form.elements[n].value),i=xe[e](a.val(),n),void 0!==t&&(t.val+=i?0:1)}}),!1===i?(o?a.parent().addClass("invalid"):a.addClass("invalid"),void 0!==s&&P.exec(s,[a,a.val()])):(o?a.parent().addClass("valid"):a.addClass("valid"),void 0!==n&&P.exec(n,[a,a.val()])),!0)}};y.validator=xe;var Oe={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._onsubmit=null,this._action=null,this._setOptionsFromDOM(),this._create(),this},options:{submitTimeout:200,interactiveCheck:!1,onBeforeSubmit:y.noop_true,onSubmit:y.noop,onError:y.noop,onValid:y.noop,onValidatorCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this,t=this.element,n=this.options,s=t.find("[data-validate]");this._action=t[0].action,t.attr("novalidate","novalidate").attr("action","javascript:"),b.each(s,function(){var e=b(this);e.data("validate").indexOf("required")>-1&&(xe.is_control(e)?e.parent().addClass("required"):e.addClass("required")),!0===n.interactiveCheck&&e.on("propertychange change keyup input paste",function(){xe.validate(this)})}),this._onsubmit=null,null!==t[0].onsubmit&&(this._onsubmit=t[0].onsubmit,t[0].onsubmit=null),t[0].onsubmit=function(){return e._submit()},P.exec(this.options.onValidatorCreate,[this.element])},_submit:function(){var e=this,t=this.element,n=this.options,s=t.find("[data-validate]"),i=t.find(":submit").attr("disabled","disabled").addClass("disabled"),a={val:0};return b.each(s,function(){xe.validate(this,a,n.onValid,n.onError)}),i.removeAttr("disabled").removeClass("disabled"),t[0].action=this._action,a.val+=!1===P.exec(n.onBeforeSubmit,[t])?1:0,0===a.val&&setTimeout(function(){P.exec(n.onSubmit,[t]),null!==e._onsubmit&&P.exec(e._onsubmit)},n.submitTimeout),0===a.val},changeAttribute:function(e){e}};y.plugin("validator",Oe);var Me={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.fullscreen=!1,this.preloader=null,this.player=null,this.video=t,this.stream=null,this.volume=null,this.volumeBackup=0,this.muted=!1,this.fullScreenInterval=!1,this._setOptionsFromDOM(),this._create(),this},options:{src:null,poster:"",logo:"",logoHeight:32,logoWidth:"auto",logoTarget:"",volume:.5,loop:!1,autoplay:!1,fullScreenMode:METRO_FULLSCREEN_MODE.DESKTOP,aspectRatio:METRO_ASPECT_RATIO.HD,controlsHide:3e3,showLoop:!0,showPlay:!0,showStop:!0,showMute:!0,showFull:!0,showStream:!0,showVolume:!0,showInfo:!0,loopIcon:"<span class='default-icon-loop'></span>",stopIcon:"<span class='default-icon-stop'></span>",playIcon:"<span class='default-icon-play'></span>",pauseIcon:"<span class='default-icon-pause'></span>",muteIcon:"<span class='default-icon-mute'></span>",volumeLowIcon:"<span class='default-icon-low-volume'></span>",volumeMediumIcon:"<span class='default-icon-medium-volume'></span>",volumeHighIcon:"<span class='default-icon-high-volume'></span>",screenMoreIcon:"<span class='default-icon-enlarge'></span>",screenLessIcon:"<span class='default-icon-shrink'></span>",onPlay:y.noop,onPause:y.noop,onStop:y.noop,onEnd:y.noop,onMetadata:y.noop,onTime:y.noop,onVideoCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;this.video;!1===y.isFullscreenEnabled&&(t.fullScreenMode=METRO_FULLSCREEN_MODE.WINDOW),this._createPlayer(),this._createControls(),this._createEvents(),this._setAspectRatio(),!0===t.autoplay&&this.play(),P.exec(t.onVideoCreate,[e,this.player])},_createPlayer:function(){var e=this.element,t=this.options,n=this.video,s=e.prev(),i=e.parent(),a=b("<div>").addClass("media-player video-player "+e[0].className),o=b("<div>").addClass("preloader").appendTo(a),r=b("<a>").attr("href",t.logoTarget).addClass("logo").appendTo(a);0===s.length?i.prepend(a):a.insertAfter(s),e.appendTo(a),b.each(["muted","autoplay","controls","height","width","loop","poster","preload"],function(){e.removeAttr(this)}),e.attr("preload","auto"),""!==t.poster&&e.attr("poster",t.poster),n.volume=t.volume,o.activity({type:"cycle",style:"color"}),o.hide(0),this.preloader=o,""!==t.logo&&b("<img>").css({height:t.logoHeight,width:t.logoWidth}).attr("src",t.logo).appendTo(r),null!==t.src&&this._setSource(t.src),e[0].className="",this.player=a},_setSource:function(e){var t=this.element;t.find("source").remove(),t.removeAttr("src"),Array.isArray(e)?b.each(e,function(){var e=this;void 0!==e.src&&b("<source>").attr("src",e.src).attr("type",void 0!==e.type?e.type:"").appendTo(t)}):t.attr("src",e)},_createControls:function(){var e=this,t=this.element,n=this.options,s=this.elem,i=(this.player,b("<div>").addClass("controls").addClass(n.clsControls).insertAfter(t)),a=b("<div>").addClass("stream").appendTo(i),o=b("<input>").addClass("stream-slider ultra-thin cycle-marker").appendTo(a),r=b("<div>").addClass("volume").appendTo(i),l=b("<input>").addClass("volume-slider ultra-thin cycle-marker").appendTo(r),c=b("<div>").addClass("info-box").appendTo(i);!0!==n.showInfo&&c.hide(),o.slider({clsMarker:"bg-red",clsHint:"bg-cyan fg-white",clsComplete:"bg-cyan",hint:!0,onStart:function(){s.paused||s.pause()},onStop:function(t){s.seekable.length>0&&(s.currentTime=(e.duration*t/100).toFixed(0)),s.paused&&s.currentTime>0&&s.play()}}),this.stream=o,!0!==n.showStream&&a.hide(),l.slider({clsMarker:"bg-red",clsHint:"bg-cyan fg-white",hint:!0,value:100*n.volume,onChangeValue:function(e){s.volume=e/100}}),this.volume=l,!0!==n.showVolume&&r.hide();var d;!0===n.showLoop&&(d=b("<button>").attr("type","button").addClass("button square loop").html(n.loopIcon).appendTo(i)),!0===n.showPlay&&b("<button>").attr("type","button").addClass("button square play").html(n.playIcon).appendTo(i),!0===n.showStop&&b("<button>").attr("type","button").addClass("button square stop").html(n.stopIcon).appendTo(i),!0===n.showMute&&b("<button>").attr("type","button").addClass("button square mute").html(n.muteIcon).appendTo(i),!0===n.showFull&&b("<button>").attr("type","button").addClass("button square full").html(n.screenMoreIcon).appendTo(i),!0===n.loop&&(d.addClass("active"),t.attr("loop","loop")),this._setVolume(),n.muted&&(e.volumeBackup=s.volume,e.volume.data("slider").val(0),s.volume=0),c.html("00:00 / 00:00")},_createEvents:function(){var e=this,t=this.element,n=this.options,s=this.elem,i=this.player;t.on("loadstart",function(){e.preloader.fadeIn()}),t.on("loadedmetadata",function(){e.duration=s.duration.toFixed(0),e._setInfo(0,e.duration),P.exec(n.onMetadata,[s,i])}),t.on("canplay",function(){e._setBuffer(),e.preloader.fadeOut()}),t.on("progress",function(){e._setBuffer()}),t.on("timeupdate",function(){var t=Math.round(100*s.currentTime/e.duration);e._setInfo(s.currentTime,e.duration),e.stream.data("slider").val(t),P.exec(n.onTime,[s.currentTime,e.duration,s,i])}),t.on("waiting",function(){e.preloader.fadeIn()}),t.on("loadeddata",function(){}),t.on("play",function(){i.find(".play").html(n.pauseIcon),P.exec(n.onPlay,[s,i]),e._onMouse()}),t.on("pause",function(){i.find(".play").html(n.playIcon),P.exec(n.onPause,[s,i]),e._offMouse()}),t.on("stop",function(){e.stream.data("slider").val(0),P.exec(n.onStop,[s,i]),e._offMouse()}),t.on("ended",function(){e.stream.data("slider").val(0),P.exec(n.onEnd,[s,i]),e._offMouse()}),t.on("volumechange",function(){e._setVolume()}),i.on("click",".play",function(t){s.paused?e.play():e.pause()}),i.on("click",".stop",function(t){e.stop()}),i.on("click",".mute",function(t){e._toggleMute()}),i.on("click",".loop",function(){e._toggleLoop()}),i.on("click",".full",function(t){e.fullscreen=!e.fullscreen,i.find(".full").html(!0===e.fullscreen?n.screenLessIcon:n.screenMoreIcon),n.fullScreenMode===METRO_FULLSCREEN_MODE.WINDOW?!0===e.fullscreen?i.addClass("full-screen"):i.removeClass("full-screen"):!0===e.fullscreen?(y.requestFullScreen(s),!1===e.fullScreenInterval&&(e.fullScreenInterval=setInterval(function(){!1===y.inFullScreen()&&(e.fullscreen=!1,clearInterval(e.fullScreenInterval),e.fullScreenInterval=!1,i.find(".full").html(n.screenMoreIcon))},1e3))):y.exitFullScreen(),!0===e.fullscreen?b(document).on("keyup.METRO_VIDEO",function(e){27===e.keyCode&&i.find(".full").click()}):b(document).off("keyup.METRO_VIDEO")}),b(window).resize(function(){e._setAspectRatio()})},_onMouse:function(){var e=this.player,t=this.options;t.controlsHide>0&&(e.on(y.eventEnter,function(){e.find(".controls").fadeIn()}),e.on(y.eventLeave,function(){setTimeout(function(){e.find(".controls").fadeOut()},t.controlsHide)}))},_offMouse:function(){this.player.off(y.eventEnter),this.player.off(y.eventLeave),this.player.find(".controls").fadeIn()},_toggleLoop:function(){var e=this.player.find(".loop");0!==e.length&&(e.toggleClass("active"),e.hasClass("active")?this.element.attr("loop","loop"):this.element.removeAttr("loop"))},_toggleMute:function(){this.muted=!this.muted,!1===this.muted?(this.video.volume=this.volumeBackup,this.volume.data("slider").val(100*this.volumeBackup)):(this.volumeBackup=this.video.volume,this.volume.data("slider").val(0),this.video.volume=0)},_setInfo:function(e,t){this.player.find(".info-box").html(P.secondsToFormattedString(Math.round(e))+" / "+P.secondsToFormattedString(Math.round(t)))},_setBuffer:function(){var e=this.video.buffered.length?Math.round(Math.floor(this.video.buffered.end(0))/Math.floor(this.video.duration)*100):0;this.stream.data("slider").buff(e)},_setVolume:function(){var e=this.video,t=this.player,n=this.options,s=t.find(".mute"),i=100*e.volume;i>1&&i<30?s.html(n.volumeLowIcon):i>=30&&i<60?s.html(n.volumeMediumIcon):i>=60&&i<=100?s.html(n.volumeHighIcon):s.html(n.muteIcon)},_setAspectRatio:function(){var e,t=this.player,n=this.options,s=t.outerWidth();switch(n.aspectRatio){case METRO_ASPECT_RATIO.SD:e=P.aspectRatio(s,"4/3");break;case METRO_ASPECT_RATIO.CINEMA:e=P.aspectRatio(s,"21/9");break;default:e=P.aspectRatio(s,"16/9")}t.outerHeight(e)},aspectRatio:function(e){this.options.aspectRatio=e,this._setAspectRatio()},play:function(e){void 0!==e&&this._setSource(e),void 0===this.element.attr("src")&&0===this.element.find("source").length||this.video.play()},pause:function(){this.video.pause()},resume:function(){this.video.paused&&this.play()},stop:function(){this.video.pause(),this.video.currentTime=0,this.stream.data("slider").val(0),this._offMouse()},volume:function(e){if(void 0===e)return this.video.volume;e>1&&(e/=100),this.video.volume=e,this.volume.data("slider").val(100*e)},loop:function(){this._toggleLoop()},mute:function(){this._toggleMute()},changeAspectRatio:function(){this.options.aspectRatio=this.element.attr("data-aspect-ratio"),this._setAspectRatio()},changeSource:function(){var e=JSON.parse(this.element.attr("data-src"));this.play(e)},changeVolume:function(){var e=this.element.attr("data-volume");this.volume(e)},changeAttribute:function(e){switch(e){case"data-aspect-ratio":this.changeAspectRatio();break;case"data-src":this.changeSource();break;case"data-volume":this.changeVolume()}}};y.plugin("video",Me);var Ie={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this.win=null,this.overlay=null,this._setOptionsFromDOM(),this._create(),P.exec(this.options.onWindowCreate,[this.win,this.element]),this},options:{width:"auto",height:"auto",btnClose:!0,btnMin:!0,btnMax:!0,clsCaption:"",clsContent:"",clsWindow:"",draggable:!0,dragElement:".window-caption",dragArea:"parent",shadow:!1,icon:"",title:"Window",content:"default",resizable:!0,overlay:!1,overlayColor:"transparent",overlayAlpha:.5,modal:!1,position:"absolute",checkEmbed:!0,top:"auto",left:"auto",place:"auto",onDragStart:y.noop,onDragStop:y.noop,onDragMove:y.noop,onCaptionDblClick:y.noop,onCloseClick:y.noop,onMaxClick:y.noop,onMinClick:y.noop,onResizeStart:y.noop,onResizeStop:y.noop,onResize:y.noop,onWindowCreate:y.noop,onShow:y.noop,onWindowDestroy:y.noop,onCanClose:y.noop_true,onClose:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e,t,n=this.element,s=this.options,i=n.prev(),a=n.parent();!0===s.modal&&(s.btnMax=!1,s.btnMin=!1,s.resizable=!1),"default"===s.content&&(s.content=n),e=this._window(s),0===i.length?a.prepend(e):e.insertAfter(i),!0===s.overlay&&((t=this._overlay()).appendTo(e.parent()),this.overlay=t),P.exec(s.onShow,[e]),this.win=e},_window:function(e){var t,n,s,i,a,o=this;return(t=b("<div>").addClass("window")).css({width:e.width,height:e.height,position:e.position,top:e.top,left:e.left}),!0===e.modal&&t.addClass("modal"),n=b("<div>").addClass("window-caption"),s=b("<div>").addClass("window-content"),t.append(n),t.append(s),!0===e.status&&(a=b("<div>").addClass("window-status"),t.append(a)),!0===e.shadow&&t.addClass("win-shadow"),void 0!==e.icon&&b("<span>").addClass("icon").html(e.icon).appendTo(n),void 0!==e.title&&b("<span>").addClass("title").html(e.title).appendTo(n),void 0!==e.content&&"original"!==e.content&&(P.isUrl(e.content)&&P.isVideoUrl(e.content)&&(e.content=P.embedUrl(e.content)),!P.isJQueryObject(e.content)&&P.isFunc(e.content)&&(e.content=P.exec(e.content)),P.isJQueryObject(e.content)?e.content.appendTo(s):s.html(e.content)),!0!==e.btnClose&&!0!==e.btnMin&&!0!==e.btnMax||((i=b("<div>").addClass("buttons")).appendTo(n),!0===e.btnMax&&b("<span>").addClass("btn-max").appendTo(i),!0===e.btnMin&&b("<span>").addClass("btn-min").appendTo(i),!0===e.btnClose&&b("<span>").addClass("btn-close").appendTo(i)),t.attr("id",void 0===e.id?P.uniqueId():e.id),!0===e.resizable&&(b("<span>").addClass("resize-element").appendTo(t),t.addClass("resizable")),t.on("dblclick",".window-caption",function(e){o.maximized(e)}),t.on("click",".btn-max",function(e){o.maximized(e)}),t.on("click",".btn-min",function(e){o.minimized(e)}),t.on("click",".btn-close",function(e){o.close(e)}),!0===e.resizable&&t.resizable({resizeElement:".resize-element",onResizeStart:e.onResizeStart,onResizeStop:e.onResizeStop,onResize:e.onResize}),!0===e.draggable&&t.draggable({dragElement:e.dragElement,dragArea:e.dragArea,onDragStart:e.onDragStart,onDragStop:e.onDragStop,onDragMove:e.onDragMove}),"auto"!==e.place&&t.addClass("pos-"+e.place),t.addClass(e.clsWindow),n.addClass(e.clsCaption),s.addClass(e.clsContent),t},_overlay:function(){this.win,this.element;var e=this.options,t=b("<div>");return t.addClass("overlay"),"transparent"===e.overlayColor?t.addClass("transparent"):t.css({background:P.hex2rgba(e.overlayColor,e.overlayAlpha)}),t},maximized:function(e){var t=this.win,n=(this.element,this.options),s=b(e.currentTarget);t.toggleClass("maximized"),s.hasClass("window-caption")?P.exec(n.onCaptionDblClick,[t]):P.exec(n.onMaxClick,[t])},minimized:function(e){var t=this.win,n=(this.element,this.options);t.toggleClass("minimized"),P.exec(n.onMinClick,[t])},close:function(e){var t=this.win,n=(this.element,this.options);if(!1===P.exec(n.onCanClose,[t]))return!1;var s=0;n.onClose!==y.noop&&(s=500),P.exec(n.onClose,[t]),setTimeout(function(){!0===n.modal&&t.siblings(".overlay").remove(),P.exec(n.onCloseClick(),[t]),P.exec(n.onWindowDestroy,[t]),t.remove()},s)},toggleButtons:function(e){this.element;var t=this.win,n=(this.options,t.find(".btn-close")),s=t.find(".btn-min"),i=t.find(".btn-max");"data-btn-close"===e&&n.toggle(),"data-btn-min"===e&&s.toggle(),"data-btn-max"===e&&i.toggle()},changeSize:function(e){var t=this.element,n=this.win;this.options;"data-width"===e&&n.css("width",t.data("width")),"data-height"===e&&n.css("height",t.data("height"))},changeClass:function(e){var t=this.element,n=this.win;this.options;"data-cls-caption"===e&&(n.find(".window-caption")[0].className=t.attr("data-cls-caption")),"data-cls-content"===e&&(n.find(".window-content")[0].className=t.attr("data-cls-content"))},toggleShadow:function(){var e=this.element,t=this.win;this.options;!0===JSON.parse(e.attr("data-shadow"))?t.addClass("win-shadow"):t.removeClass("win-shadow")},setContent:function(){var e,t=this.element,n=this.win,s=(this.options,t.attr("data-content"));e=!P.isJQueryObject(s)&&P.isFunc(s)?P.exec(s):P.isJQueryObject(s)?s.html():s,n.find(".window-content").html(e)},setTitle:function(){var e=this.element,t=this.win,n=(this.options,e.attr("data-title"));t.find(".window-caption .title").html(n)},setIcon:function(){var e=this.element,t=this.win,n=(this.options,e.attr("data-icon"));t.find(".window-caption .icon").html(n)},getIcon:function(){this.element;var e=this.win;this.options;return e.find(".window-caption .icon").html()},getTitle:function(){this.element;var e=this.win;this.options;return e.find(".window-caption .title").html()},toggleDraggable:function(){var e=this.element,t=this.win,n=(this.options,JSON.parse(e.attr("data-draggable"))),s=t.data("draggable");!0===n?s.on():s.off()},toggleResizable:function(){var e=this.element,t=this.win,n=(this.options,JSON.parse(e.attr("data-resizable"))),s=t.data("resizable");!0===n?(s.on(),t.find(".resize-element").removeClass("resize-element-disabled")):(s.off(),t.find(".resize-element").addClass("resize-element-disabled"))},changeTopLeft:function(e){var t,n=this.element,s=this.win;this.options;if("data-top"===e){if(t=parseInt(n.attr("data-top")),!isNaN(t))return;s.css("top",t)}if("data-left"===e){if(t=parseInt(n.attr("data-left")),!isNaN(t))return;s.css("left",t)}},changePlace:function(e){var t=this.element,n=this.win,s=(this.options,t.attr("data-place"));n.addClass(s)},changeAttribute:function(e){switch(e){case"data-btn-close":case"data-btn-min":case"data-btn-max":this.toggleButtons(e);break;case"data-width":case"data-height":this.changeSize(e);break;case"data-cls-caption":case"data-cls-content":this.changeClass(e);break;case"data-shadow":this.toggleShadow();break;case"data-icon":this.setIcon();break;case"data-title":this.setTitle();break;case"data-content":this.setContent();break;case"data-draggable":this.toggleDraggable();break;case"data-resizable":this.toggleResizable();break;case"data-top":case"data-left":this.changeTopLeft(e);break;case"data-place":this.changePlace()}}};y.plugin("window",Ie);var ke={init:function(e,t){return this.options=b.extend({},this.options,e),this.elem=t,this.element=b(t),this._setOptionsFromDOM(),this._create(),this},options:{start:1,finish:0,iconHelp:"<span class='default-icon-help'></span>",iconPrev:"<span class='default-icon-left-arrow'></span>",iconNext:"<span class='default-icon-right-arrow'></span>",iconFinish:"<span class='default-icon-check'></span>",onPage:y.noop,onHelpClick:y.noop,onPrevClick:y.noop,onNextClick:y.noop,onFinishClick:y.noop,onBeforePrev:y.noop_true,onBeforeNext:y.noop_true,onBeforeFinish:y.noop_true,onWizardCreate:y.noop},_setOptionsFromDOM:function(){var e=this.element,t=this.options;b.each(e.data(),function(e,n){if(e in t)try{t[e]=b.parseJSON(n)}catch(s){t[e]=n}})},_create:function(){var e=this.element,t=this.options;this._createWizard(),this._createEvents(),P.exec(t.onWizardCreate,[e])},_createWizard:function(){var e,t=this.element,n=this.options;t.addClass("wizard").addClass(n.view),e=b("<div>").addClass("action-bar").appendTo(t),b("<button>").addClass("button cycle outline wizard-btn-help").html(n.iconHelp).appendTo(e),b("<button>").addClass("button cycle outline wizard-btn-prev").html(n.iconPrev).appendTo(e),b("<button>").addClass("button cycle outline wizard-btn-next").html(n.iconNext).appendTo(e),b("<button>").addClass("button cycle outline wizard-btn-finish").html(n.iconFinish).appendTo(e),this.toPage(n.start),this._setHeight()},_setHeight:function(){var e=this.element,t=(this.options,e.children("section"));t.children(".page-content").css("max-height","none"),b.each(t,function(){var e=b(this).children(".page-content");e.css("max-height",e.outerHeight(!0))})},_createEvents:function(){var e=this,t=this.element,n=this.options;t.on("click",".wizard-btn-help",function(){var s=t.children("section").get(e.current-1);P.exec(n.onHelpClick,[e.current,s,t])}),t.on("click",".wizard-btn-prev",function(){e.prev(),P.exec(n.onPrevClick,[e.current,t])}),t.on("click",".wizard-btn-next",function(){e.next(),P.exec(n.onNextClick,[e.current,t])}),t.on("click",".wizard-btn-finish",function(){P.exec(n.onFinishClick,[e.current,t])}),b(window).on("resize",function(){e._setHeight()})},next:function(){var e=this.element,t=this.options,n=e.children("section");this.current+1>n.length||!1===P.exec(t.onBeforeNext)||(this.current++,this.toPage(this.current))},prev:function(){this.element;var e=this.options;this.current-1!=0&&!1!==P.exec(e.onBeforePrev)&&(this.current--,this.toPage(this.current))},last:function(){var e=this.element;this.options;this.toPage(e.children("section").length)},first:function(){this.toPage(1)},toPage:function(e){var t=this.element,n=this.options,s=b(t.children("section").get(e-1)),i=t.children("section");if(0!==s.length){var a=t.find(".wizard-btn-finish").addClass("disabled"),o=t.find(".wizard-btn-next").addClass("disabled"),r=t.find(".wizard-btn-prev").addClass("disabled");this.current=e,t.children("section").removeClass("complete current").removeClass(n.clsCurrent).removeClass(n.clsComplete),s.addClass("current").addClass(n.clsCurrent),s.prevAll().addClass("complete").addClass(n.clsComplete),b(".action-bar").animate({left:25*t.children("section.complete").length+41}),(this.current===i.length||n.finish>0&&this.current>=n.finish)&&a.removeClass("disabled"),this.current<i.length&&o.removeClass("disabled"),this.current>1&&r.removeClass("disabled"),t.trigger("onpage",[this.current,t]),P.exec(n.onPage,[this.current,t])}},changeAttribute:function(e){}};return y.plugin("wizard",ke),!0===METRO_INIT?y.init():y});
//# sourceMappingURL=metro.min.js.map