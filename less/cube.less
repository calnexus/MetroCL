@import (once) "include/vars";
@import (once) "include/mixins";

@cubeCellBackground: #231F20;
@cubeCellBorder: #303030;
@cubeCellColor: #767676;
@cubeCellFlash: #c4122f;

.cube {
    display: block;
    position: relative;
    width: 320px;
    height: 160px;
    margin: 120px auto 50px;
    .rotateY(30deg);
}

.cube {
    .side {
        display: flex;
        flex-flow: row wrap;
        justify-content: space-between;
        position: absolute;
        overflow: hidden;
        width: 162px;
        height: 162px;
        top: 0;
        left: 0;
    }

    .side {
        &.left-side {
            .skewY(23deg); .rotateX(10deg);
            //border-top: 1px solid @cubeCellFlash;
            top: -1px;
        }

        &.right-side {
            left: 160px;
            .skewY(-23deg); .rotateY(10deg);
            //border-left: 1px solid @cubeCellFlash;
            //border-top: 1px solid @cubeCellFlash;
        }

        &.top-side {
            left: 80px;
            bottom: 116px;
            top: auto;
            .rotate(45deg); .rotateZ(0); .skew(-22deg, -22deg);
        }
    }
}

.cube {
    .side {
        .cube-cell {
            display: block;
            position: relative;
            width: 24px;
            height: 24px;
            margin: 8px;
            flex-grow: 0;
            flex-shrink: 0;
            background-color: @cubeCellBackground;
            border: 1px solid @cubeCellBorder;
            box-shadow: 0 0 5px rgba(red(@cubeCellColor), green(@cubeCellColor), blue(@cubeCellColor), .8);
            transition: @transition-base;
            line-height: 24px;
            text-align: center;
            color: @white;

            &.light {
                animation: pulsar-cell 2.5s 0s ease-out infinite;
                background-color: @cubeCellFlash;
                border-color: @cubeCellFlash;
                color: @dark;
                box-shadow:
                        0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), 1),
                        0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), 1),
                        0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), 1);
            }
        }
    }
}

@keyframes pulsar-cell {
    0%, 100% {
        box-shadow:
                0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), 1),
                0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), 1),
                0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), 1);
    }
    50% {
        box-shadow:
                0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), .3),
                0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), .3),
                0 0 10px rgba(red(@cubeCellFlash), green(@cubeCellFlash), blue(@cubeCellFlash), .3);
    }
}